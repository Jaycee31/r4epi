<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>31 Working with multiple data frames | R for Epidemiology</title>
  <meta name="description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="31 Working with multiple data frames | R for Epidemiology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r4epi/" />
  <meta property="og:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />
  <meta property="og:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="github-repo" content="brad-cannell/r4epi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="31 Working with multiple data frames | R for Epidemiology" />
  
  <meta name="twitter:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="twitter:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2022-07-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="conditional-operations.html"/>
<link rel="next" href="restructuring-data-frames.html"/>
<script src="libs/header-attrs-2.14/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0RREBTQ0D9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0RREBTQ0D9');
</script>
<!-- R4Epi Favicons -->
<!-- https://bookdown.org/yihui/rmarkdown-cookbook/favicon.html -->
<!-- Also using Favicon Generator (https://realfavicongenerator.net) -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Epidemiology</a></li>

<li class="divider"></li>
<li><a href="index.html#welcome">Welcome<span></span></a>
<ul>
<li><a href="index.html#acknowledgements">Acknowledgements<span></span></a></li>
</ul></li>
<li><a href="introduction.html#introduction">Introduction<span></span></a>
<ul>
<li><a href="introduction.html#goals">Goals<span></span></a></li>
<li><a href="introduction.html#text-conventions-used-in-this-book">Text conventions used in this book<span></span></a></li>
<li><a href="introduction.html#other-reading">Other reading<span></span></a></li>
<li><a href="introduction.html#contributing-to-r4epi">Contributing to R4Epi<span></span></a>
<ul>
<li><a href="introduction.html#typos">Typos<span></span></a></li>
<li><a href="introduction.html#issues">Issues<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="about-the-authors.html#about-the-authors">About the Authors<span></span></a>
<ul>
<li><a href="about-the-authors.html#brad-cannell">Brad Cannell<span></span></a></li>
<li><a href="about-the-authors.html#melvin-livingston">Melvin Livingston<span></span></a></li>
</ul></li>
<li class="part"><span><b>I Getting Started<span></span></b></span></li>
<li class="chapter" data-level="1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-mac"><i class="fa fa-check"></i><b>1.1</b> Download and install on a Mac<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-pc"><i class="fa fa-check"></i><b>1.2</b> Download and install on a PC<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>2</b> What is R?<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="what-is-r.html"><a href="what-is-r.html#what-is-data"><i class="fa fa-check"></i><b>2.1</b> What is data?<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="what-is-r.html"><a href="what-is-r.html#what-is-r-1"><i class="fa fa-check"></i><b>2.2</b> What is R?<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="what-is-r.html"><a href="what-is-r.html#transferring-data"><i class="fa fa-check"></i><b>2.2.1</b> Transferring data<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="what-is-r.html"><a href="what-is-r.html#managing-data"><i class="fa fa-check"></i><b>2.2.2</b> Managing data<span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="what-is-r.html"><a href="what-is-r.html#analyzing-data"><i class="fa fa-check"></i><b>2.2.3</b> Analyzing data<span></span></a></li>
<li class="chapter" data-level="2.2.4" data-path="what-is-r.html"><a href="what-is-r.html#presenting-data"><i class="fa fa-check"></i><b>2.2.4</b> Presenting data<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html"><i class="fa fa-check"></i><b>3</b> Navigating the RStudio interface<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-console"><i class="fa fa-check"></i><b>3.1</b> The console<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-environment-pane"><i class="fa fa-check"></i><b>3.2</b> The environment pane<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-files-pane"><i class="fa fa-check"></i><b>3.3</b> The files pane<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-source-pane"><i class="fa fa-check"></i><b>3.4</b> The source pane<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#rstudio-preferences"><i class="fa fa-check"></i><b>3.5</b> RStudio preferences<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html"><i class="fa fa-check"></i><b>4</b> Speaking R’s language<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#r-is-a-language"><i class="fa fa-check"></i><b>4.1</b> R is a <em>language</em><span></span></a></li>
<li class="chapter" data-level="4.2" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#the-r-interpreter"><i class="fa fa-check"></i><b>4.2</b> The R interpreter<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#errors"><i class="fa fa-check"></i><b>4.3</b> Errors<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#functions"><i class="fa fa-check"></i><b>4.4</b> Functions<span></span></a></li>
<li class="chapter" data-level="4.5" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#objects"><i class="fa fa-check"></i><b>4.5</b> Objects<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#comments"><i class="fa fa-check"></i><b>4.6</b> Comments<span></span></a></li>
<li class="chapter" data-level="4.7" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#packages"><i class="fa fa-check"></i><b>4.7</b> Packages<span></span></a></li>
<li class="chapter" data-level="4.8" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#programming-style"><i class="fa fa-check"></i><b>4.8</b> Programming style<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lets-get-programming.html"><a href="lets-get-programming.html"><i class="fa fa-check"></i><b>5</b> Let’s get programming<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#simulating-data"><i class="fa fa-check"></i><b>5.1</b> Simulating data<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vectors"><i class="fa fa-check"></i><b>5.2</b> Vectors<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vector-types"><i class="fa fa-check"></i><b>5.2.1</b> Vector types<span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#double-vectors"><i class="fa fa-check"></i><b>5.2.2</b> Double vectors<span></span></a></li>
<li class="chapter" data-level="5.2.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#integer-vectors"><i class="fa fa-check"></i><b>5.2.3</b> Integer vectors<span></span></a></li>
<li class="chapter" data-level="5.2.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#logical-vectors"><i class="fa fa-check"></i><b>5.2.4</b> Logical vectors<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#data-frames"><i class="fa fa-check"></i><b>5.3</b> Data frames<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#tibbles"><i class="fa fa-check"></i><b>5.4</b> Tibbles<span></span></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-as_tibble-function"><i class="fa fa-check"></i><b>5.4.1</b> The as_tibble function<span></span></a></li>
<li class="chapter" data-level="5.4.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tibble-function"><i class="fa fa-check"></i><b>5.4.2</b> The tibble function<span></span></a></li>
<li class="chapter" data-level="5.4.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tribble-function"><i class="fa fa-check"></i><b>5.4.3</b> The tribble function<span></span></a></li>
<li class="chapter" data-level="5.4.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#why-use-tibbles"><i class="fa fa-check"></i><b>5.4.4</b> Why use tibbles<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#missing-data"><i class="fa fa-check"></i><b>5.5</b> Missing data<span></span></a></li>
<li class="chapter" data-level="5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#our-first-analysis"><i class="fa fa-check"></i><b>5.6</b> Our first analysis<span></span></a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#manual-calculation-of-the-mean"><i class="fa fa-check"></i><b>5.6.1</b> Manual calculation of the mean<span></span></a></li>
<li class="chapter" data-level="5.6.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#dollar-sign-notation"><i class="fa fa-check"></i><b>5.6.2</b> Dollar sign notation<span></span></a></li>
<li class="chapter" data-level="5.6.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#bracket-notation"><i class="fa fa-check"></i><b>5.6.3</b> Bracket notation<span></span></a></li>
<li class="chapter" data-level="5.6.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-sum-function"><i class="fa fa-check"></i><b>5.6.4</b> The sum function<span></span></a></li>
<li class="chapter" data-level="5.6.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#nesting-functions"><i class="fa fa-check"></i><b>5.6.5</b> Nesting functions<span></span></a></li>
<li class="chapter" data-level="5.6.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-length-function"><i class="fa fa-check"></i><b>5.6.6</b> The length function<span></span></a></li>
<li class="chapter" data-level="5.6.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-mean-function"><i class="fa fa-check"></i><b>5.6.7</b> The mean function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#some-common-errors"><i class="fa fa-check"></i><b>5.7</b> Some common errors<span></span></a></li>
<li class="chapter" data-level="5.8" data-path="lets-get-programming.html"><a href="lets-get-programming.html#summary"><i class="fa fa-check"></i><b>5.8</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="asking-questions.html"><a href="asking-questions.html"><i class="fa fa-check"></i><b>6</b> Asking questions<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="asking-questions.html"><a href="asking-questions.html#when-should-we-seek-help"><i class="fa fa-check"></i><b>6.1</b> When should we seek help?<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="asking-questions.html"><a href="asking-questions.html#where-should-we-seek-help"><i class="fa fa-check"></i><b>6.2</b> Where should we seek help?<span></span></a></li>
<li class="chapter" data-level="6.3" data-path="asking-questions.html"><a href="asking-questions.html#how-should-we-seek-help"><i class="fa fa-check"></i><b>6.3</b> How should we seek help?<span></span></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="asking-questions.html"><a href="asking-questions.html#creating-a-post-on-stack-overflow"><i class="fa fa-check"></i><b>6.3.1</b> Creating a post on Stack Overflow<span></span></a></li>
<li class="chapter" data-level="6.3.2" data-path="asking-questions.html"><a href="asking-questions.html#creating-better-posts-and-asking-better-questions"><i class="fa fa-check"></i><b>6.3.2</b> Creating better posts and asking better questions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="asking-questions.html"><a href="asking-questions.html#helping-others"><i class="fa fa-check"></i><b>6.4</b> Helping others<span></span></a></li>
<li class="chapter" data-level="6.5" data-path="asking-questions.html"><a href="asking-questions.html#summary-1"><i class="fa fa-check"></i><b>6.5</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>II Coding Tools and Best Practices<span></span></b></span></li>
<li class="chapter" data-level="7" data-path="r-scripts.html"><a href="r-scripts.html"><i class="fa fa-check"></i><b>7</b> R scripts<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-scripts.html"><a href="r-scripts.html#creating-r-scripts"><i class="fa fa-check"></i><b>7.1</b> Creating R scripts<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R markdown<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>8.1</b> What is R markdown?<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="r-markdown.html"><a href="r-markdown.html#why-use-r-markdown"><i class="fa fa-check"></i><b>8.2</b> Why use R markdown?<span></span></a></li>
<li class="chapter" data-level="8.3" data-path="r-markdown.html"><a href="r-markdown.html#create-an-r-notebook"><i class="fa fa-check"></i><b>8.3</b> Create an R Notebook<span></span></a></li>
<li class="chapter" data-level="8.4" data-path="r-markdown.html"><a href="r-markdown.html#yaml-headers"><i class="fa fa-check"></i><b>8.4</b> YAML headers<span></span></a></li>
<li class="chapter" data-level="8.5" data-path="r-markdown.html"><a href="r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>8.5</b> R code chunks<span></span></a></li>
<li class="chapter" data-level="8.6" data-path="r-markdown.html"><a href="r-markdown.html#markdown"><i class="fa fa-check"></i><b>8.6</b> Markdown<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="r-projects.html"><a href="r-projects.html"><i class="fa fa-check"></i><b>9</b> R projects<span></span></a></li>
<li class="chapter" data-level="10" data-path="coding-best-practices.html"><a href="coding-best-practices.html"><i class="fa fa-check"></i><b>10</b> Coding best practices<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#general-principles"><i class="fa fa-check"></i><b>10.1</b> General principles<span></span></a></li>
<li class="chapter" data-level="10.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#code-comments"><i class="fa fa-check"></i><b>10.2</b> Code comments<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#defining-key-variables"><i class="fa fa-check"></i><b>10.2.1</b> Defining key variables<span></span></a></li>
<li class="chapter" data-level="10.2.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#what-this-code-is-trying-to-accomplish"><i class="fa fa-check"></i><b>10.2.2</b> What this code is trying to accomplish<span></span></a></li>
<li class="chapter" data-level="10.2.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#why-i-chose-this-particular-strategy"><i class="fa fa-check"></i><b>10.2.3</b> Why I chose this particular strategy<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#style-guidelines"><i class="fa fa-check"></i><b>10.3</b> Style guidelines<span></span></a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#comments-1"><i class="fa fa-check"></i><b>10.3.1</b> Comments<span></span></a></li>
<li class="chapter" data-level="10.3.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#object-variable-names"><i class="fa fa-check"></i><b>10.3.2</b> Object (variable) names<span></span></a></li>
<li class="chapter" data-level="10.3.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#use-names-that-are-informative"><i class="fa fa-check"></i><b>10.3.3</b> Use names that are informative<span></span></a></li>
<li class="chapter" data-level="10.3.4" data-path="coding-best-practices.html"><a href="coding-best-practices.html#file-names"><i class="fa fa-check"></i><b>10.3.4</b> File Names<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="using-pipes.html"><a href="using-pipes.html"><i class="fa fa-check"></i><b>11</b> Using pipes<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="using-pipes.html"><a href="using-pipes.html#what-are-pipes"><i class="fa fa-check"></i><b>11.1</b> What are pipes?<span></span></a></li>
<li class="chapter" data-level="11.2" data-path="using-pipes.html"><a href="using-pipes.html#how-do-pipes-work"><i class="fa fa-check"></i><b>11.2</b> How do pipes work?<span></span></a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="using-pipes.html"><a href="using-pipes.html#keyboard-shortcut"><i class="fa fa-check"></i><b>11.2.1</b> Keyboard shortcut<span></span></a></li>
<li class="chapter" data-level="11.2.2" data-path="using-pipes.html"><a href="using-pipes.html#pipe-style"><i class="fa fa-check"></i><b>11.2.2</b> Pipe style<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="using-pipes.html"><a href="using-pipes.html#final-thought-on-pipes"><i class="fa fa-check"></i><b>11.3</b> Final thought on pipes<span></span></a></li>
</ul></li>
<li class="part"><span><b>III Data Transfer<span></span></b></span></li>
<li class="chapter" data-level="12" data-path="introduction-to-data-transfer.html"><a href="introduction-to-data-transfer.html"><i class="fa fa-check"></i><b>12</b> Introduction to data transfer<span></span></a></li>
<li class="chapter" data-level="13" data-path="file-paths.html"><a href="file-paths.html"><i class="fa fa-check"></i><b>13</b> File paths<span></span></a>
<ul>
<li class="chapter" data-level="13.1" data-path="file-paths.html"><a href="file-paths.html#finding-file-paths"><i class="fa fa-check"></i><b>13.1</b> Finding file paths<span></span></a></li>
<li class="chapter" data-level="13.2" data-path="file-paths.html"><a href="file-paths.html#relative-file-paths"><i class="fa fa-check"></i><b>13.2</b> Relative file paths<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html"><i class="fa fa-check"></i><b>14</b> Importing plain text files<span></span></a>
<ul>
<li class="chapter" data-level="14.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#packages-for-importing-data"><i class="fa fa-check"></i><b>14.1</b> Packages for importing data<span></span></a></li>
<li class="chapter" data-level="14.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-space-delimited-files"><i class="fa fa-check"></i><b>14.2</b> Importing space delimited files<span></span></a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#specifying-missing-data-values"><i class="fa fa-check"></i><b>14.2.1</b> Specifying missing data values<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-tab-delimited-files"><i class="fa fa-check"></i><b>14.3</b> Importing tab delimited files<span></span></a></li>
<li class="chapter" data-level="14.4" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-fixed-width-format-files"><i class="fa fa-check"></i><b>14.4</b> Importing fixed width format files<span></span></a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#vector-of-column-widths"><i class="fa fa-check"></i><b>14.4.1</b> Vector of column widths<span></span></a></li>
<li class="chapter" data-level="14.4.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#paired-vector-of-start-and-end-positions"><i class="fa fa-check"></i><b>14.4.2</b> Paired vector of start and end positions<span></span></a></li>
<li class="chapter" data-level="14.4.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#using-named-arguments"><i class="fa fa-check"></i><b>14.4.3</b> Using named arguments<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-comma-separated-values-files"><i class="fa fa-check"></i><b>14.5</b> Importing comma separated values files<span></span></a></li>
<li class="chapter" data-level="14.6" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#additional-arguments"><i class="fa fa-check"></i><b>14.6</b> Additional arguments<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="importing-binary-files.html"><a href="importing-binary-files.html"><i class="fa fa-check"></i><b>15</b> Importing binary files<span></span></a>
<ul>
<li class="chapter" data-level="15.1" data-path="importing-binary-files.html"><a href="importing-binary-files.html#packages-for-importing-data-1"><i class="fa fa-check"></i><b>15.1</b> Packages for importing data<span></span></a></li>
<li class="chapter" data-level="15.2" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-microsoft-excel-spreadsheets"><i class="fa fa-check"></i><b>15.2</b> Importing Microsoft Excel spreadsheets<span></span></a></li>
<li class="chapter" data-level="15.3" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-data-from-other-statistical-analysis-software"><i class="fa fa-check"></i><b>15.3</b> Importing data from other statistical analysis software<span></span></a></li>
<li class="chapter" data-level="15.4" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-sas-data-sets"><i class="fa fa-check"></i><b>15.4</b> Importing SAS data sets<span></span></a></li>
<li class="chapter" data-level="15.5" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-stata-data-sets"><i class="fa fa-check"></i><b>15.5</b> Importing Stata data sets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="rstudios-data-import-tool.html"><a href="rstudios-data-import-tool.html"><i class="fa fa-check"></i><b>16</b> RStudio’s data import tool<span></span></a></li>
<li class="chapter" data-level="17" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>17</b> Exporting data<span></span></a>
<ul>
<li class="chapter" data-level="17.1" data-path="exporting-data.html"><a href="exporting-data.html#plain-text-files"><i class="fa fa-check"></i><b>17.1</b> Plain text files<span></span></a></li>
<li class="chapter" data-level="17.2" data-path="exporting-data.html"><a href="exporting-data.html#r-binary-files"><i class="fa fa-check"></i><b>17.2</b> R binary files<span></span></a></li>
</ul></li>
<li class="part"><span><b>IV Descriptive Analysis<span></span></b></span></li>
<li class="chapter" data-level="18" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html"><i class="fa fa-check"></i><b>18</b> Introduction to descriptive analysis<span></span></a>
<ul>
<li class="chapter" data-level="18.1" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-is-descriptive-analysis-and-why-would-we-do-it"><i class="fa fa-check"></i><b>18.1</b> What is descriptive analysis and why would we do it?<span></span></a></li>
<li class="chapter" data-level="18.2" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-kind-of-descriptive-analysis-should-we-perform"><i class="fa fa-check"></i><b>18.2</b> What kind of descriptive analysis should we perform?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html"><i class="fa fa-check"></i><b>19</b> Numerical descriptions of categorical variables<span></span></a>
<ul>
<li class="chapter" data-level="19.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#factor-vectors"><i class="fa fa-check"></i><b>19.1</b> Factor vectors<span></span></a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-numeric-variable"><i class="fa fa-check"></i><b>19.1.1</b> Coerce a numeric variable<span></span></a></li>
<li class="chapter" data-level="19.1.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-character-variable"><i class="fa fa-check"></i><b>19.1.2</b> Coerce a character variable<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#height-and-weight-data"><i class="fa fa-check"></i><b>19.2</b> Height and Weight Data<span></span></a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#view-the-data"><i class="fa fa-check"></i><b>19.2.1</b> View the data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-frequencies"><i class="fa fa-check"></i><b>19.3</b> Calculating frequencies<span></span></a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-base-r-table-function"><i class="fa fa-check"></i><b>19.3.1</b> The base R table function<span></span></a></li>
<li class="chapter" data-level="19.3.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-gmodels-crosstable-function"><i class="fa fa-check"></i><b>19.3.2</b> The gmodels CrossTable function<span></span></a></li>
<li class="chapter" data-level="19.3.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-tidyverse-way"><i class="fa fa-check"></i><b>19.3.3</b> The tidyverse way<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-percentages"><i class="fa fa-check"></i><b>19.4</b> Calculating percentages<span></span></a></li>
<li class="chapter" data-level="19.5" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#cat-missing-data"><i class="fa fa-check"></i><b>19.5</b> Missing data<span></span></a></li>
<li class="chapter" data-level="19.6" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#formatting-results"><i class="fa fa-check"></i><b>19.6</b> Formatting results<span></span></a></li>
<li class="chapter" data-level="19.7" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#using-freqtables"><i class="fa fa-check"></i><b>19.7</b> Using freqtables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html"><i class="fa fa-check"></i><b>20</b> Measures of central tendency<span></span></a>
<ul>
<li class="chapter" data-level="20.1" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mean"><i class="fa fa-check"></i><b>20.1</b> Calculate the mean<span></span></a></li>
<li class="chapter" data-level="20.2" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-median"><i class="fa fa-check"></i><b>20.2</b> Calculate the median<span></span></a></li>
<li class="chapter" data-level="20.3" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mode"><i class="fa fa-check"></i><b>20.3</b> Calculate the mode<span></span></a></li>
<li class="chapter" data-level="20.4" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#compare-mean-median-and-mode"><i class="fa fa-check"></i><b>20.4</b> Compare mean, median, and mode<span></span></a></li>
<li class="chapter" data-level="20.5" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#data-checking"><i class="fa fa-check"></i><b>20.5</b> Data checking<span></span></a></li>
<li class="chapter" data-level="20.6" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#properties-of-mean-median-and-mode"><i class="fa fa-check"></i><b>20.6</b> Properties of mean, median, and mode<span></span></a></li>
<li class="chapter" data-level="20.7" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#na-rm"><i class="fa fa-check"></i><b>20.7</b> Missing data<span></span></a></li>
<li class="chapter" data-level="20.8" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#using-meantables"><i class="fa fa-check"></i><b>20.8</b> Using meantables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html"><i class="fa fa-check"></i><b>21</b> Measures of dispersion<span></span></a>
<ul>
<li class="chapter" data-level="21.1" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html#comparing-distributions"><i class="fa fa-check"></i><b>21.1</b> Comparing distributions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><i class="fa fa-check"></i><b>22</b> Describing the relationship between a continuous outcome and a continuous predictor<span></span></a>
<ul>
<li class="chapter" data-level="22.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#pearson-correlation-coefficient"><i class="fa fa-check"></i><b>22.1</b> Pearson Correlation Coefficient<span></span></a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#calculating-r"><i class="fa fa-check"></i><b>22.1.1</b> Calculating r<span></span></a></li>
<li class="chapter" data-level="22.1.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#correlation-intuition"><i class="fa fa-check"></i><b>22.1.2</b> Correlation intuition<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>23</b> Describing the relationship between a continuous outcome and a categorical predictor<span></span></a>
<ul>
<li class="chapter" data-level="23.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#single-predictor-and-single-outcome"><i class="fa fa-check"></i><b>23.1</b> Single predictor and single outcome<span></span></a></li>
<li class="chapter" data-level="23.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#multiple-predictors"><i class="fa fa-check"></i><b>23.2</b> Multiple predictors<span></span></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>24</b> Describing the relationship between a categorical outcome and a categorical predictor<span></span></a>
<ul>
<li class="chapter" data-level="24.1" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html#comparing-two-variables"><i class="fa fa-check"></i><b>24.1</b> Comparing two variables<span></span></a></li>
</ul></li>
<li class="part"><span><b>V Data Management<span></span></b></span></li>
<li class="chapter" data-level="25" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html"><i class="fa fa-check"></i><b>25</b> Introduction to data management<span></span></a>
<ul>
<li class="chapter" data-level="25.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#multiple-paradigms-for-data-management-in-r"><i class="fa fa-check"></i><b>25.1</b> Multiple paradigms for data management in R<span></span></a></li>
<li class="chapter" data-level="25.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-package"><i class="fa fa-check"></i><b>25.2</b> The dplyr package<span></span></a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-verbs"><i class="fa fa-check"></i><b>25.2.1</b> The dplyr verbs<span></span></a></li>
<li class="chapter" data-level="25.2.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-.data-argument"><i class="fa fa-check"></i><b>25.2.2</b> The .data argument<span></span></a></li>
<li class="chapter" data-level="25.2.3" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-argument"><i class="fa fa-check"></i><b>25.2.3</b> The … argument<span></span></a></li>
<li class="chapter" data-level="25.2.4" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#non-standard-evaluation"><i class="fa fa-check"></i><b>25.2.4</b> Non-standard evaluation<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html"><i class="fa fa-check"></i><b>26</b> Creating and modifying columns<span></span></a>
<ul>
<li class="chapter" data-level="26.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#creating-data-frames"><i class="fa fa-check"></i><b>26.1</b> Creating data frames<span></span></a></li>
<li class="chapter" data-level="26.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#dollar-sign-notation-1"><i class="fa fa-check"></i><b>26.2</b> Dollar sign notation<span></span></a></li>
<li class="chapter" data-level="26.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#bracket-notation-1"><i class="fa fa-check"></i><b>26.3</b> Bracket notation<span></span></a></li>
<li class="chapter" data-level="26.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#modify-individual-values"><i class="fa fa-check"></i><b>26.4</b> Modify individual values<span></span></a></li>
<li class="chapter" data-level="26.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#the-mutate-function"><i class="fa fa-check"></i><b>26.5</b> The mutate() function<span></span></a>
<ul>
<li class="chapter" data-level="26.5.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-a-single-column"><i class="fa fa-check"></i><b>26.5.1</b> Adding or modifying a single column<span></span></a></li>
<li class="chapter" data-level="26.5.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#recycling-rules"><i class="fa fa-check"></i><b>26.5.2</b> Recycling rules<span></span></a></li>
<li class="chapter" data-level="26.5.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#using-existing-variables-in-name-value-pairs"><i class="fa fa-check"></i><b>26.5.3</b> Using existing variables in name-value pairs<span></span></a></li>
<li class="chapter" data-level="26.5.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-multiple-columns"><i class="fa fa-check"></i><b>26.5.4</b> Adding or modifying multiple columns<span></span></a></li>
<li class="chapter" data-level="26.5.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#rowwise-mutations"><i class="fa fa-check"></i><b>26.5.5</b> Rowwise mutations<span></span></a></li>
<li class="chapter" data-level="26.5.6" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#group_by-mutations"><i class="fa fa-check"></i><b>26.5.6</b> Group_by mutations<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html"><i class="fa fa-check"></i><b>27</b> Subsetting data frames<span></span></a>
<ul>
<li class="chapter" data-level="27.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-select-function"><i class="fa fa-check"></i><b>27.1</b> The select() function<span></span></a></li>
<li class="chapter" data-level="27.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-rename-function"><i class="fa fa-check"></i><b>27.2</b> The rename() function<span></span></a></li>
<li class="chapter" data-level="27.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-filter-function"><i class="fa fa-check"></i><b>27.3</b> The filter() function<span></span></a>
<ul>
<li class="chapter" data-level="27.3.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#subgroup-analysis"><i class="fa fa-check"></i><b>27.3.1</b> Subgroup analysis<span></span></a></li>
<li class="chapter" data-level="27.3.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-case-analysis"><i class="fa fa-check"></i><b>27.3.2</b> Complete case analysis<span></span></a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#deduplication"><i class="fa fa-check"></i><b>27.4</b> Deduplication<span></span></a>
<ul>
<li class="chapter" data-level="27.4.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-distinct-function"><i class="fa fa-check"></i><b>27.4.1</b> The distinct() function<span></span></a></li>
<li class="chapter" data-level="27.4.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-duplicate-row-add-tag"><i class="fa fa-check"></i><b>27.4.2</b> Complete duplicate row add tag<span></span></a></li>
<li class="chapter" data-level="27.4.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows"><i class="fa fa-check"></i><b>27.4.3</b> Partial duplicate rows<span></span></a></li>
<li class="chapter" data-level="27.4.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows---add-tag"><i class="fa fa-check"></i><b>27.4.4</b> Partial duplicate rows - add tag<span></span></a></li>
<li class="chapter" data-level="27.4.5" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#count-the-number-of-duplicates"><i class="fa fa-check"></i><b>27.4.5</b> Count the number of duplicates<span></span></a></li>
<li class="chapter" data-level="27.4.6" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#what-to-do-about-duplicates"><i class="fa fa-check"></i><b>27.4.6</b> What to do about duplicates<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="28" data-path="working-with-dates.html"><a href="working-with-dates.html"><i class="fa fa-check"></i><b>28</b> Working with dates<span></span></a>
<ul>
<li class="chapter" data-level="28.1" data-path="working-with-dates.html"><a href="working-with-dates.html#date-vector-types"><i class="fa fa-check"></i><b>28.1</b> Date vector types<span></span></a></li>
<li class="chapter" data-level="28.2" data-path="working-with-dates.html"><a href="working-with-dates.html#dates-under-the-hood"><i class="fa fa-check"></i><b>28.2</b> Dates under the hood<span></span></a></li>
<li class="chapter" data-level="28.3" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-date-times-to-dates"><i class="fa fa-check"></i><b>28.3</b> Coercing date-times to dates<span></span></a></li>
<li class="chapter" data-level="28.4" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-character-strings-to-dates"><i class="fa fa-check"></i><b>28.4</b> Coercing character strings to dates<span></span></a></li>
<li class="chapter" data-level="28.5" data-path="working-with-dates.html"><a href="working-with-dates.html#change-the-appearance-of-dates-with-format"><i class="fa fa-check"></i><b>28.5</b> Change the appearance of dates with format()<span></span></a></li>
<li class="chapter" data-level="28.6" data-path="working-with-dates.html"><a href="working-with-dates.html#some-useful-built-in-dates"><i class="fa fa-check"></i><b>28.6</b> Some useful built-in dates<span></span></a>
<ul>
<li class="chapter" data-level="28.6.1" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date"><i class="fa fa-check"></i><b>28.6.1</b> Today’s date<span></span></a></li>
<li class="chapter" data-level="28.6.2" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date-time"><i class="fa fa-check"></i><b>28.6.2</b> Today’s date-time<span></span></a></li>
<li class="chapter" data-level="28.6.3" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-full-month-names"><i class="fa fa-check"></i><b>28.6.3</b> Character vector of full month names<span></span></a></li>
<li class="chapter" data-level="28.6.4" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-abbreviated-month-names"><i class="fa fa-check"></i><b>28.6.4</b> Character vector of abbreviated month names<span></span></a></li>
<li class="chapter" data-level="28.6.5" data-path="working-with-dates.html"><a href="working-with-dates.html#creating-a-vector-containing-a-sequence-of-dates"><i class="fa fa-check"></i><b>28.6.5</b> Creating a vector containing a sequence of dates<span></span></a></li>
</ul></li>
<li class="chapter" data-level="28.7" data-path="working-with-dates.html"><a href="working-with-dates.html#calculating-date-intervals"><i class="fa fa-check"></i><b>28.7</b> Calculating date intervals<span></span></a>
<ul>
<li class="chapter" data-level="28.7.1" data-path="working-with-dates.html"><a href="working-with-dates.html#calculate-age-as-the-difference-in-time-between-dob-and-today"><i class="fa fa-check"></i><b>28.7.1</b> Calculate age as the difference in time between dob and today<span></span></a></li>
<li class="chapter" data-level="28.7.2" data-path="working-with-dates.html"><a href="working-with-dates.html#rounding-time-intervals"><i class="fa fa-check"></i><b>28.7.2</b> Rounding time intervals<span></span></a></li>
</ul></li>
<li class="chapter" data-level="28.8" data-path="working-with-dates.html"><a href="working-with-dates.html#extracting-out-date-parts"><i class="fa fa-check"></i><b>28.8</b> Extracting out date parts<span></span></a></li>
<li class="chapter" data-level="28.9" data-path="working-with-dates.html"><a href="working-with-dates.html#sorting-dates"><i class="fa fa-check"></i><b>28.9</b> Sorting dates<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html"><i class="fa fa-check"></i><b>29</b> Working with character strings<span></span></a>
<ul>
<li class="chapter" data-level="29.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#coerce-to-lowercase"><i class="fa fa-check"></i><b>29.1</b> Coerce to lowercase<span></span></a>
<ul>
<li class="chapter" data-level="29.1.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#lowercase"><i class="fa fa-check"></i><b>29.1.1</b> Lowercase<span></span></a></li>
<li class="chapter" data-level="29.1.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#upper-case"><i class="fa fa-check"></i><b>29.1.2</b> Upper case<span></span></a></li>
<li class="chapter" data-level="29.1.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#title-case"><i class="fa fa-check"></i><b>29.1.3</b> Title case<span></span></a></li>
<li class="chapter" data-level="29.1.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#sentence-case"><i class="fa fa-check"></i><b>29.1.4</b> Sentence case<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#trim-white-space"><i class="fa fa-check"></i><b>29.2</b> Trim white space<span></span></a></li>
<li class="chapter" data-level="29.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#regular-expressions"><i class="fa fa-check"></i><b>29.3</b> Regular expressions<span></span></a>
<ul>
<li class="chapter" data-level="29.3.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-the-comma"><i class="fa fa-check"></i><b>29.3.1</b> Remove the comma<span></span></a></li>
<li class="chapter" data-level="29.3.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-middle-initial"><i class="fa fa-check"></i><b>29.3.2</b> Remove middle initial<span></span></a></li>
<li class="chapter" data-level="29.3.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-double-spaces"><i class="fa fa-check"></i><b>29.3.3</b> Remove double spaces<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#separate-values-into-component-parts"><i class="fa fa-check"></i><b>29.4</b> Separate values into component parts<span></span></a></li>
<li class="chapter" data-level="29.5" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#dummy-variables"><i class="fa fa-check"></i><b>29.5</b> Dummy variables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="conditional-operations.html"><a href="conditional-operations.html"><i class="fa fa-check"></i><b>30</b> Conditional operations<span></span></a>
<ul>
<li class="chapter" data-level="30.1" data-path="conditional-operations.html"><a href="conditional-operations.html#operands-and-operators"><i class="fa fa-check"></i><b>30.1</b> Operands and operators<span></span></a></li>
<li class="chapter" data-level="30.2" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-multiple-conditions-simultaneously"><i class="fa fa-check"></i><b>30.2</b> Testing multiple conditions simultaneously<span></span></a></li>
<li class="chapter" data-level="30.3" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-a-sequence-of-conditions"><i class="fa fa-check"></i><b>30.3</b> Testing a sequence of conditions<span></span></a></li>
<li class="chapter" data-level="30.4" data-path="conditional-operations.html"><a href="conditional-operations.html#recoding-variables"><i class="fa fa-check"></i><b>30.4</b> Recoding variables<span></span></a></li>
<li class="chapter" data-level="30.5" data-path="conditional-operations.html"><a href="conditional-operations.html#case_when-is-lazy"><i class="fa fa-check"></i><b>30.5</b> case_when() is lazy<span></span></a></li>
<li class="chapter" data-level="30.6" data-path="conditional-operations.html"><a href="conditional-operations.html#recode-missing"><i class="fa fa-check"></i><b>30.6</b> Recode missing<span></span></a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html"><i class="fa fa-check"></i><b>31</b> Working with multiple data frames<span></span></a>
<ul>
<li class="chapter" data-level="31.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-vertically-adding-rows"><i class="fa fa-check"></i><b>31.1</b> Combining data frames vertically: Adding rows<span></span></a>
<ul>
<li class="chapter" data-level="31.1.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-more-than-2-data-frames"><i class="fa fa-check"></i><b>31.1.1</b> Combining more than 2 data frames<span></span></a></li>
<li class="chapter" data-level="31.1.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#adding-rows-with-differing-columns"><i class="fa fa-check"></i><b>31.1.2</b> Adding rows with differing columns<span></span></a></li>
<li class="chapter" data-level="31.1.3" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-positions"><i class="fa fa-check"></i><b>31.1.3</b> Differing column positions<span></span></a></li>
<li class="chapter" data-level="31.1.4" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-names"><i class="fa fa-check"></i><b>31.1.4</b> Differing column names<span></span></a></li>
</ul></li>
<li class="chapter" data-level="31.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-adding-columns"><i class="fa fa-check"></i><b>31.2</b> Combining data frames horizontally: Adding columns<span></span></a>
<ul>
<li class="chapter" data-level="31.2.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-position"><i class="fa fa-check"></i><b>31.2.1</b> Combining data frames horizontally by position<span></span></a></li>
<li class="chapter" data-level="31.2.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-key-values"><i class="fa fa-check"></i><b>31.2.2</b> Combining data frames horizontally by key values<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="32" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html"><i class="fa fa-check"></i><b>32</b> Restructuring data frames<span></span></a>
<ul>
<li class="chapter" data-level="32.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-tidyr-package"><i class="fa fa-check"></i><b>32.1</b> The tidyr package<span></span></a></li>
<li class="chapter" data-level="32.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-longer"><i class="fa fa-check"></i><b>32.2</b> Pivoting longer<span></span></a>
<ul>
<li class="chapter" data-level="32.2.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_to-argument"><i class="fa fa-check"></i><b>32.2.1</b> The names_to argument<span></span></a></li>
<li class="chapter" data-level="32.2.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_prefix-argument"><i class="fa fa-check"></i><b>32.2.2</b> The names_prefix argument<span></span></a></li>
<li class="chapter" data-level="32.2.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-values_to-argument"><i class="fa fa-check"></i><b>32.2.3</b> The values_to argument<span></span></a></li>
<li class="chapter" data-level="32.2.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_transform-argument"><i class="fa fa-check"></i><b>32.2.4</b> The names_transform argument<span></span></a></li>
<li class="chapter" data-level="32.2.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-multiple-sets-of-columns"><i class="fa fa-check"></i><b>32.2.5</b> Pivoting multiple sets of columns<span></span></a></li>
<li class="chapter" data-level="32.2.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_sep-argument"><i class="fa fa-check"></i><b>32.2.6</b> The names_sep argument<span></span></a></li>
<li class="chapter" data-level="32.2.7" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-.value-special-value"><i class="fa fa-check"></i><b>32.2.7</b> The .value special value<span></span></a></li>
<li class="chapter" data-level="32.2.8" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-period"><i class="fa fa-check"></i><b>32.2.8</b> Why person-period?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-wider"><i class="fa fa-check"></i><b>32.3</b> Pivoting wider<span></span></a>
<ul>
<li class="chapter" data-level="32.3.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-level"><i class="fa fa-check"></i><b>32.3.1</b> Why person-level?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics"><i class="fa fa-check"></i><b>32.4</b> Pivoting summary statistics<span></span></a>
<ul>
<li class="chapter" data-level="32.4.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-wide-to-long"><i class="fa fa-check"></i><b>32.4.1</b> Pivoting summary statistics wide to long<span></span></a></li>
<li class="chapter" data-level="32.4.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-long-to-wide"><i class="fa fa-check"></i><b>32.4.2</b> Pivoting summary statistics long to wide<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#tidy-data"><i class="fa fa-check"></i><b>32.5</b> Tidy data<span></span></a>
<ul>
<li class="chapter" data-level="32.5.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-variable-must-have-its-own-column"><i class="fa fa-check"></i><b>32.5.1</b> Each variable must have its own column<span></span></a></li>
<li class="chapter" data-level="32.5.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-observation-must-have-its-own-row"><i class="fa fa-check"></i><b>32.5.2</b> Each observation must have its own row<span></span></a></li>
<li class="chapter" data-level="32.5.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-value-must-have-its-own-cell"><i class="fa fa-check"></i><b>32.5.3</b> Each value must have its own cell<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-complete-function"><i class="fa fa-check"></i><b>32.6</b> The complete() function<span></span></a></li>
</ul></li>
<li class="part"><span><b>VI Repeated Operations<span></span></b></span></li>
<li class="chapter" data-level="33" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html"><i class="fa fa-check"></i><b>33</b> Introduction to repeated operations<span></span></a>
<ul>
<li class="chapter" data-level="33.1" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#multiple-methods-for-repeated-operations-in-r"><i class="fa fa-check"></i><b>33.1</b> Multiple methods for repeated operations in R<span></span></a></li>
<li class="chapter" data-level="33.2" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#tidy-evaluation"><i class="fa fa-check"></i><b>33.2</b> Tidy evaluation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>34</b> Writing functions<span></span></a>
<ul>
<li class="chapter" data-level="34.1" data-path="writing-functions.html"><a href="writing-functions.html#when-to-write-functions"><i class="fa fa-check"></i><b>34.1</b> When to write functions<span></span></a></li>
<li class="chapter" data-level="34.2" data-path="writing-functions.html"><a href="writing-functions.html#how-to-write-functions"><i class="fa fa-check"></i><b>34.2</b> How to write functions<span></span></a>
<ul>
<li class="chapter" data-level="34.2.1" data-path="writing-functions.html"><a href="writing-functions.html#the-function-function"><i class="fa fa-check"></i><b>34.2.1</b> The function() function<span></span></a></li>
<li class="chapter" data-level="34.2.2" data-path="writing-functions.html"><a href="writing-functions.html#the-function-writing-process"><i class="fa fa-check"></i><b>34.2.2</b> The function writing process<span></span></a></li>
</ul></li>
<li class="chapter" data-level="34.3" data-path="writing-functions.html"><a href="writing-functions.html#giving-your-function-arguments-default-values"><i class="fa fa-check"></i><b>34.3</b> Giving your function arguments default values<span></span></a></li>
<li class="chapter" data-level="34.4" data-path="writing-functions.html"><a href="writing-functions.html#the-values-your-functions-return"><i class="fa fa-check"></i><b>34.4</b> The values your functions return<span></span></a></li>
<li class="chapter" data-level="34.5" data-path="writing-functions.html"><a href="writing-functions.html#lexical-scoping-and-functions"><i class="fa fa-check"></i><b>34.5</b> Lexical scoping and functions<span></span></a></li>
<li class="chapter" data-level="34.6" data-path="writing-functions.html"><a href="writing-functions.html#tidy-evaluation-1"><i class="fa fa-check"></i><b>34.6</b> Tidy evaluation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html"><i class="fa fa-check"></i><b>35</b> Column-wise operations in dplyr<span></span></a>
<ul>
<li class="chapter" data-level="35.1" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#the-across-function"><i class="fa fa-check"></i><b>35.1</b> The across() function<span></span></a></li>
<li class="chapter" data-level="35.2" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-mutate"><i class="fa fa-check"></i><b>35.2</b> Across with mutate<span></span></a></li>
<li class="chapter" data-level="35.3" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-summarise"><i class="fa fa-check"></i><b>35.3</b> Across with summarise<span></span></a></li>
<li class="chapter" data-level="35.4" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-filter"><i class="fa fa-check"></i><b>35.4</b> Across with filter<span></span></a></li>
<li class="chapter" data-level="35.5" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#summary-2"><i class="fa fa-check"></i><b>35.5</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="writing-for-loops.html"><a href="writing-for-loops.html"><i class="fa fa-check"></i><b>36</b> Writing for loops<span></span></a>
<ul>
<li class="chapter" data-level="36.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#how-to-write-for-loops"><i class="fa fa-check"></i><b>36.1</b> How to write for loops<span></span></a>
<ul>
<li class="chapter" data-level="36.1.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-loop-body"><i class="fa fa-check"></i><b>36.1.1</b> The for loop body<span></span></a></li>
<li class="chapter" data-level="36.1.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-function"><i class="fa fa-check"></i><b>36.1.2</b> The for() function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="36.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-transfer"><i class="fa fa-check"></i><b>36.2</b> Using for loops for data transfer<span></span></a></li>
<li class="chapter" data-level="36.3" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-management"><i class="fa fa-check"></i><b>36.3</b> Using for loops for data management<span></span></a></li>
<li class="chapter" data-level="36.4" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-analysis"><i class="fa fa-check"></i><b>36.4</b> Using for loops for analysis<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html"><i class="fa fa-check"></i><b>37</b> Using the purrr package<span></span></a>
<ul>
<li class="chapter" data-level="37.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#comparing-for-loops-and-the-map-functions"><i class="fa fa-check"></i><b>37.1</b> Comparing for loops and the map functions<span></span></a></li>
<li class="chapter" data-level="37.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-transfer"><i class="fa fa-check"></i><b>37.2</b> Using purrr for data transfer<span></span></a>
<ul>
<li class="chapter" data-level="37.2.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-importing-multiple-sheets-from-an-excel-workbook"><i class="fa fa-check"></i><b>37.2.1</b> Example 1: Importing multiple sheets from an Excel workbook<span></span></a></li>
<li class="chapter" data-level="37.2.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-walk-instead-of-map"><i class="fa fa-check"></i><b>37.2.2</b> Why walk instead of map?<span></span></a></li>
<li class="chapter" data-level="37.2.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-we-didnt-assign-the-return-value-of-walk-to-an-object"><i class="fa fa-check"></i><b>37.2.3</b> why we didn’t assign the return value of <code>walk()</code> to an object?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-management"><i class="fa fa-check"></i><b>37.3</b> Using purrr for data management<span></span></a>
<ul>
<li class="chapter" data-level="37.3.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-adding-na-at-multiple-positions"><i class="fa fa-check"></i><b>37.3.1</b> Example 1: Adding NA at multiple positions<span></span></a></li>
<li class="chapter" data-level="37.3.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2.-detecting-matching-values-by-position"><i class="fa fa-check"></i><b>37.3.2</b> Example 2. Detecting matching values by position<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37.4" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-analysis"><i class="fa fa-check"></i><b>37.4</b> Using purrr for analysis<span></span></a>
<ul>
<li class="chapter" data-level="37.4.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-continuous-statistics"><i class="fa fa-check"></i><b>37.4.1</b> Example 1: Continuous statistics<span></span></a></li>
<li class="chapter" data-level="37.4.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2-categorical-statistics"><i class="fa fa-check"></i><b>37.4.2</b> Example 2: Categorical statistics<span></span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Collaboration<span></span></b></span></li>
<li class="chapter" data-level="38" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html"><i class="fa fa-check"></i><b>38</b> Introduction to git and GitHub<span></span></a>
<ul>
<li class="chapter" data-level="38.1" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#versioning"><i class="fa fa-check"></i><b>38.1</b> Versioning<span></span></a></li>
<li class="chapter" data-level="38.2" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#preservation"><i class="fa fa-check"></i><b>38.2</b> Preservation<span></span></a></li>
<li class="chapter" data-level="38.3" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#reproducibility"><i class="fa fa-check"></i><b>38.3</b> Reproducibility<span></span></a></li>
<li class="chapter" data-level="38.4" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#collaboration"><i class="fa fa-check"></i><b>38.4</b> Collaboration<span></span></a></li>
<li class="chapter" data-level="38.5" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#summary-3"><i class="fa fa-check"></i><b>38.5</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="using-git-and-github.html"><a href="using-git-and-github.html"><i class="fa fa-check"></i><b>39</b> Using git and GitHub<span></span></a>
<ul>
<li class="chapter" data-level="39.1" data-path="using-git-and-github.html"><a href="using-git-and-github.html#install-git"><i class="fa fa-check"></i><b>39.1</b> Install git<span></span></a></li>
<li class="chapter" data-level="39.2" data-path="using-git-and-github.html"><a href="using-git-and-github.html#sign-up-for-a-github-account"><i class="fa fa-check"></i><b>39.2</b> Sign up for a GitHub account<span></span></a></li>
<li class="chapter" data-level="39.3" data-path="using-git-and-github.html"><a href="using-git-and-github.html#install-gitkraken"><i class="fa fa-check"></i><b>39.3</b> Install GitKraken<span></span></a></li>
<li class="chapter" data-level="39.4" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-1-contribute-to-r4epi"><i class="fa fa-check"></i><b>39.4</b> Example 1: Contribute to R4Epi<span></span></a></li>
<li class="chapter" data-level="39.5" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-2-create-a-repository-for-a-research-project"><i class="fa fa-check"></i><b>39.5</b> Example 2: Create a repository for a research project<span></span></a>
<ul>
<li><a href="using-git-and-github.html#step-1-create-a-repository-on-github">Step 1: Create a repository on GitHub<span></span></a></li>
<li><a href="using-git-and-github.html#step-2-clone-the-repository-to-your-computer">Step 2: Clone the repository to your computer<span></span></a></li>
<li><a href="using-git-and-github.html#step-3-add-an-r-project-file-to-the-repository">Step 3: Add an R project file to the repository<span></span></a></li>
<li><a href="using-git-and-github.html#step-4-update-and-commit-gitignore">Step 4: Update and commit gitignore<span></span></a></li>
<li><a href="using-git-and-github.html#step-5-keep-adding-and-committing-files">Step 5: Keep adding and committing files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39.6" data-path="using-git-and-github.html"><a href="using-git-and-github.html#committing-and-pushing"><i class="fa fa-check"></i><b>39.6</b> Committing and pushing<span></span></a></li>
<li class="chapter" data-level="39.7" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-3-contribute-to-a-research-project"><i class="fa fa-check"></i><b>39.7</b> Example 3: Contribute to a research project<span></span></a>
<ul>
<li class="chapter" data-level="39.7.1" data-path="using-git-and-github.html"><a href="using-git-and-github.html#forking-a-repository"><i class="fa fa-check"></i><b>39.7.1</b> Forking a repository<span></span></a></li>
<li class="chapter" data-level="39.7.2" data-path="using-git-and-github.html"><a href="using-git-and-github.html#creating-a-pull-request"><i class="fa fa-check"></i><b>39.7.2</b> Creating a pull request<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39.8" data-path="using-git-and-github.html"><a href="using-git-and-github.html#summary-4"><i class="fa fa-check"></i><b>39.8</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>VIII Presenting Results<span></span></b></span></li>
<li class="chapter" data-level="40" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html"><i class="fa fa-check"></i><b>40</b> Creating tables with R and Microsoft Word<span></span></a>
<ul>
<li class="chapter" data-level="40.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-1"><i class="fa fa-check"></i><b>40.1</b> Table 1<span></span></a></li>
<li class="chapter" data-level="40.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#opioid-drug-use"><i class="fa fa-check"></i><b>40.2</b> Opioid drug use<span></span></a></li>
<li class="chapter" data-level="40.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-columns"><i class="fa fa-check"></i><b>40.3</b> Table columns<span></span></a></li>
<li class="chapter" data-level="40.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-rows"><i class="fa fa-check"></i><b>40.4</b> Table rows<span></span></a></li>
<li class="chapter" data-level="40.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#make-the-table-skeleton"><i class="fa fa-check"></i><b>40.5</b> Make the table skeleton<span></span></a></li>
<li class="chapter" data-level="40.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-column-headers"><i class="fa fa-check"></i><b>40.6</b> Fill in column headers<span></span></a>
<ul>
<li class="chapter" data-level="40.6.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#group-sample-sizes"><i class="fa fa-check"></i><b>40.6.1</b> Group sample sizes<span></span></a></li>
<li class="chapter" data-level="40.6.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-column-headers"><i class="fa fa-check"></i><b>40.6.2</b> Formatting column headers<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.7" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-row-headers"><i class="fa fa-check"></i><b>40.7</b> Fill in row headers<span></span></a>
<ul>
<li class="chapter" data-level="40.7.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#label-statistics"><i class="fa fa-check"></i><b>40.7.1</b> Label statistics<span></span></a></li>
<li class="chapter" data-level="40.7.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-row-headers"><i class="fa fa-check"></i><b>40.7.2</b> Formatting row headers<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.8" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-data-values"><i class="fa fa-check"></i><b>40.8</b> Fill in data values<span></span></a>
<ul>
<li class="chapter" data-level="40.8.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#manually-type-values"><i class="fa fa-check"></i><b>40.8.1</b> Manually type values<span></span></a></li>
<li class="chapter" data-level="40.8.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#copy-and-paste-values"><i class="fa fa-check"></i><b>40.8.2</b> Copy and paste values<span></span></a></li>
<li class="chapter" data-level="40.8.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#knit-a-word-document"><i class="fa fa-check"></i><b>40.8.3</b> Knit a Word document<span></span></a></li>
<li class="chapter" data-level="40.8.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#flextable-and-officer"><i class="fa fa-check"></i><b>40.8.4</b> flextable and officer<span></span></a></li>
<li class="chapter" data-level="40.8.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#significant-digits"><i class="fa fa-check"></i><b>40.8.5</b> Significant digits<span></span></a></li>
<li class="chapter" data-level="40.8.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-data-values"><i class="fa fa-check"></i><b>40.8.6</b> Formatting data values<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.9" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-title"><i class="fa fa-check"></i><b>40.9</b> Fill in title<span></span></a></li>
<li class="chapter" data-level="40.10" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-footnotes"><i class="fa fa-check"></i><b>40.10</b> Fill in footnotes<span></span></a>
<ul>
<li class="chapter" data-level="40.10.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-footnotes"><i class="fa fa-check"></i><b>40.10.1</b> Formatting footnotes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.11" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#final-formatting"><i class="fa fa-check"></i><b>40.11</b> Final formatting<span></span></a>
<ul>
<li class="chapter" data-level="40.11.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#adjust-column-widths"><i class="fa fa-check"></i><b>40.11.1</b> Adjust column widths<span></span></a></li>
<li class="chapter" data-level="40.11.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#merge-cells"><i class="fa fa-check"></i><b>40.11.2</b> Merge cells<span></span></a></li>
<li class="chapter" data-level="40.11.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#remove-cell-borders"><i class="fa fa-check"></i><b>40.11.3</b> Remove cell borders<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.12" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#summary-5"><i class="fa fa-check"></i><b>40.12</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>IX Introduction to Epidemiology<span></span></b></span></li>
<li class="chapter" data-level="41" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html"><i class="fa fa-check"></i><b>41</b> Introduction to Epidemiology<span></span></a>
<ul>
<li class="chapter" data-level="41.1" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#measurement"><i class="fa fa-check"></i><b>41.1</b> Measurement<span></span></a></li>
<li class="chapter" data-level="41.2" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#uncertainty"><i class="fa fa-check"></i><b>41.2</b> Uncertainty<span></span></a></li>
<li class="chapter" data-level="41.3" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#summary-6"><i class="fa fa-check"></i><b>41.3</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>X Appendix<span></span></b></span></li>
<li><a href="appendix-a-glossary.html#appendix-a-glossary">Appendix A: Glossary<span></span></a></li>
<li><a href="appendix-alternative-table-formats.html#appendix-alternative-table-formats">Appendix: Alternative table formats<span></span></a>
<ul>
<li class="chapter" data-level="41.4" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html"><i class="fa fa-check"></i><b>41.4</b> Smaller data frame<span></span></a>
<ul>
<li class="chapter" data-level="41.4.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen"><i class="fa fa-check"></i><b>41.4.1</b> Default method for printing the data frame to the screen<span></span></a></li>
<li class="chapter" data-level="41.4.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function"><i class="fa fa-check"></i><b>41.4.2</b> Using the kable function<span></span></a></li>
<li class="chapter" data-level="41.4.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function"><i class="fa fa-check"></i><b>41.4.3</b> Using the datatable function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="41.5" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#larger-data-frame"><i class="fa fa-check"></i><b>41.5</b> Larger data frame<span></span></a>
<ul>
<li class="chapter" data-level="41.5.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen-1"><i class="fa fa-check"></i><b>41.5.1</b> Default method for printing the data frame to the screen<span></span></a></li>
<li class="chapter" data-level="41.5.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function-1"><i class="fa fa-check"></i><b>41.5.2</b> Using the kable function<span></span></a></li>
<li class="chapter" data-level="41.5.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function-1"><i class="fa fa-check"></i><b>41.5.3</b> Using the datatable function<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Epidemiology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-multiple-data-frames" class="section level1 hasAnchor" number="31">
<h1><span class="header-section-number">31</span> Working with multiple data frames<a href="working-with-multiple-data-frames.html#working-with-multiple-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!--
Stacking data frames vertically
Stacking data frames horizontally
Introduction to relational data
Joining data frames deterministically 
Joining data frames probabilistically 
Add link to cheat sheet
-->
<p>Up to this point, the data we’ve needed has always been stored in a single data frame. However, that won’t always be the case. At times you may need to combine data from multiple agencies in order to complete your analysis.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/agencies.png" width="900" /></p>
<p>Additionally, large studies often gather data at multiple sites.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/sites.png" width="900" /></p>
<p>Or, data is sometimes gathered over long periods of time. When this happens, it is not uncommon for observations across the study sites or times to be stored as separate data sets.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/time.png" width="900" /></p>
<p>Another common scenario in which you end up with multiple data sets for the same study is when researchers use different data sets to record the results of different survey instruments or groups of similar instruments.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/instruments.png" width="900" /></p>
<p>In any of these cases, you may need to combine data from across data sets in order to complete your analysis.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/datasets.png" width="900" /></p>
<p>This combining of data comes in two basic forms: combining vertically and combining horizontally. First we’ll learn about combining vertically, or adding rows. Later, we’ll learn about combining horizontally, or adding columns.</p>
<p>Below we have two separate data frames - data frame one and data frame two. In this case both data frames contain the exact same variables: Var1, Var2, and Var3. However, they aren’t identical because they contain different observations.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/two_data_sets1.png" width="900" /></p>
<p>Now, you want to combine these two data frames and end up with one data frame that includes the observations from data frame two listed directly below the observations from data frame one. This is a situation where we want to combine data frames vertically.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/two_data_sets2.png" width="900" /></p>
<p>When combining data frames vertically, one of the most important questions to ask is, “do the data frames have variables in common?” Just by examining data frame one and data frame two, you can see that the variables have the same names. How can you check to make sure that the variables also contain the same type of data? Well, you can use the <code>str()</code> or <code>glimpse()</code> functions to compare the details of the columns in the two data frames.</p>
<p>Sometimes, you might find that columns that have different names across data frames contain the same data. For example, suppose that data frame one has a variable named ID and data frame two has a variable named subject ID. In this situation you might want R to combine these two variables when you combine data frames.</p>
<p>On the other hand, you may find that variables that have the same name across data frames, actually contain different data. For example, both data frames may contain the variable <code>date</code>. But, one <code>date</code> variable might store birth date and the other might store date of admission. You would not want to combine these two variables.</p>
<p>As you may have guessed, when combining data frames vertically, it’s easiest to combine data frames that have identical variables. However, you will also learn how to combine data frames that have different variables.</p>
<div id="combining-data-frames-vertically-adding-rows" class="section level2 hasAnchor" number="31.1">
<h2><span class="header-section-number">31.1</span> Combining data frames vertically: Adding rows<a href="working-with-multiple-data-frames.html#combining-data-frames-vertically-adding-rows" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Suppose you are working on a multisite clinical trial recruiting participants over multiple years. You have a data frame named Trial, that stores the number of participants recruited each year, as well as the number of participants who experienced the outcome of interest. Another data frame named Trial_2020 was just sent to you with the recruitment numbers for the year 2020.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/trial.png" width="900" /></p>
<p>You want to add the observations about the participants recruited in 2020 to the master data frame so that it contains the information about all years. To do this, you bind the rows in the <code>trial_2020</code> data frame to the <code>trial</code> data frame.</p>
<p>Let’s go ahead and load <code>dplyr</code>:</p>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="working-with-multiple-data-frames.html#cb800-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<p>And simulate our data frames:</p>
<div class="sourceCode" id="cb801"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb801-1"><a href="working-with-multiple-data-frames.html#cb801-1" aria-hidden="true" tabindex="-1"></a>trial <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb801-2"><a href="working-with-multiple-data-frames.html#cb801-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">year    =</span> <span class="fu">c</span>(<span class="dv">2016</span>, <span class="dv">2017</span>, <span class="dv">2018</span>, <span class="dv">2019</span>),</span>
<span id="cb801-3"><a href="working-with-multiple-data-frames.html#cb801-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">n       =</span> <span class="fu">c</span>(<span class="dv">501</span>, <span class="dv">499</span>, <span class="dv">498</span>, <span class="dv">502</span>),</span>
<span id="cb801-4"><a href="working-with-multiple-data-frames.html#cb801-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="fu">c</span>(<span class="dv">51</span>, <span class="dv">52</span>, <span class="dv">49</span>, <span class="dv">50</span>) </span>
<span id="cb801-5"><a href="working-with-multiple-data-frames.html#cb801-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb801-6"><a href="working-with-multiple-data-frames.html#cb801-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##    year     n outcome
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1  2016   501      51
## 2  2017   499      52
## 3  2018   498      49
## 4  2019   502      50</code></pre>
<div class="sourceCode" id="cb803"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb803-1"><a href="working-with-multiple-data-frames.html#cb803-1" aria-hidden="true" tabindex="-1"></a>trial_2020 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb803-2"><a href="working-with-multiple-data-frames.html#cb803-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">year    =</span> <span class="dv">2020</span>,</span>
<span id="cb803-3"><a href="working-with-multiple-data-frames.html#cb803-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">n       =</span> <span class="dv">500</span>,</span>
<span id="cb803-4"><a href="working-with-multiple-data-frames.html#cb803-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome =</span> <span class="dv">48</span> </span>
<span id="cb803-5"><a href="working-with-multiple-data-frames.html#cb803-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb803-6"><a href="working-with-multiple-data-frames.html#cb803-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##    year     n outcome
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1  2020   500      48</code></pre>
<p>We can see above that column names and types in both data frames are identical. In this case, we can easily bind them together vertically with <code>dplyr</code>’s <code>bind_rows()</code> function:</p>
<div class="sourceCode" id="cb805"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb805-1"><a href="working-with-multiple-data-frames.html#cb805-1" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span> </span>
<span id="cb805-2"><a href="working-with-multiple-data-frames.html#cb805-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(trial_2020)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##    year     n outcome
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1  2016   501      51
## 2  2017   499      52
## 3  2018   498      49
## 4  2019   502      50
## 5  2020   500      48</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>bind_rows()</code> function to vertically stack, or bind, the rows in <code>trial_2020</code> to the rows in <code>trials</code>.</p></li>
<li><p>You can type <code>?bind_rows</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>bind_rows()</code> function is the <code>...</code> argument. Typically, we will pass one or more data frames that we want to combine to the <code>...</code> argument.</p></li>
</ul>
<div id="combining-more-than-2-data-frames" class="section level3 hasAnchor" number="31.1.1">
<h3><span class="header-section-number">31.1.1</span> Combining more than 2 data frames<a href="working-with-multiple-data-frames.html#combining-more-than-2-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>What if we want to vertically combine more than two data frames? This isn’t a problem. Thankfully, <code>bind_rows()</code> lets us pass as many data frames as we want to the <code>...</code> argument. For example:</p>
<div class="sourceCode" id="cb807"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb807-1"><a href="working-with-multiple-data-frames.html#cb807-1" aria-hidden="true" tabindex="-1"></a>trial_2021 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb807-2"><a href="working-with-multiple-data-frames.html#cb807-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">year      =</span> <span class="dv">2021</span>,</span>
<span id="cb807-3"><a href="working-with-multiple-data-frames.html#cb807-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">n         =</span> <span class="dv">598</span>,</span>
<span id="cb807-4"><a href="working-with-multiple-data-frames.html#cb807-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome   =</span> <span class="dv">57</span></span>
<span id="cb807-5"><a href="working-with-multiple-data-frames.html#cb807-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb807-6"><a href="working-with-multiple-data-frames.html#cb807-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##    year     n outcome
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1  2021   598      57</code></pre>
<div class="sourceCode" id="cb809"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb809-1"><a href="working-with-multiple-data-frames.html#cb809-1" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span> </span>
<span id="cb809-2"><a href="working-with-multiple-data-frames.html#cb809-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(trial_2020, trial_2021)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##    year     n outcome
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1  2016   501      51
## 2  2017   499      52
## 3  2018   498      49
## 4  2019   502      50
## 5  2020   500      48
## 6  2021   598      57</code></pre>
</div>
<div id="adding-rows-with-differing-columns" class="section level3 hasAnchor" number="31.1.2">
<h3><span class="header-section-number">31.1.2</span> Adding rows with differing columns<a href="working-with-multiple-data-frames.html#adding-rows-with-differing-columns" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>What happens when the data frames we want to combine don’t have identical sets of columns? For example, let’s say that we started collecting data on adverse events for the first time in 2020. In this case, <code>trials_2020</code> would contain a column that <code>trials</code> doesn’t contain. Can we still row bind our two data frames? Let’s see:</p>
<div class="sourceCode" id="cb811"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb811-1"><a href="working-with-multiple-data-frames.html#cb811-1" aria-hidden="true" tabindex="-1"></a>trial_2020 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb811-2"><a href="working-with-multiple-data-frames.html#cb811-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">year      =</span> <span class="dv">2020</span>,</span>
<span id="cb811-3"><a href="working-with-multiple-data-frames.html#cb811-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">n         =</span> <span class="dv">500</span>,</span>
<span id="cb811-4"><a href="working-with-multiple-data-frames.html#cb811-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome   =</span> <span class="dv">48</span>,</span>
<span id="cb811-5"><a href="working-with-multiple-data-frames.html#cb811-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">adv_event =</span> <span class="dv">3</span> <span class="co"># Here is the new column</span></span>
<span id="cb811-6"><a href="working-with-multiple-data-frames.html#cb811-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb811-7"><a href="working-with-multiple-data-frames.html#cb811-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##    year     n outcome adv_event
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1  2020   500      48         3</code></pre>
<div class="sourceCode" id="cb813"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb813-1"><a href="working-with-multiple-data-frames.html#cb813-1" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span> </span>
<span id="cb813-2"><a href="working-with-multiple-data-frames.html#cb813-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(trial_2020)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##    year     n outcome adv_event
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1  2016   501      51        NA
## 2  2017   499      52        NA
## 3  2018   498      49        NA
## 4  2019   502      50        NA
## 5  2020   500      48         3</code></pre>
<p>We sure can! R just sets the value of <code>adv_event</code> to <code>NA</code> in the rows that came from the <code>trial</code> data frame.</p>
</div>
<div id="differing-column-positions" class="section level3 hasAnchor" number="31.1.3">
<h3><span class="header-section-number">31.1.3</span> Differing column positions<a href="working-with-multiple-data-frames.html#differing-column-positions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Next, let’s say that the person doing data entry accidently put the columns in a different order in 2020. Is <code>bind_rows()</code> able to figure out which columns go together?</p>
<div class="sourceCode" id="cb815"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb815-1"><a href="working-with-multiple-data-frames.html#cb815-1" aria-hidden="true" tabindex="-1"></a>trial_2020 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb815-2"><a href="working-with-multiple-data-frames.html#cb815-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">year      =</span> <span class="dv">2020</span>,</span>
<span id="cb815-3"><a href="working-with-multiple-data-frames.html#cb815-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">n         =</span> <span class="dv">500</span>,</span>
<span id="cb815-4"><a href="working-with-multiple-data-frames.html#cb815-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">adv_event =</span> <span class="dv">3</span>, <span class="co"># This was previously the fourth column</span></span>
<span id="cb815-5"><a href="working-with-multiple-data-frames.html#cb815-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome   =</span> <span class="dv">48</span> <span class="co"># This is the thrid column in trial</span></span>
<span id="cb815-6"><a href="working-with-multiple-data-frames.html#cb815-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb815-7"><a href="working-with-multiple-data-frames.html#cb815-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##    year     n adv_event outcome
##   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1  2020   500         3      48</code></pre>
<div class="sourceCode" id="cb817"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb817-1"><a href="working-with-multiple-data-frames.html#cb817-1" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span> </span>
<span id="cb817-2"><a href="working-with-multiple-data-frames.html#cb817-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(trial_2020)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##    year     n outcome adv_event
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1  2016   501      51        NA
## 2  2017   499      52        NA
## 3  2018   498      49        NA
## 4  2019   502      50        NA
## 5  2020   500      48         3</code></pre>
<p>Yes! The <code>bind_rows()</code> function binds the data frames together based on column names. So, having our columns in a different order in the two data frames isn’t a problem. But, what happens when we have different column names?</p>
</div>
<div id="differing-column-names" class="section level3 hasAnchor" number="31.1.4">
<h3><span class="header-section-number">31.1.4</span> Differing column names<a href="working-with-multiple-data-frames.html#differing-column-names" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As a final wrinkle, let’s say that the person doing data entry started using different column names in 2020 as well. For example, below, the <code>n</code> column is now named <code>count</code> and the <code>outcome</code> column is now named <code>outcomes</code>. Will <code>bind_rows()</code> still be able to vertically combine these data frames?</p>
<div class="sourceCode" id="cb819"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb819-1"><a href="working-with-multiple-data-frames.html#cb819-1" aria-hidden="true" tabindex="-1"></a>trial_2020 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb819-2"><a href="working-with-multiple-data-frames.html#cb819-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">year      =</span> <span class="dv">2020</span>,</span>
<span id="cb819-3"><a href="working-with-multiple-data-frames.html#cb819-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">count     =</span> <span class="dv">500</span>,</span>
<span id="cb819-4"><a href="working-with-multiple-data-frames.html#cb819-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">adv_event =</span> <span class="dv">3</span>,</span>
<span id="cb819-5"><a href="working-with-multiple-data-frames.html#cb819-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcomes  =</span> <span class="dv">48</span></span>
<span id="cb819-6"><a href="working-with-multiple-data-frames.html#cb819-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb819-7"><a href="working-with-multiple-data-frames.html#cb819-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##    year count adv_event outcomes
##   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1  2020   500         3       48</code></pre>
<div class="sourceCode" id="cb821"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb821-1"><a href="working-with-multiple-data-frames.html#cb821-1" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span> </span>
<span id="cb821-2"><a href="working-with-multiple-data-frames.html#cb821-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(trial_2020)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 6
##    year     n outcome count adv_event outcomes
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1  2016   501      51    NA        NA       NA
## 2  2017   499      52    NA        NA       NA
## 3  2018   498      49    NA        NA       NA
## 4  2019   502      50    NA        NA       NA
## 5  2020    NA      NA   500         3       48</code></pre>
<p>In this case, <code>bind_rows()</code> plays it safe and doesn’t make any assumptions about whether columns with different names belong together or not. However, we only need to rename the columns in one data frame or the other to fix this problem. We could do this in separate steps like this:</p>
<div class="sourceCode" id="cb823"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb823-1"><a href="working-with-multiple-data-frames.html#cb823-1" aria-hidden="true" tabindex="-1"></a>trial_2020_rename <span class="ot">&lt;-</span> trial_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb823-2"><a href="working-with-multiple-data-frames.html#cb823-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb823-3"><a href="working-with-multiple-data-frames.html#cb823-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> count,</span>
<span id="cb823-4"><a href="working-with-multiple-data-frames.html#cb823-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">outcome =</span> outcomes</span>
<span id="cb823-5"><a href="working-with-multiple-data-frames.html#cb823-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb823-6"><a href="working-with-multiple-data-frames.html#cb823-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb823-7"><a href="working-with-multiple-data-frames.html#cb823-7" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span> </span>
<span id="cb823-8"><a href="working-with-multiple-data-frames.html#cb823-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(trial_2020_rename)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##    year     n outcome adv_event
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1  2016   501      51        NA
## 2  2017   499      52        NA
## 3  2018   498      49        NA
## 4  2019   502      50        NA
## 5  2020   500      48         3</code></pre>
<p>Or, we could rename and bind in a single step by nesting functions like this:</p>
<div class="sourceCode" id="cb825"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb825-1"><a href="working-with-multiple-data-frames.html#cb825-1" aria-hidden="true" tabindex="-1"></a>trial <span class="sc">%&gt;%</span> </span>
<span id="cb825-2"><a href="working-with-multiple-data-frames.html#cb825-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb825-3"><a href="working-with-multiple-data-frames.html#cb825-3" aria-hidden="true" tabindex="-1"></a>    trial_2020 <span class="sc">%&gt;%</span> </span>
<span id="cb825-4"><a href="working-with-multiple-data-frames.html#cb825-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rename</span>(</span>
<span id="cb825-5"><a href="working-with-multiple-data-frames.html#cb825-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">n =</span> count,</span>
<span id="cb825-6"><a href="working-with-multiple-data-frames.html#cb825-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">outcome =</span> outcomes</span>
<span id="cb825-7"><a href="working-with-multiple-data-frames.html#cb825-7" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb825-8"><a href="working-with-multiple-data-frames.html#cb825-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##    year     n outcome adv_event
##   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1  2016   501      51        NA
## 2  2017   499      52        NA
## 3  2018   498      49        NA
## 4  2019   502      50        NA
## 5  2020   500      48         3</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We <em>nested</em> the code that we previously used to create the <code>trial_2020_rename</code> data frame inside of the <code>bind_rows()</code> function instead creating the actual <code>trial_2020_rename</code> data frame and passing it to <code>bind_rows()</code>.</p></li>
<li><p>I don’t think you can really say that one method is “better” or “worse”. The first method requires two steps and creates a data frame in our global environment that we may or may not ever need again (i.e., potentially just clutter). However, one could make an argument that the first method is also easier to glance at and read. I would typically use the second method, but this is really just a personal preference in this case.</p></li>
</ul>
<p>And that’s pretty much it. The <code>bind_rows()</code> function makes it really easy to combine R data frames vertically. Next, let’s learn how to combine data frames horizontally.</p>
</div>
</div>
<div id="combining-data-frames-horizontally-adding-columns" class="section level2 hasAnchor" number="31.2">
<h2><span class="header-section-number">31.2</span> Combining data frames horizontally: Adding columns<a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-adding-columns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this section we will once again begin with two separate data frames - data frame one and data frame two. But, unlike before, these data frames share only one variable in common. And, the data contained in both data frames pertains to the same observations.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/two_data_sets_horiz.png" width="900" /></p>
<p>Our goal is once again to combine these data frames. But, this time we want to combine them horizontally. In other words, we want a combined data frame that combines all the <em>columns</em> from data frame one and data frame two.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/goal.png" width="900" /></p>
<p>Combining data frames horizontally can be slightly more complicated than combining them vertically. As shown in the following flow chart, we can either match the rows of our two data frames up by position or by key values.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/flow_chart.png" width="900" /></p>
<div id="combining-data-frames-horizontally-by-position" class="section level3 hasAnchor" number="31.2.1">
<h3><span class="header-section-number">31.2.1</span> Combining data frames horizontally by position<a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-position" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In the simplest case, we match the rows in our data frames up by position. In other words, row 1 in data frame one is matched up with row 1 in data frame two, row 2 in data frame one is matched up with row 2 in data frame two, and so on. Row n (meaning, any number) in data frame one always gets matched to row n in data frame two, regardless of the values in any column of those rows.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/position.png" width="900" /></p>
<p>Combining data frames horizontally by position is very easy in R. We just use <code>dplyr</code>’s <code>bind_cols()</code> function similarly to the way used <code>bind_rows()</code> above. Just remember that when we horizontally combine data frames by position both data frames must have the same number of rows. For example:</p>
<div class="sourceCode" id="cb827"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb827-1"><a href="working-with-multiple-data-frames.html#cb827-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb827-2"><a href="working-with-multiple-data-frames.html#cb827-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="fu">c</span>(<span class="st">&quot;red&quot;</span>, <span class="st">&quot;green&quot;</span>, <span class="st">&quot;blue&quot;</span>),</span>
<span id="cb827-3"><a href="working-with-multiple-data-frames.html#cb827-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">size  =</span> <span class="fu">c</span>(<span class="st">&quot;small&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;large&quot;</span>)</span>
<span id="cb827-4"><a href="working-with-multiple-data-frames.html#cb827-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb827-5"><a href="working-with-multiple-data-frames.html#cb827-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   color size  
##   &lt;chr&gt; &lt;chr&gt; 
## 1 red   small 
## 2 green medium
## 3 blue  large</code></pre>
<div class="sourceCode" id="cb829"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb829-1"><a href="working-with-multiple-data-frames.html#cb829-1" aria-hidden="true" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb829-2"><a href="working-with-multiple-data-frames.html#cb829-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">amount =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>),</span>
<span id="cb829-3"><a href="working-with-multiple-data-frames.html#cb829-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">dose   =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb829-4"><a href="working-with-multiple-data-frames.html#cb829-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb829-5"><a href="working-with-multiple-data-frames.html#cb829-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   amount  dose
##    &lt;dbl&gt; &lt;dbl&gt;
## 1      1    10
## 2      4    20
## 3      3    30</code></pre>
<div class="sourceCode" id="cb831"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb831-1"><a href="working-with-multiple-data-frames.html#cb831-1" aria-hidden="true" tabindex="-1"></a>df1 <span class="sc">%&gt;%</span> </span>
<span id="cb831-2"><a href="working-with-multiple-data-frames.html#cb831-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(df2)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   color size   amount  dose
##   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1 red   small       1    10
## 2 green medium      4    20
## 3 blue  large       3    30</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>bind_cols()</code> function to horizontally bind the columns in <code>df1</code> to the columns in <code>df2</code>.</p></li>
<li><p>You can type <code>?bind_cols</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The only argument to the <code>bind_cols()</code> function is the <code>...</code> argument. Typically, we will pass one or more data frames that we want to combine to the <code>...</code> argument.</p></li>
</ul>
<p>In general, it’s a bad idea to combine data frames that contain different kinds of information (i.e., variables) about the same set of people (or places or things) in this way. It’s difficult to ensure that the information in row n in both data frames is really about the same person (or place or thing). However, I do sometimes find <code>bind_cols()</code> to be useful when I’m writing my own functions in R. We haven’t quite learned how to do that yet, but we will soon.</p>
</div>
<div id="combining-data-frames-horizontally-by-key-values" class="section level3 hasAnchor" number="31.2.2">
<h3><span class="header-section-number">31.2.2</span> Combining data frames horizontally by key values<a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-key-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In all the examples from here on out we will match the rows of our data frames by one or more key values.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/flow_chart_key_value.png" width="900" /></p>
<p>In epidemiology, the term I most often hear used for combining data frames in this way is <strong>merging</strong>. So, I will mostly use that term below. However, in other disciplines it is common to use the term <strong>joining</strong>, or performing a data <strong>join</strong>, to mean the same thing. The <code>dplyr</code> package, in specific, refers to these as “mutating joins.”</p>
<div id="relationship-types" class="section level4 hasAnchor" number="31.2.2.1">
<h4><span class="header-section-number">31.2.2.1</span> Relationship types<a href="working-with-multiple-data-frames.html#relationship-types" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>When we merge data frames it’s important to ask ourselves, “what is the relationship between the observations in the original data frames?” The observations can be related in several different ways.</p>
<p>In a one-to-one relationship, a single observation in one data frame is related to no more than one observation in the other data frame. We know how to align, or connect, the rows in the two data frames based on the values of one or more common variables.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/one_to_one.png" width="900" /></p>
<p>This common variable, or set of common variables, is also called a <strong>key</strong>. When we use the values in the key to match rows in our data frames, we can say that we are <em>matching on key values</em>.</p>
<p>In the example above, There is one key column – <code>Var1</code>. Both data frames contain the column named <code>Var1</code>, and the values of that column tell R how to align the rows in both data frames so that all the values in that row contain data are about the same person, place, or thing. In the example above, we know that the first row of data frame one goes with the <em>second</em> row of data frame two because both rows have the same key value – <code>1</code>.</p>
<p>In a one-to-many relationship, a single observation in one data frame is related to multiple observations in the other data frame.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/one_to_many.png" width="900" /></p>
<p>And finally, in a many-to-many relationship, multiple observations in one data frame are related to multiple observations in the other data frame.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/many_to_many.png" width="900" /></p>
<p>Many-to-many relationships are messy and are generally best avoided, if possible. In practice, I’m not sure that I’ve ever merged two data frames that had a <em>true</em> many-to-many relationship. I emphasize <em>true</em> because I have definitely merged data frames that had a many-to-many relationship when matching on a single key column. However, after matching on multiple key columns (e.g., study id and date instead of just study id), the relationship became one-to-one or one-to-many. We’ll see an example of matching on multiple key columns later.</p>
</div>
<div id="dplyr-join-types" class="section level4 hasAnchor" number="31.2.2.2">
<h4><span class="header-section-number">31.2.2.2</span> dplyr join types<a href="working-with-multiple-data-frames.html#dplyr-join-types" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In this chapter, we will merge data frames using one of <code>dplyr</code>’s four mutating join functions.</p>
<p>The first three arguments to all four of <code>dplyr</code>’s mutating join functions are: <code>x</code>, <code>y</code>, and <code>by</code>. You should pass the names of the data frames you want to merge to the <code>x</code> and <code>y</code> arguments respectively. You should pass the name(s) of the key column(s) to the <code>by</code> argument. In many cases, you will get a different merge result depending on which data frame you pass to the <code>x</code> and <code>y</code> arguments, and which mutating join function you use. Below, I will give you a brief overview of each of the mutating join functions, and then we will jump into some examples.</p>
<p>The four mutating join functions are:</p>
<ol style="list-style-type: decimal">
<li><code>left_join()</code>. This is probably the join function that you will use the most. It’s important to remember that <code>left_join()</code> keeps all the rows from the <code>x</code> data frame in the resulting combined data frame. However, it only keeps the rows from the <code>y</code> data frame that have a key value match in the <code>x</code> data frame. The values for columns with no key value match in the opposite data frame are set to <code>NA</code>.</li>
</ol>
<p><img src="img/05_part_data_management/08_multiple_data_frames/left_join.png" width="900" /></p>
<ol start="2" style="list-style-type: decimal">
<li><code>right_join()</code>. This is just the mirror opposite of <code>left_join()</code>. Accordingly, <code>right_join()</code> keeps all the rows from the <code>y</code> data frame in the resulting combined data frame, and only keep the rows from the <code>x</code> data frame that have a key value match in the <code>y</code> data frame. The values for columns with no key value match in the opposite data frame are set to <code>NA</code>.</li>
</ol>
<p><img src="img/05_part_data_management/08_multiple_data_frames/right_join.png" width="900" /></p>
<ol start="3" style="list-style-type: decimal">
<li><code>full_join()</code>. Full join keeps all the rows from both data frames in the resulting combined data frame. The values for columns with no key value match in the opposite data frame are set to <code>NA</code>.</li>
</ol>
<p><img src="img/05_part_data_management/08_multiple_data_frames/full_join.png" width="900" /></p>
<ol start="4" style="list-style-type: decimal">
<li><code>inner_join()</code>. Inner join keeps only the rows from both data frames that have a key value match in the opposite data frame in the resulting combined data frame.</li>
</ol>
<p><img src="img/05_part_data_management/08_multiple_data_frames/inner_join.png" width="900" /></p>
<p>Now that we have a common vocabulary, let’s take a look at some more concrete examples.</p>
<p>Suppose we are analyzing data from a study of aging and functional ability. At baseline, we assigned a study id to each of our participants. We then ask them their date of birth and their race and ethnicity. We saved that information in a data frame called <code>demographics</code>.</p>
<div class="sourceCode" id="cb833"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb833-1"><a href="working-with-multiple-data-frames.html#cb833-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb833-2"><a href="working-with-multiple-data-frames.html#cb833-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id       =</span> <span class="fu">c</span>(<span class="st">&quot;1001&quot;</span>, <span class="st">&quot;1002&quot;</span>, <span class="st">&quot;1003&quot;</span>, <span class="st">&quot;1004&quot;</span>),</span>
<span id="cb833-3"><a href="working-with-multiple-data-frames.html#cb833-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">dob      =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(<span class="st">&quot;1968-12-14&quot;</span>, <span class="st">&quot;1952-08-03&quot;</span>, <span class="st">&quot;1949-05-27&quot;</span>, <span class="st">&quot;1955-03-12&quot;</span>)),</span>
<span id="cb833-4"><a href="working-with-multiple-data-frames.html#cb833-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">race_eth =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">4</span>)</span>
<span id="cb833-5"><a href="working-with-multiple-data-frames.html#cb833-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb833-6"><a href="working-with-multiple-data-frames.html#cb833-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   id    dob        race_eth
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;
## 1 1001  1968-12-14        1
## 2 1002  1952-08-03        2
## 3 1003  1949-05-27        2
## 4 1004  1955-03-12        4</code></pre>
<p>Then, we asked our participants to do a series of functional tests. The functional tests included measuring grip strength in their right hand (<code>grip_r</code>) and grip strength in their left hand (<code>grip_l</code>). We saved each measure, along with their study id, in a separate data frame called <code>grip_strength</code>.</p>
<div class="sourceCode" id="cb835"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb835-1"><a href="working-with-multiple-data-frames.html#cb835-1" aria-hidden="true" tabindex="-1"></a>grip_strength <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb835-2"><a href="working-with-multiple-data-frames.html#cb835-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id     =</span> <span class="fu">c</span>(<span class="st">&quot;1002&quot;</span>, <span class="st">&quot;1001&quot;</span>, <span class="st">&quot;1003&quot;</span>, <span class="st">&quot;1004&quot;</span>),</span>
<span id="cb835-3"><a href="working-with-multiple-data-frames.html#cb835-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">grip_r =</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">28</span>, <span class="dv">32</span>, <span class="dv">22</span>),</span>
<span id="cb835-4"><a href="working-with-multiple-data-frames.html#cb835-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">grip_l =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">28</span>, <span class="dv">22</span>)</span>
<span id="cb835-5"><a href="working-with-multiple-data-frames.html#cb835-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb835-6"><a href="working-with-multiple-data-frames.html#cb835-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   id    grip_r grip_l
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1002      32     30
## 2 1001      28     30
## 3 1003      32     28
## 4 1004      22     22</code></pre>
<p>Now, we want to merge these two data frames together so that we can include age, race/ethnicity, and grip strength in our analysis.</p>
<p>Let’s first ask ourselves, “what is the relationship between the observations in <code>demographics</code> and the observations in <code>grip_strength</code>?”</p>
</div>
<div id="one-to-one-relationship-merge" class="section level4 hasAnchor" number="31.2.2.3">
<h4><span class="header-section-number">31.2.2.3</span> One-to-one relationship merge<a href="working-with-multiple-data-frames.html#one-to-one-relationship-merge" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>It’s a one-to-one relationship because each participant in <code>demographics</code> has no more than one corresponding row in <code>grip_strength</code>. Since both data frames have exactly four rows, we can go ahead hand combine them horizontally using <code>bind_cols()</code> like this:</p>
<div class="sourceCode" id="cb837"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb837-1"><a href="working-with-multiple-data-frames.html#cb837-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb837-2"><a href="working-with-multiple-data-frames.html#cb837-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(grip_strength)</span></code></pre></div>
<pre><code>## New names:
## • `id` -&gt; `id...1`
## • `id` -&gt; `id...4`</code></pre>
<pre><code>## # A tibble: 4 × 6
##   id...1 dob        race_eth id...4 grip_r grip_l
##   &lt;chr&gt;  &lt;date&gt;        &lt;dbl&gt; &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001   1968-12-14        1 1002       32     30
## 2 1002   1952-08-03        2 1001       28     30
## 3 1003   1949-05-27        2 1003       32     28
## 4 1004   1955-03-12        4 1004       22     22</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>bind_cols()</code> function to horizontally bind the columns in <code>demographics</code> to the columns in <code>grip_strength</code>. <strong>This was a bad idea!</strong></p></li>
<li><p>Notice the message that <code>bind_cols()</code> gave us this time: <code>New names: * id -&gt; id...1 * id -&gt; id...2</code>. This is telling us that both data frames had a column named <code>id</code>. If <code>bind_cols()</code> had left the column names as-is, then the resulting combined data frame would have had two columns named <code>id</code>, which isn’t allowed.</p></li>
<li><p><strong>More importantly</strong>, notice the demographic data for participant 1001 is now aligned with the grip strength data for participant 1002, and vice versa. The grip strength data was recorded in the order that participants came in to have their grip strength measured. In this case, participant 1002 came in before 1001. Remember that <code>bind_cols()</code> matches rows by position, which results in mismatched data in this case.</p></li>
</ul>
<p>Now, let’s learn a better way to merge these two data frames – <code>dplyr</code>’s <code>left_join()</code> function:</p>
<div class="sourceCode" id="cb840"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb840-1"><a href="working-with-multiple-data-frames.html#cb840-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb840-2"><a href="working-with-multiple-data-frames.html#cb840-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>left_join()</code> function to perform a one-to-one merge of the <code>demographics</code> data frame with the <code>grip_strength</code> data frame.</p></li>
<li><p>You can type <code>?left_join</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>left_join()</code> function is the <code>x</code> argument. You should pass a data frame to the <code>x</code> argument.</p></li>
<li><p>The second argument to the <code>left_join()</code> function is the <code>y</code> argument. You should pass a data frame to the <code>y</code> argument.</p></li>
<li><p>The third argument to the <code>left_join()</code> function is the <code>by</code> argument. You should pass the name of the column, or columns, that contain the key values. The column name should be wrapped in quotes.</p></li>
<li><p>Notice that the demographics and grip strength data are now correctly aligned for participants 1001 and 1002 even though they were still misaligned in the original data frames. That’s because row position is irrelevant when we match by key values.</p></li>
<li><p>Notice that the result above only includes a single <code>id</code> column. This is because we aren’t simply smooshing two data frames together, side-by-side. We are integrating information from across the two data frames based on the value of the key column – <code>id</code>.</p></li>
</ul>
<p>The merge we did above is about as simple as it gets. It was a one-to-one merge where every key value in the <code>x</code> data frame had one, and only one, matching key value in the <code>y</code> data frame. Therefore, in this simple case, all four join types give us the same result:</p>
<div class="sourceCode" id="cb842"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb842-1"><a href="working-with-multiple-data-frames.html#cb842-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Right join</span></span>
<span id="cb842-2"><a href="working-with-multiple-data-frames.html#cb842-2" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb842-3"><a href="working-with-multiple-data-frames.html#cb842-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22</code></pre>
<div class="sourceCode" id="cb844"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb844-1"><a href="working-with-multiple-data-frames.html#cb844-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Full join</span></span>
<span id="cb844-2"><a href="working-with-multiple-data-frames.html#cb844-2" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb844-3"><a href="working-with-multiple-data-frames.html#cb844-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22</code></pre>
<div class="sourceCode" id="cb846"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb846-1"><a href="working-with-multiple-data-frames.html#cb846-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inner join</span></span>
<span id="cb846-2"><a href="working-with-multiple-data-frames.html#cb846-2" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb846-3"><a href="working-with-multiple-data-frames.html#cb846-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22</code></pre>
<p>Additionally, aside from the order of the rows and columns in the resulting combined data frame, it makes no difference which data frame you pass to the <code>x</code> and <code>y</code> arguments in this case:</p>
<div class="sourceCode" id="cb848"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb848-1"><a href="working-with-multiple-data-frames.html#cb848-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Switching order</span></span>
<span id="cb848-2"><a href="working-with-multiple-data-frames.html#cb848-2" aria-hidden="true" tabindex="-1"></a>grip_strength <span class="sc">%&gt;%</span> </span>
<span id="cb848-3"><a href="working-with-multiple-data-frames.html#cb848-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(demographics, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   id    grip_r grip_l dob        race_eth
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;date&gt;        &lt;dbl&gt;
## 1 1002      32     30 1952-08-03        2
## 2 1001      28     30 1968-12-14        1
## 3 1003      32     28 1949-05-27        2
## 4 1004      22     22 1955-03-12        4</code></pre>
<p>As our merges get more complex, we will get different results depending on which join function we choose and the ordering in which we pass our data frames to the <code>x</code> and <code>y</code> arguments. I’m not going to attempt to cover every possible combination. But, I am going to try to give you a flavor for some of the scenarios I believe you are most likely to encounter in practice.</p>
</div>
<div id="differing-rows" class="section level4 hasAnchor" number="31.2.2.4">
<h4><span class="header-section-number">31.2.2.4</span> Differing rows<a href="working-with-multiple-data-frames.html#differing-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In the real world, participants don’t always attend scheduled visits. Let’s suppose that there was actually a fifth participant that we collected baseline data from:</p>
<div class="sourceCode" id="cb850"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb850-1"><a href="working-with-multiple-data-frames.html#cb850-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb850-2"><a href="working-with-multiple-data-frames.html#cb850-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id       =</span> <span class="fu">c</span>(<span class="st">&quot;1001&quot;</span>, <span class="st">&quot;1002&quot;</span>, <span class="st">&quot;1003&quot;</span>, <span class="st">&quot;1004&quot;</span>, <span class="st">&quot;1005&quot;</span>),</span>
<span id="cb850-3"><a href="working-with-multiple-data-frames.html#cb850-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">dob      =</span> <span class="fu">as.Date</span>(<span class="fu">c</span>(</span>
<span id="cb850-4"><a href="working-with-multiple-data-frames.html#cb850-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;1968-12-14&quot;</span>, <span class="st">&quot;1952-08-03&quot;</span>, <span class="st">&quot;1949-05-27&quot;</span>, <span class="st">&quot;1955-03-12&quot;</span>, <span class="st">&quot;1942-06-07&quot;</span></span>
<span id="cb850-5"><a href="working-with-multiple-data-frames.html#cb850-5" aria-hidden="true" tabindex="-1"></a>  )),</span>
<span id="cb850-6"><a href="working-with-multiple-data-frames.html#cb850-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">race_eth =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>)</span>
<span id="cb850-7"><a href="working-with-multiple-data-frames.html#cb850-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb850-8"><a href="working-with-multiple-data-frames.html#cb850-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   id    dob        race_eth
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;
## 1 1001  1968-12-14        1
## 2 1002  1952-08-03        2
## 3 1003  1949-05-27        2
## 4 1004  1955-03-12        4
## 5 1005  1942-06-07        3</code></pre>
<p>However, participant 1005 never made it back in for a grip strength test. Now, what do you think will happen when we merge <code>demographics</code> and <code>grip_strength</code> using <code>left_join()</code>?</p>
<div class="sourceCode" id="cb852"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb852-1"><a href="working-with-multiple-data-frames.html#cb852-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb852-2"><a href="working-with-multiple-data-frames.html#cb852-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22
## 5 1005  1942-06-07        3     NA     NA</code></pre>
<p>The resulting data frame includes <em>all</em> rows from the <code>demographics</code> data frame <em>and all</em> the rows from the <code>grip_strength</code> data frame. Because participant 1005 never had their grip strength measured, and therefore, had no rows in the <code>grip_strength</code> data frame, their values for <code>grip_r</code> and <code>grip_l</code> are set to missing.</p>
<p>This scenario is a little a different than the one above. It’s still a one-to-one relationship because each participant in <code>demographics</code> has no more than one corresponding row in <code>grip_strength</code>. However, every key value in the <code>x</code> data frame no longer has one, and only one, matching key value in the <code>y</code> data frame. Therefore, we will now get different results depending on which join function we choose, and the order in which we pass our data frames to the <code>x</code> and <code>y</code> arguments. Before reading further, think about what you expect the results from each join function to look like. Think about what you expect the results of switching the data frame order to look like.</p>
<div class="sourceCode" id="cb854"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb854-1"><a href="working-with-multiple-data-frames.html#cb854-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Right join</span></span>
<span id="cb854-2"><a href="working-with-multiple-data-frames.html#cb854-2" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb854-3"><a href="working-with-multiple-data-frames.html#cb854-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">right_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22</code></pre>
<div class="sourceCode" id="cb856"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb856-1"><a href="working-with-multiple-data-frames.html#cb856-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Full join</span></span>
<span id="cb856-2"><a href="working-with-multiple-data-frames.html#cb856-2" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb856-3"><a href="working-with-multiple-data-frames.html#cb856-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22
## 5 1005  1942-06-07        3     NA     NA</code></pre>
<div class="sourceCode" id="cb858"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb858-1"><a href="working-with-multiple-data-frames.html#cb858-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inner join</span></span>
<span id="cb858-2"><a href="working-with-multiple-data-frames.html#cb858-2" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb858-3"><a href="working-with-multiple-data-frames.html#cb858-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22</code></pre>
<div class="sourceCode" id="cb860"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb860-1"><a href="working-with-multiple-data-frames.html#cb860-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Switching order</span></span>
<span id="cb860-2"><a href="working-with-multiple-data-frames.html#cb860-2" aria-hidden="true" tabindex="-1"></a>grip_strength <span class="sc">%&gt;%</span> </span>
<span id="cb860-3"><a href="working-with-multiple-data-frames.html#cb860-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(demographics, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   id    grip_r grip_l dob        race_eth
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;date&gt;        &lt;dbl&gt;
## 1 1002      32     30 1952-08-03        2
## 2 1001      28     30 1968-12-14        1
## 3 1003      32     28 1949-05-27        2
## 4 1004      22     22 1955-03-12        4</code></pre>
<p>Well, were those the results you expected? In practice, the “correct” result depends on what we are trying to do. In the scenario above, I would probably tend to want the result from <code>left_join()</code> or <code>full_join()</code> in most cases. The reason is that it’s much harder to add data into my analysis that never made it into my combined data frame than it is to drop rows from my results data frame that I don’t need for my analysis.</p>
</div>
<div id="differing-key-column-names" class="section level4 hasAnchor" number="31.2.2.5">
<h4><span class="header-section-number">31.2.2.5</span> Differing key column names<a href="working-with-multiple-data-frames.html#differing-key-column-names" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Sometimes the key columns will have different names across data frames. For example, let’s imagine that the team collecting the grip strength data named the participant id column <code>pid</code> instead of <code>id</code>:</p>
<div class="sourceCode" id="cb862"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb862-1"><a href="working-with-multiple-data-frames.html#cb862-1" aria-hidden="true" tabindex="-1"></a>grip_strength <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb862-2"><a href="working-with-multiple-data-frames.html#cb862-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">pid    =</span> <span class="fu">c</span>(<span class="st">&quot;1002&quot;</span>, <span class="st">&quot;1001&quot;</span>, <span class="st">&quot;1003&quot;</span>, <span class="st">&quot;1004&quot;</span>),</span>
<span id="cb862-3"><a href="working-with-multiple-data-frames.html#cb862-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">grip_r =</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">28</span>, <span class="dv">32</span>, <span class="dv">22</span>),</span>
<span id="cb862-4"><a href="working-with-multiple-data-frames.html#cb862-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">grip_l =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">28</span>, <span class="dv">22</span>)</span>
<span id="cb862-5"><a href="working-with-multiple-data-frames.html#cb862-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb862-6"><a href="working-with-multiple-data-frames.html#cb862-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   pid   grip_r grip_l
##   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1002      32     30
## 2 1001      28     30
## 3 1003      32     28
## 4 1004      22     22</code></pre>
<p>If we try to merge <code>demographics</code> and <code>grip_strength</code> as we did before, we will get an error.</p>
<div class="sourceCode" id="cb864"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb864-1"><a href="working-with-multiple-data-frames.html#cb864-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb864-2"><a href="working-with-multiple-data-frames.html#cb864-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## Error in `left_join()`:
## ! Join columns must be present in data.
## ✖ Problem with `id`.</code></pre>
<p>This error is <code>left_join()</code> telling us that it couldn’t find a column named <code>id</code> in both data frames. To get around this error, we can simply tell <code>left_join()</code> which column is the matching key column in the opposite data frame using a named vector like this:</p>
<div class="sourceCode" id="cb866"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb866-1"><a href="working-with-multiple-data-frames.html#cb866-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb866-2"><a href="working-with-multiple-data-frames.html#cb866-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(grip_strength, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span> <span class="ot">=</span> <span class="st">&quot;pid&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 5
##   id    dob        race_eth grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1     28     30
## 2 1002  1952-08-03        2     32     30
## 3 1003  1949-05-27        2     32     28
## 4 1004  1955-03-12        4     22     22
## 5 1005  1942-06-07        3     NA     NA</code></pre>
<p>Just make sure that the first column name you pass to the named vector (i.e., <code>"id"</code>) is the name of the key column in the <code>x</code> data frame and that the second column name you pass to the named vector (i.e., <code>"pid"</code>) is the name of the key column in the <code>y</code> data frame.</p>
</div>
<div id="one-to-many-relationship-merge" class="section level4 hasAnchor" number="31.2.2.6">
<h4><span class="header-section-number">31.2.2.6</span> One-to-many relationship merge<a href="working-with-multiple-data-frames.html#one-to-many-relationship-merge" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Now suppose that our grip strength study has a longitudinal design. The demographics data was only collected at enrollment into the study. After all, race and dob don’t change. There’s no need to ask our participants about them at every follow-up interview.</p>
<div class="sourceCode" id="cb868"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb868-1"><a href="working-with-multiple-data-frames.html#cb868-1" aria-hidden="true" tabindex="-1"></a>demographics</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   id    dob        race_eth
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt;
## 1 1001  1968-12-14        1
## 2 1002  1952-08-03        2
## 3 1003  1949-05-27        2
## 4 1004  1955-03-12        4
## 5 1005  1942-06-07        3</code></pre>
<p>Grip strength, however, was measured pre and post some intervention.</p>
<div class="sourceCode" id="cb870"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb870-1"><a href="working-with-multiple-data-frames.html#cb870-1" aria-hidden="true" tabindex="-1"></a>grip_strength <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb870-2"><a href="working-with-multiple-data-frames.html#cb870-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id     =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;1001&quot;</span>, <span class="st">&quot;1002&quot;</span>, <span class="st">&quot;1003&quot;</span>, <span class="st">&quot;1004&quot;</span>), <span class="at">each =</span> <span class="dv">2</span>),</span>
<span id="cb870-3"><a href="working-with-multiple-data-frames.html#cb870-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">visit  =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;pre&quot;</span>, <span class="st">&quot;post&quot;</span>), <span class="dv">4</span>),</span>
<span id="cb870-4"><a href="working-with-multiple-data-frames.html#cb870-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">grip_r =</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">33</span>, <span class="dv">28</span>, <span class="dv">27</span>, <span class="dv">32</span>, <span class="dv">34</span>, <span class="dv">22</span>, <span class="dv">27</span>),</span>
<span id="cb870-5"><a href="working-with-multiple-data-frames.html#cb870-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">grip_l =</span> <span class="fu">c</span>(<span class="dv">30</span>, <span class="dv">32</span>, <span class="dv">30</span>, <span class="dv">30</span>, <span class="dv">28</span>, <span class="dv">30</span>, <span class="dv">22</span>, <span class="dv">26</span>)</span>
<span id="cb870-6"><a href="working-with-multiple-data-frames.html#cb870-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb870-7"><a href="working-with-multiple-data-frames.html#cb870-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
##   id    visit grip_r grip_l
##   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  pre       32     30
## 2 1001  post      33     32
## 3 1002  pre       28     30
## 4 1002  post      27     30
## 5 1003  pre       32     28
## 6 1003  post      34     30
## 7 1004  pre       22     22
## 8 1004  post      27     26</code></pre>
<p>Now what is the relationship of these two data frames?</p>
<p>These data frames have a one-to-many relationship because at least one observation in one data frame is related to multiple observations in the other data frame. The <code>demographics</code> data frame has one observation for each value of <code>id</code>. The <code>grip_strength</code> data frame has two observations for each value of the <code>id</code>’s <code>1001</code> through <code>1004</code>.</p>
<p>Now, to conduct our analysis, we need to combine the data in <code>demographics</code> with the data in the longitudinal <code>grip_strength</code> data frame. And how will we ask R to merge these two data frames? Well, here is some good news. To perform a one-to-many or many-to-many merge, we use the exact same syntax that we used to perform a one-to-one merge. R will figure out the relationship between the data frames automatically. Take a look:</p>
<div class="sourceCode" id="cb872"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb872-1"><a href="working-with-multiple-data-frames.html#cb872-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb872-2"><a href="working-with-multiple-data-frames.html#cb872-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 6
##   id    dob        race_eth visit grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1 pre       32     30
## 2 1001  1968-12-14        1 post      33     32
## 3 1002  1952-08-03        2 pre       28     30
## 4 1002  1952-08-03        2 post      27     30
## 5 1003  1949-05-27        2 pre       32     28
## 6 1003  1949-05-27        2 post      34     30
## 7 1004  1955-03-12        4 pre       22     22
## 8 1004  1955-03-12        4 post      27     26
## 9 1005  1942-06-07        3 &lt;NA&gt;      NA     NA</code></pre>
</div>
<div id="multiple-key-columns" class="section level4 hasAnchor" number="31.2.2.7">
<h4><span class="header-section-number">31.2.2.7</span> Multiple key columns<a href="working-with-multiple-data-frames.html#multiple-key-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s throw one more little wrinkle into our analysis. Let’s say that each participant had a medical exam prior to being sent into the gym to do their functional assessments. The results of that medical exam, along with the participant’s study id, were recorded in the university hospital system’s electronic medical records. As part of that medical exam, each participant’s weight was recorded. Luckily, we were given access to the electronic medical records, which look like this:</p>
<div class="sourceCode" id="cb874"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb874-1"><a href="working-with-multiple-data-frames.html#cb874-1" aria-hidden="true" tabindex="-1"></a>emr <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb874-2"><a href="working-with-multiple-data-frames.html#cb874-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id     =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;1001&quot;</span>, <span class="st">&quot;1002&quot;</span>, <span class="st">&quot;1003&quot;</span>, <span class="st">&quot;1004&quot;</span>), <span class="at">each =</span> <span class="dv">2</span>),</span>
<span id="cb874-3"><a href="working-with-multiple-data-frames.html#cb874-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">visit  =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;pre&quot;</span>, <span class="st">&quot;post&quot;</span>), <span class="dv">4</span>),</span>
<span id="cb874-4"><a href="working-with-multiple-data-frames.html#cb874-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">weight =</span> <span class="fu">c</span>(<span class="dv">105</span>, <span class="dv">99</span>, <span class="dv">200</span>, <span class="dv">201</span>, <span class="dv">136</span>, <span class="dv">133</span>, <span class="dv">170</span>, <span class="dv">175</span>)</span>
<span id="cb874-5"><a href="working-with-multiple-data-frames.html#cb874-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb874-6"><a href="working-with-multiple-data-frames.html#cb874-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 8 × 3
##   id    visit weight
##   &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;
## 1 1001  pre      105
## 2 1001  post      99
## 3 1002  pre      200
## 4 1002  post     201
## 5 1003  pre      136
## 6 1003  post     133
## 7 1004  pre      170
## 8 1004  post     175</code></pre>
<p>Now, we would like to add participant weight to our analysis. Our first attempt might look something like this:</p>
<div class="sourceCode" id="cb876"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb876-1"><a href="working-with-multiple-data-frames.html#cb876-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb876-2"><a href="working-with-multiple-data-frames.html#cb876-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(grip_strength, emr, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 6
##   id    dob        race_eth visit grip_r grip_l
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1 pre       32     30
## 2 1001  1968-12-14        1 post      33     32
## 3 1002  1952-08-03        2 pre       28     30
## 4 1002  1952-08-03        2 post      27     30
## 5 1003  1949-05-27        2 pre       32     28
## 6 1003  1949-05-27        2 post      34     30
## 7 1004  1955-03-12        4 pre       22     22
## 8 1004  1955-03-12        4 post      27     26
## 9 1005  1942-06-07        3 &lt;NA&gt;      NA     NA</code></pre>
<p>Of course, that doesn’t work because <code>left_join()</code> can only merge two data frames at a time – <code>x</code> and <code>y</code>. The <code>emr</code> data frame was ignored. Then we think, “hmmm, maybe we should try merging them sequentially.” In other words, merge <code>demographics</code> and <code>grip_strength</code> first. Then merge the combined <code>demographics</code>/<code>grip_strength</code> data frame with <code>emr</code>. So, our next attempt might look like this:</p>
<div class="sourceCode" id="cb878"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb878-1"><a href="working-with-multiple-data-frames.html#cb878-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb878-2"><a href="working-with-multiple-data-frames.html#cb878-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb878-3"><a href="working-with-multiple-data-frames.html#cb878-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(emr, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 17 × 8
##    id    dob        race_eth visit.x grip_r grip_l visit.y weight
##    &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1 1001  1968-12-14        1 pre         32     30 pre        105
##  2 1001  1968-12-14        1 pre         32     30 post        99
##  3 1001  1968-12-14        1 post        33     32 pre        105
##  4 1001  1968-12-14        1 post        33     32 post        99
##  5 1002  1952-08-03        2 pre         28     30 pre        200
##  6 1002  1952-08-03        2 pre         28     30 post       201
##  7 1002  1952-08-03        2 post        27     30 pre        200
##  8 1002  1952-08-03        2 post        27     30 post       201
##  9 1003  1949-05-27        2 pre         32     28 pre        136
## 10 1003  1949-05-27        2 pre         32     28 post       133
## 11 1003  1949-05-27        2 post        34     30 pre        136
## 12 1003  1949-05-27        2 post        34     30 post       133
## 13 1004  1955-03-12        4 pre         22     22 pre        170
## 14 1004  1955-03-12        4 pre         22     22 post       175
## 15 1004  1955-03-12        4 post        27     26 pre        170
## 16 1004  1955-03-12        4 post        27     26 post       175
## 17 1005  1942-06-07        3 &lt;NA&gt;        NA     NA &lt;NA&gt;        NA</code></pre>
<p>But, if you look closely, that isn’t what we want either. Each participant didn’t have four visits. They only had two. Here’s the problem. Each participant in the combined <code>demographics</code>/<code>grip_strength</code> data frame has two rows (i.e., one for pre and one for post). Each participant in the <code>emr</code> data frame also has two rows (i.e., one for pre and one for post). Above, we told <code>left_join()</code> to join by <code>id</code>. So, <code>left_join()</code> aligns all rows with matching key values – <code>id</code>’s.</p>
<p>For example, row one in the combined <code>demographics</code>/<code>grip_strength</code> data frame has the key value <code>1001</code>. So, <code>left_join()</code> aligns row one in the combined <code>demographics</code>/<code>grip_strength</code> data frame with rows one <em>and</em> two in the <code>emr</code> data frame. Next, row <em>two</em> in the combined <code>demographics</code>/<code>grip_strength</code> data frame has the key value <code>1001</code>. So, <code>left_join()</code> aligns row <em>two</em> in the combined <code>demographics</code>/<code>grip_strength</code> data frame with rows one <em>and</em> two in the <code>emr</code> data frame. This results in 2 * 2 = 4 rows for each id - a <strong>many-to-many</strong> merge.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/many_to_many_emr.png" width="900" /></p>
<p>But in reality, study id alone no longer uniquely identifies observations in our data. Now, observations are uniquely identified by study id and visit. For example, <code>1001</code> <em>and</em> <code>pre</code> are a unique observation, <code>1001</code> <em>and</em> <code>post</code> are a unique observation, <code>1002</code> <em>and</em> <code>pre</code> are a unique observation, and so on. We now have two key columns that identify unique observations. And once we give that information to <code>left_join</code>, the relationship between the data frames becomes a one-to-one relationship. In other words, each observation (defined by <code>id</code> <em>and</em> <code>visit</code>) in one data frame is related to no more than one observation (defined by <code>id</code> <em>and</em> <code>visit</code>) in the other data frame.</p>
<p><img src="img/05_part_data_management/08_multiple_data_frames/one_to_one_emr.png" width="900" /></p>
<p>Here is how we tell <code>left_join()</code> to merge our data frames by <code>id</code> <em>and</em> <code>visit</code>:</p>
<div class="sourceCode" id="cb880"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb880-1"><a href="working-with-multiple-data-frames.html#cb880-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb880-2"><a href="working-with-multiple-data-frames.html#cb880-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(grip_strength, <span class="at">by =</span> <span class="st">&quot;id&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb880-3"><a href="working-with-multiple-data-frames.html#cb880-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(emr, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;visit&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 9 × 7
##   id    dob        race_eth visit grip_r grip_l weight
##   &lt;chr&gt; &lt;date&gt;        &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 1001  1968-12-14        1 pre       32     30    105
## 2 1001  1968-12-14        1 post      33     32     99
## 3 1002  1952-08-03        2 pre       28     30    200
## 4 1002  1952-08-03        2 post      27     30    201
## 5 1003  1949-05-27        2 pre       32     28    136
## 6 1003  1949-05-27        2 post      34     30    133
## 7 1004  1955-03-12        4 pre       22     22    170
## 8 1004  1955-03-12        4 post      27     26    175
## 9 1005  1942-06-07        3 &lt;NA&gt;      NA     NA     NA</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>left_join()</code> function to perform a one-to-many merge of the <code>demographics</code> data frame with the <code>grip_strength</code> data frame. Then, we used <code>left_join()</code> again to perform a one-to-one merge of the combined <code>demographics</code>/<code>grip_strength</code> data frame with the <code>emr</code> data frame.</p></li>
<li><p>We told <code>left_join()</code> that it needed to match the values in the <code>id</code> key column <em>and</em> the values in the <code>visit</code> key column in order to align the rows in the combined <code>demographics</code>/<code>grip_strength</code> data frame with the <code>emr</code> data frame.</p></li>
</ul>
<p>We now have a robust set of tools we can use to work with data that is stored in more than one data frame – a common occurrence in epidemiology!</p>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="conditional-operations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="restructuring-data-frames.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/brad-cannell/r4epi/edit/master/chapters/05_part_data_management/08_multiple_data_frames.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
