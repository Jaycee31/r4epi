<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>30 Conditional operations | R for Epidemiology</title>
  <meta name="description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="30 Conditional operations | R for Epidemiology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r4epi/" />
  <meta property="og:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />
  <meta property="og:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="github-repo" content="brad-cannell/r4epi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="30 Conditional operations | R for Epidemiology" />
  
  <meta name="twitter:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="twitter:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2022-07-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-character-strings.html"/>
<link rel="next" href="working-with-multiple-data-frames.html"/>
<script src="libs/header-attrs-2.14/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0RREBTQ0D9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0RREBTQ0D9');
</script>
<!-- R4Epi Favicons -->
<!-- https://bookdown.org/yihui/rmarkdown-cookbook/favicon.html -->
<!-- Also using Favicon Generator (https://realfavicongenerator.net) -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Epidemiology</a></li>

<li class="divider"></li>
<li><a href="index.html#welcome">Welcome<span></span></a>
<ul>
<li><a href="index.html#acknowledgements">Acknowledgements<span></span></a></li>
</ul></li>
<li><a href="introduction.html#introduction">Introduction<span></span></a>
<ul>
<li><a href="introduction.html#goals">Goals<span></span></a></li>
<li><a href="introduction.html#text-conventions-used-in-this-book">Text conventions used in this book<span></span></a></li>
<li><a href="introduction.html#other-reading">Other reading<span></span></a></li>
<li><a href="introduction.html#contributing-to-r4epi">Contributing to R4Epi<span></span></a>
<ul>
<li><a href="introduction.html#typos">Typos<span></span></a></li>
<li><a href="introduction.html#issues">Issues<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="about-the-authors.html#about-the-authors">About the Authors<span></span></a>
<ul>
<li><a href="about-the-authors.html#brad-cannell">Brad Cannell<span></span></a></li>
<li><a href="about-the-authors.html#melvin-livingston">Melvin Livingston<span></span></a></li>
</ul></li>
<li class="part"><span><b>I Getting Started<span></span></b></span></li>
<li class="chapter" data-level="1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-mac"><i class="fa fa-check"></i><b>1.1</b> Download and install on a Mac<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-pc"><i class="fa fa-check"></i><b>1.2</b> Download and install on a PC<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>2</b> What is R?<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="what-is-r.html"><a href="what-is-r.html#what-is-data"><i class="fa fa-check"></i><b>2.1</b> What is data?<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="what-is-r.html"><a href="what-is-r.html#what-is-r-1"><i class="fa fa-check"></i><b>2.2</b> What is R?<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="what-is-r.html"><a href="what-is-r.html#transferring-data"><i class="fa fa-check"></i><b>2.2.1</b> Transferring data<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="what-is-r.html"><a href="what-is-r.html#managing-data"><i class="fa fa-check"></i><b>2.2.2</b> Managing data<span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="what-is-r.html"><a href="what-is-r.html#analyzing-data"><i class="fa fa-check"></i><b>2.2.3</b> Analyzing data<span></span></a></li>
<li class="chapter" data-level="2.2.4" data-path="what-is-r.html"><a href="what-is-r.html#presenting-data"><i class="fa fa-check"></i><b>2.2.4</b> Presenting data<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html"><i class="fa fa-check"></i><b>3</b> Navigating the RStudio interface<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-console"><i class="fa fa-check"></i><b>3.1</b> The console<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-environment-pane"><i class="fa fa-check"></i><b>3.2</b> The environment pane<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-files-pane"><i class="fa fa-check"></i><b>3.3</b> The files pane<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-source-pane"><i class="fa fa-check"></i><b>3.4</b> The source pane<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#rstudio-preferences"><i class="fa fa-check"></i><b>3.5</b> RStudio preferences<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html"><i class="fa fa-check"></i><b>4</b> Speaking R’s language<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#r-is-a-language"><i class="fa fa-check"></i><b>4.1</b> R is a <em>language</em><span></span></a></li>
<li class="chapter" data-level="4.2" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#the-r-interpreter"><i class="fa fa-check"></i><b>4.2</b> The R interpreter<span></span></a></li>
<li class="chapter" data-level="4.3" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#errors"><i class="fa fa-check"></i><b>4.3</b> Errors<span></span></a></li>
<li class="chapter" data-level="4.4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#functions"><i class="fa fa-check"></i><b>4.4</b> Functions<span></span></a></li>
<li class="chapter" data-level="4.5" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#objects"><i class="fa fa-check"></i><b>4.5</b> Objects<span></span></a></li>
<li class="chapter" data-level="4.6" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#comments"><i class="fa fa-check"></i><b>4.6</b> Comments<span></span></a></li>
<li class="chapter" data-level="4.7" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#packages"><i class="fa fa-check"></i><b>4.7</b> Packages<span></span></a></li>
<li class="chapter" data-level="4.8" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#programming-style"><i class="fa fa-check"></i><b>4.8</b> Programming style<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lets-get-programming.html"><a href="lets-get-programming.html"><i class="fa fa-check"></i><b>5</b> Let’s get programming<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#simulating-data"><i class="fa fa-check"></i><b>5.1</b> Simulating data<span></span></a></li>
<li class="chapter" data-level="5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vectors"><i class="fa fa-check"></i><b>5.2</b> Vectors<span></span></a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vector-types"><i class="fa fa-check"></i><b>5.2.1</b> Vector types<span></span></a></li>
<li class="chapter" data-level="5.2.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#double-vectors"><i class="fa fa-check"></i><b>5.2.2</b> Double vectors<span></span></a></li>
<li class="chapter" data-level="5.2.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#integer-vectors"><i class="fa fa-check"></i><b>5.2.3</b> Integer vectors<span></span></a></li>
<li class="chapter" data-level="5.2.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#logical-vectors"><i class="fa fa-check"></i><b>5.2.4</b> Logical vectors<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#data-frames"><i class="fa fa-check"></i><b>5.3</b> Data frames<span></span></a></li>
<li class="chapter" data-level="5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#tibbles"><i class="fa fa-check"></i><b>5.4</b> Tibbles<span></span></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-as_tibble-function"><i class="fa fa-check"></i><b>5.4.1</b> The as_tibble function<span></span></a></li>
<li class="chapter" data-level="5.4.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tibble-function"><i class="fa fa-check"></i><b>5.4.2</b> The tibble function<span></span></a></li>
<li class="chapter" data-level="5.4.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tribble-function"><i class="fa fa-check"></i><b>5.4.3</b> The tribble function<span></span></a></li>
<li class="chapter" data-level="5.4.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#why-use-tibbles"><i class="fa fa-check"></i><b>5.4.4</b> Why use tibbles<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#missing-data"><i class="fa fa-check"></i><b>5.5</b> Missing data<span></span></a></li>
<li class="chapter" data-level="5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#our-first-analysis"><i class="fa fa-check"></i><b>5.6</b> Our first analysis<span></span></a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#manual-calculation-of-the-mean"><i class="fa fa-check"></i><b>5.6.1</b> Manual calculation of the mean<span></span></a></li>
<li class="chapter" data-level="5.6.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#dollar-sign-notation"><i class="fa fa-check"></i><b>5.6.2</b> Dollar sign notation<span></span></a></li>
<li class="chapter" data-level="5.6.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#bracket-notation"><i class="fa fa-check"></i><b>5.6.3</b> Bracket notation<span></span></a></li>
<li class="chapter" data-level="5.6.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-sum-function"><i class="fa fa-check"></i><b>5.6.4</b> The sum function<span></span></a></li>
<li class="chapter" data-level="5.6.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#nesting-functions"><i class="fa fa-check"></i><b>5.6.5</b> Nesting functions<span></span></a></li>
<li class="chapter" data-level="5.6.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-length-function"><i class="fa fa-check"></i><b>5.6.6</b> The length function<span></span></a></li>
<li class="chapter" data-level="5.6.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-mean-function"><i class="fa fa-check"></i><b>5.6.7</b> The mean function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#some-common-errors"><i class="fa fa-check"></i><b>5.7</b> Some common errors<span></span></a></li>
<li class="chapter" data-level="5.8" data-path="lets-get-programming.html"><a href="lets-get-programming.html#summary"><i class="fa fa-check"></i><b>5.8</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="asking-questions.html"><a href="asking-questions.html"><i class="fa fa-check"></i><b>6</b> Asking questions<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="asking-questions.html"><a href="asking-questions.html#when-should-we-seek-help"><i class="fa fa-check"></i><b>6.1</b> When should we seek help?<span></span></a></li>
<li class="chapter" data-level="6.2" data-path="asking-questions.html"><a href="asking-questions.html#where-should-we-seek-help"><i class="fa fa-check"></i><b>6.2</b> Where should we seek help?<span></span></a></li>
<li class="chapter" data-level="6.3" data-path="asking-questions.html"><a href="asking-questions.html#how-should-we-seek-help"><i class="fa fa-check"></i><b>6.3</b> How should we seek help?<span></span></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="asking-questions.html"><a href="asking-questions.html#creating-a-post-on-stack-overflow"><i class="fa fa-check"></i><b>6.3.1</b> Creating a post on Stack Overflow<span></span></a></li>
<li class="chapter" data-level="6.3.2" data-path="asking-questions.html"><a href="asking-questions.html#creating-better-posts-and-asking-better-questions"><i class="fa fa-check"></i><b>6.3.2</b> Creating better posts and asking better questions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="asking-questions.html"><a href="asking-questions.html#helping-others"><i class="fa fa-check"></i><b>6.4</b> Helping others<span></span></a></li>
<li class="chapter" data-level="6.5" data-path="asking-questions.html"><a href="asking-questions.html#summary-1"><i class="fa fa-check"></i><b>6.5</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>II Coding Tools and Best Practices<span></span></b></span></li>
<li class="chapter" data-level="7" data-path="r-scripts.html"><a href="r-scripts.html"><i class="fa fa-check"></i><b>7</b> R scripts<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-scripts.html"><a href="r-scripts.html#creating-r-scripts"><i class="fa fa-check"></i><b>7.1</b> Creating R scripts<span></span></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R markdown<span></span></a>
<ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>8.1</b> What is R markdown?<span></span></a></li>
<li class="chapter" data-level="8.2" data-path="r-markdown.html"><a href="r-markdown.html#why-use-r-markdown"><i class="fa fa-check"></i><b>8.2</b> Why use R markdown?<span></span></a></li>
<li class="chapter" data-level="8.3" data-path="r-markdown.html"><a href="r-markdown.html#create-an-r-notebook"><i class="fa fa-check"></i><b>8.3</b> Create an R Notebook<span></span></a></li>
<li class="chapter" data-level="8.4" data-path="r-markdown.html"><a href="r-markdown.html#yaml-headers"><i class="fa fa-check"></i><b>8.4</b> YAML headers<span></span></a></li>
<li class="chapter" data-level="8.5" data-path="r-markdown.html"><a href="r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>8.5</b> R code chunks<span></span></a></li>
<li class="chapter" data-level="8.6" data-path="r-markdown.html"><a href="r-markdown.html#markdown"><i class="fa fa-check"></i><b>8.6</b> Markdown<span></span></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="r-projects.html"><a href="r-projects.html"><i class="fa fa-check"></i><b>9</b> R projects<span></span></a></li>
<li class="chapter" data-level="10" data-path="coding-best-practices.html"><a href="coding-best-practices.html"><i class="fa fa-check"></i><b>10</b> Coding best practices<span></span></a>
<ul>
<li class="chapter" data-level="10.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#general-principles"><i class="fa fa-check"></i><b>10.1</b> General principles<span></span></a></li>
<li class="chapter" data-level="10.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#code-comments"><i class="fa fa-check"></i><b>10.2</b> Code comments<span></span></a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#defining-key-variables"><i class="fa fa-check"></i><b>10.2.1</b> Defining key variables<span></span></a></li>
<li class="chapter" data-level="10.2.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#what-this-code-is-trying-to-accomplish"><i class="fa fa-check"></i><b>10.2.2</b> What this code is trying to accomplish<span></span></a></li>
<li class="chapter" data-level="10.2.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#why-i-chose-this-particular-strategy"><i class="fa fa-check"></i><b>10.2.3</b> Why I chose this particular strategy<span></span></a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#style-guidelines"><i class="fa fa-check"></i><b>10.3</b> Style guidelines<span></span></a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#comments-1"><i class="fa fa-check"></i><b>10.3.1</b> Comments<span></span></a></li>
<li class="chapter" data-level="10.3.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#object-variable-names"><i class="fa fa-check"></i><b>10.3.2</b> Object (variable) names<span></span></a></li>
<li class="chapter" data-level="10.3.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#use-names-that-are-informative"><i class="fa fa-check"></i><b>10.3.3</b> Use names that are informative<span></span></a></li>
<li class="chapter" data-level="10.3.4" data-path="coding-best-practices.html"><a href="coding-best-practices.html#file-names"><i class="fa fa-check"></i><b>10.3.4</b> File Names<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="using-pipes.html"><a href="using-pipes.html"><i class="fa fa-check"></i><b>11</b> Using pipes<span></span></a>
<ul>
<li class="chapter" data-level="11.1" data-path="using-pipes.html"><a href="using-pipes.html#what-are-pipes"><i class="fa fa-check"></i><b>11.1</b> What are pipes?<span></span></a></li>
<li class="chapter" data-level="11.2" data-path="using-pipes.html"><a href="using-pipes.html#how-do-pipes-work"><i class="fa fa-check"></i><b>11.2</b> How do pipes work?<span></span></a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="using-pipes.html"><a href="using-pipes.html#keyboard-shortcut"><i class="fa fa-check"></i><b>11.2.1</b> Keyboard shortcut<span></span></a></li>
<li class="chapter" data-level="11.2.2" data-path="using-pipes.html"><a href="using-pipes.html#pipe-style"><i class="fa fa-check"></i><b>11.2.2</b> Pipe style<span></span></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="using-pipes.html"><a href="using-pipes.html#final-thought-on-pipes"><i class="fa fa-check"></i><b>11.3</b> Final thought on pipes<span></span></a></li>
</ul></li>
<li class="part"><span><b>III Data Transfer<span></span></b></span></li>
<li class="chapter" data-level="12" data-path="introduction-to-data-transfer.html"><a href="introduction-to-data-transfer.html"><i class="fa fa-check"></i><b>12</b> Introduction to data transfer<span></span></a></li>
<li class="chapter" data-level="13" data-path="file-paths.html"><a href="file-paths.html"><i class="fa fa-check"></i><b>13</b> File paths<span></span></a>
<ul>
<li class="chapter" data-level="13.1" data-path="file-paths.html"><a href="file-paths.html#finding-file-paths"><i class="fa fa-check"></i><b>13.1</b> Finding file paths<span></span></a></li>
<li class="chapter" data-level="13.2" data-path="file-paths.html"><a href="file-paths.html#relative-file-paths"><i class="fa fa-check"></i><b>13.2</b> Relative file paths<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html"><i class="fa fa-check"></i><b>14</b> Importing plain text files<span></span></a>
<ul>
<li class="chapter" data-level="14.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#packages-for-importing-data"><i class="fa fa-check"></i><b>14.1</b> Packages for importing data<span></span></a></li>
<li class="chapter" data-level="14.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-space-delimited-files"><i class="fa fa-check"></i><b>14.2</b> Importing space delimited files<span></span></a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#specifying-missing-data-values"><i class="fa fa-check"></i><b>14.2.1</b> Specifying missing data values<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-tab-delimited-files"><i class="fa fa-check"></i><b>14.3</b> Importing tab delimited files<span></span></a></li>
<li class="chapter" data-level="14.4" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-fixed-width-format-files"><i class="fa fa-check"></i><b>14.4</b> Importing fixed width format files<span></span></a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#vector-of-column-widths"><i class="fa fa-check"></i><b>14.4.1</b> Vector of column widths<span></span></a></li>
<li class="chapter" data-level="14.4.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#paired-vector-of-start-and-end-positions"><i class="fa fa-check"></i><b>14.4.2</b> Paired vector of start and end positions<span></span></a></li>
<li class="chapter" data-level="14.4.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#using-named-arguments"><i class="fa fa-check"></i><b>14.4.3</b> Using named arguments<span></span></a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-comma-separated-values-files"><i class="fa fa-check"></i><b>14.5</b> Importing comma separated values files<span></span></a></li>
<li class="chapter" data-level="14.6" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#additional-arguments"><i class="fa fa-check"></i><b>14.6</b> Additional arguments<span></span></a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="importing-binary-files.html"><a href="importing-binary-files.html"><i class="fa fa-check"></i><b>15</b> Importing binary files<span></span></a>
<ul>
<li class="chapter" data-level="15.1" data-path="importing-binary-files.html"><a href="importing-binary-files.html#packages-for-importing-data-1"><i class="fa fa-check"></i><b>15.1</b> Packages for importing data<span></span></a></li>
<li class="chapter" data-level="15.2" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-microsoft-excel-spreadsheets"><i class="fa fa-check"></i><b>15.2</b> Importing Microsoft Excel spreadsheets<span></span></a></li>
<li class="chapter" data-level="15.3" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-data-from-other-statistical-analysis-software"><i class="fa fa-check"></i><b>15.3</b> Importing data from other statistical analysis software<span></span></a></li>
<li class="chapter" data-level="15.4" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-sas-data-sets"><i class="fa fa-check"></i><b>15.4</b> Importing SAS data sets<span></span></a></li>
<li class="chapter" data-level="15.5" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-stata-data-sets"><i class="fa fa-check"></i><b>15.5</b> Importing Stata data sets<span></span></a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="rstudios-data-import-tool.html"><a href="rstudios-data-import-tool.html"><i class="fa fa-check"></i><b>16</b> RStudio’s data import tool<span></span></a></li>
<li class="chapter" data-level="17" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>17</b> Exporting data<span></span></a>
<ul>
<li class="chapter" data-level="17.1" data-path="exporting-data.html"><a href="exporting-data.html#plain-text-files"><i class="fa fa-check"></i><b>17.1</b> Plain text files<span></span></a></li>
<li class="chapter" data-level="17.2" data-path="exporting-data.html"><a href="exporting-data.html#r-binary-files"><i class="fa fa-check"></i><b>17.2</b> R binary files<span></span></a></li>
</ul></li>
<li class="part"><span><b>IV Descriptive Analysis<span></span></b></span></li>
<li class="chapter" data-level="18" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html"><i class="fa fa-check"></i><b>18</b> Introduction to descriptive analysis<span></span></a>
<ul>
<li class="chapter" data-level="18.1" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-is-descriptive-analysis-and-why-would-we-do-it"><i class="fa fa-check"></i><b>18.1</b> What is descriptive analysis and why would we do it?<span></span></a></li>
<li class="chapter" data-level="18.2" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-kind-of-descriptive-analysis-should-we-perform"><i class="fa fa-check"></i><b>18.2</b> What kind of descriptive analysis should we perform?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html"><i class="fa fa-check"></i><b>19</b> Numerical descriptions of categorical variables<span></span></a>
<ul>
<li class="chapter" data-level="19.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#factor-vectors"><i class="fa fa-check"></i><b>19.1</b> Factor vectors<span></span></a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-numeric-variable"><i class="fa fa-check"></i><b>19.1.1</b> Coerce a numeric variable<span></span></a></li>
<li class="chapter" data-level="19.1.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-character-variable"><i class="fa fa-check"></i><b>19.1.2</b> Coerce a character variable<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#height-and-weight-data"><i class="fa fa-check"></i><b>19.2</b> Height and Weight Data<span></span></a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#view-the-data"><i class="fa fa-check"></i><b>19.2.1</b> View the data<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-frequencies"><i class="fa fa-check"></i><b>19.3</b> Calculating frequencies<span></span></a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-base-r-table-function"><i class="fa fa-check"></i><b>19.3.1</b> The base R table function<span></span></a></li>
<li class="chapter" data-level="19.3.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-gmodels-crosstable-function"><i class="fa fa-check"></i><b>19.3.2</b> The gmodels CrossTable function<span></span></a></li>
<li class="chapter" data-level="19.3.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-tidyverse-way"><i class="fa fa-check"></i><b>19.3.3</b> The tidyverse way<span></span></a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-percentages"><i class="fa fa-check"></i><b>19.4</b> Calculating percentages<span></span></a></li>
<li class="chapter" data-level="19.5" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#cat-missing-data"><i class="fa fa-check"></i><b>19.5</b> Missing data<span></span></a></li>
<li class="chapter" data-level="19.6" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#formatting-results"><i class="fa fa-check"></i><b>19.6</b> Formatting results<span></span></a></li>
<li class="chapter" data-level="19.7" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#using-freqtables"><i class="fa fa-check"></i><b>19.7</b> Using freqtables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html"><i class="fa fa-check"></i><b>20</b> Measures of central tendency<span></span></a>
<ul>
<li class="chapter" data-level="20.1" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mean"><i class="fa fa-check"></i><b>20.1</b> Calculate the mean<span></span></a></li>
<li class="chapter" data-level="20.2" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-median"><i class="fa fa-check"></i><b>20.2</b> Calculate the median<span></span></a></li>
<li class="chapter" data-level="20.3" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mode"><i class="fa fa-check"></i><b>20.3</b> Calculate the mode<span></span></a></li>
<li class="chapter" data-level="20.4" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#compare-mean-median-and-mode"><i class="fa fa-check"></i><b>20.4</b> Compare mean, median, and mode<span></span></a></li>
<li class="chapter" data-level="20.5" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#data-checking"><i class="fa fa-check"></i><b>20.5</b> Data checking<span></span></a></li>
<li class="chapter" data-level="20.6" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#properties-of-mean-median-and-mode"><i class="fa fa-check"></i><b>20.6</b> Properties of mean, median, and mode<span></span></a></li>
<li class="chapter" data-level="20.7" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#na-rm"><i class="fa fa-check"></i><b>20.7</b> Missing data<span></span></a></li>
<li class="chapter" data-level="20.8" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#using-meantables"><i class="fa fa-check"></i><b>20.8</b> Using meantables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html"><i class="fa fa-check"></i><b>21</b> Measures of dispersion<span></span></a>
<ul>
<li class="chapter" data-level="21.1" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html#comparing-distributions"><i class="fa fa-check"></i><b>21.1</b> Comparing distributions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><i class="fa fa-check"></i><b>22</b> Describing the relationship between a continuous outcome and a continuous predictor<span></span></a>
<ul>
<li class="chapter" data-level="22.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#pearson-correlation-coefficient"><i class="fa fa-check"></i><b>22.1</b> Pearson Correlation Coefficient<span></span></a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#calculating-r"><i class="fa fa-check"></i><b>22.1.1</b> Calculating r<span></span></a></li>
<li class="chapter" data-level="22.1.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#correlation-intuition"><i class="fa fa-check"></i><b>22.1.2</b> Correlation intuition<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>23</b> Describing the relationship between a continuous outcome and a categorical predictor<span></span></a>
<ul>
<li class="chapter" data-level="23.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#single-predictor-and-single-outcome"><i class="fa fa-check"></i><b>23.1</b> Single predictor and single outcome<span></span></a></li>
<li class="chapter" data-level="23.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#multiple-predictors"><i class="fa fa-check"></i><b>23.2</b> Multiple predictors<span></span></a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>24</b> Describing the relationship between a categorical outcome and a categorical predictor<span></span></a>
<ul>
<li class="chapter" data-level="24.1" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html#comparing-two-variables"><i class="fa fa-check"></i><b>24.1</b> Comparing two variables<span></span></a></li>
</ul></li>
<li class="part"><span><b>V Data Management<span></span></b></span></li>
<li class="chapter" data-level="25" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html"><i class="fa fa-check"></i><b>25</b> Introduction to data management<span></span></a>
<ul>
<li class="chapter" data-level="25.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#multiple-paradigms-for-data-management-in-r"><i class="fa fa-check"></i><b>25.1</b> Multiple paradigms for data management in R<span></span></a></li>
<li class="chapter" data-level="25.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-package"><i class="fa fa-check"></i><b>25.2</b> The dplyr package<span></span></a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-verbs"><i class="fa fa-check"></i><b>25.2.1</b> The dplyr verbs<span></span></a></li>
<li class="chapter" data-level="25.2.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-.data-argument"><i class="fa fa-check"></i><b>25.2.2</b> The .data argument<span></span></a></li>
<li class="chapter" data-level="25.2.3" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-argument"><i class="fa fa-check"></i><b>25.2.3</b> The … argument<span></span></a></li>
<li class="chapter" data-level="25.2.4" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#non-standard-evaluation"><i class="fa fa-check"></i><b>25.2.4</b> Non-standard evaluation<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html"><i class="fa fa-check"></i><b>26</b> Creating and modifying columns<span></span></a>
<ul>
<li class="chapter" data-level="26.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#creating-data-frames"><i class="fa fa-check"></i><b>26.1</b> Creating data frames<span></span></a></li>
<li class="chapter" data-level="26.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#dollar-sign-notation-1"><i class="fa fa-check"></i><b>26.2</b> Dollar sign notation<span></span></a></li>
<li class="chapter" data-level="26.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#bracket-notation-1"><i class="fa fa-check"></i><b>26.3</b> Bracket notation<span></span></a></li>
<li class="chapter" data-level="26.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#modify-individual-values"><i class="fa fa-check"></i><b>26.4</b> Modify individual values<span></span></a></li>
<li class="chapter" data-level="26.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#the-mutate-function"><i class="fa fa-check"></i><b>26.5</b> The mutate() function<span></span></a>
<ul>
<li class="chapter" data-level="26.5.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-a-single-column"><i class="fa fa-check"></i><b>26.5.1</b> Adding or modifying a single column<span></span></a></li>
<li class="chapter" data-level="26.5.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#recycling-rules"><i class="fa fa-check"></i><b>26.5.2</b> Recycling rules<span></span></a></li>
<li class="chapter" data-level="26.5.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#using-existing-variables-in-name-value-pairs"><i class="fa fa-check"></i><b>26.5.3</b> Using existing variables in name-value pairs<span></span></a></li>
<li class="chapter" data-level="26.5.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-multiple-columns"><i class="fa fa-check"></i><b>26.5.4</b> Adding or modifying multiple columns<span></span></a></li>
<li class="chapter" data-level="26.5.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#rowwise-mutations"><i class="fa fa-check"></i><b>26.5.5</b> Rowwise mutations<span></span></a></li>
<li class="chapter" data-level="26.5.6" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#group_by-mutations"><i class="fa fa-check"></i><b>26.5.6</b> Group_by mutations<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html"><i class="fa fa-check"></i><b>27</b> Subsetting data frames<span></span></a>
<ul>
<li class="chapter" data-level="27.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-select-function"><i class="fa fa-check"></i><b>27.1</b> The select() function<span></span></a></li>
<li class="chapter" data-level="27.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-rename-function"><i class="fa fa-check"></i><b>27.2</b> The rename() function<span></span></a></li>
<li class="chapter" data-level="27.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-filter-function"><i class="fa fa-check"></i><b>27.3</b> The filter() function<span></span></a>
<ul>
<li class="chapter" data-level="27.3.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#subgroup-analysis"><i class="fa fa-check"></i><b>27.3.1</b> Subgroup analysis<span></span></a></li>
<li class="chapter" data-level="27.3.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-case-analysis"><i class="fa fa-check"></i><b>27.3.2</b> Complete case analysis<span></span></a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#deduplication"><i class="fa fa-check"></i><b>27.4</b> Deduplication<span></span></a>
<ul>
<li class="chapter" data-level="27.4.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-distinct-function"><i class="fa fa-check"></i><b>27.4.1</b> The distinct() function<span></span></a></li>
<li class="chapter" data-level="27.4.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-duplicate-row-add-tag"><i class="fa fa-check"></i><b>27.4.2</b> Complete duplicate row add tag<span></span></a></li>
<li class="chapter" data-level="27.4.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows"><i class="fa fa-check"></i><b>27.4.3</b> Partial duplicate rows<span></span></a></li>
<li class="chapter" data-level="27.4.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows---add-tag"><i class="fa fa-check"></i><b>27.4.4</b> Partial duplicate rows - add tag<span></span></a></li>
<li class="chapter" data-level="27.4.5" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#count-the-number-of-duplicates"><i class="fa fa-check"></i><b>27.4.5</b> Count the number of duplicates<span></span></a></li>
<li class="chapter" data-level="27.4.6" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#what-to-do-about-duplicates"><i class="fa fa-check"></i><b>27.4.6</b> What to do about duplicates<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="28" data-path="working-with-dates.html"><a href="working-with-dates.html"><i class="fa fa-check"></i><b>28</b> Working with dates<span></span></a>
<ul>
<li class="chapter" data-level="28.1" data-path="working-with-dates.html"><a href="working-with-dates.html#date-vector-types"><i class="fa fa-check"></i><b>28.1</b> Date vector types<span></span></a></li>
<li class="chapter" data-level="28.2" data-path="working-with-dates.html"><a href="working-with-dates.html#dates-under-the-hood"><i class="fa fa-check"></i><b>28.2</b> Dates under the hood<span></span></a></li>
<li class="chapter" data-level="28.3" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-date-times-to-dates"><i class="fa fa-check"></i><b>28.3</b> Coercing date-times to dates<span></span></a></li>
<li class="chapter" data-level="28.4" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-character-strings-to-dates"><i class="fa fa-check"></i><b>28.4</b> Coercing character strings to dates<span></span></a></li>
<li class="chapter" data-level="28.5" data-path="working-with-dates.html"><a href="working-with-dates.html#change-the-appearance-of-dates-with-format"><i class="fa fa-check"></i><b>28.5</b> Change the appearance of dates with format()<span></span></a></li>
<li class="chapter" data-level="28.6" data-path="working-with-dates.html"><a href="working-with-dates.html#some-useful-built-in-dates"><i class="fa fa-check"></i><b>28.6</b> Some useful built-in dates<span></span></a>
<ul>
<li class="chapter" data-level="28.6.1" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date"><i class="fa fa-check"></i><b>28.6.1</b> Today’s date<span></span></a></li>
<li class="chapter" data-level="28.6.2" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date-time"><i class="fa fa-check"></i><b>28.6.2</b> Today’s date-time<span></span></a></li>
<li class="chapter" data-level="28.6.3" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-full-month-names"><i class="fa fa-check"></i><b>28.6.3</b> Character vector of full month names<span></span></a></li>
<li class="chapter" data-level="28.6.4" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-abbreviated-month-names"><i class="fa fa-check"></i><b>28.6.4</b> Character vector of abbreviated month names<span></span></a></li>
<li class="chapter" data-level="28.6.5" data-path="working-with-dates.html"><a href="working-with-dates.html#creating-a-vector-containing-a-sequence-of-dates"><i class="fa fa-check"></i><b>28.6.5</b> Creating a vector containing a sequence of dates<span></span></a></li>
</ul></li>
<li class="chapter" data-level="28.7" data-path="working-with-dates.html"><a href="working-with-dates.html#calculating-date-intervals"><i class="fa fa-check"></i><b>28.7</b> Calculating date intervals<span></span></a>
<ul>
<li class="chapter" data-level="28.7.1" data-path="working-with-dates.html"><a href="working-with-dates.html#calculate-age-as-the-difference-in-time-between-dob-and-today"><i class="fa fa-check"></i><b>28.7.1</b> Calculate age as the difference in time between dob and today<span></span></a></li>
<li class="chapter" data-level="28.7.2" data-path="working-with-dates.html"><a href="working-with-dates.html#rounding-time-intervals"><i class="fa fa-check"></i><b>28.7.2</b> Rounding time intervals<span></span></a></li>
</ul></li>
<li class="chapter" data-level="28.8" data-path="working-with-dates.html"><a href="working-with-dates.html#extracting-out-date-parts"><i class="fa fa-check"></i><b>28.8</b> Extracting out date parts<span></span></a></li>
<li class="chapter" data-level="28.9" data-path="working-with-dates.html"><a href="working-with-dates.html#sorting-dates"><i class="fa fa-check"></i><b>28.9</b> Sorting dates<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html"><i class="fa fa-check"></i><b>29</b> Working with character strings<span></span></a>
<ul>
<li class="chapter" data-level="29.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#coerce-to-lowercase"><i class="fa fa-check"></i><b>29.1</b> Coerce to lowercase<span></span></a>
<ul>
<li class="chapter" data-level="29.1.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#lowercase"><i class="fa fa-check"></i><b>29.1.1</b> Lowercase<span></span></a></li>
<li class="chapter" data-level="29.1.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#upper-case"><i class="fa fa-check"></i><b>29.1.2</b> Upper case<span></span></a></li>
<li class="chapter" data-level="29.1.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#title-case"><i class="fa fa-check"></i><b>29.1.3</b> Title case<span></span></a></li>
<li class="chapter" data-level="29.1.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#sentence-case"><i class="fa fa-check"></i><b>29.1.4</b> Sentence case<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#trim-white-space"><i class="fa fa-check"></i><b>29.2</b> Trim white space<span></span></a></li>
<li class="chapter" data-level="29.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#regular-expressions"><i class="fa fa-check"></i><b>29.3</b> Regular expressions<span></span></a>
<ul>
<li class="chapter" data-level="29.3.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-the-comma"><i class="fa fa-check"></i><b>29.3.1</b> Remove the comma<span></span></a></li>
<li class="chapter" data-level="29.3.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-middle-initial"><i class="fa fa-check"></i><b>29.3.2</b> Remove middle initial<span></span></a></li>
<li class="chapter" data-level="29.3.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-double-spaces"><i class="fa fa-check"></i><b>29.3.3</b> Remove double spaces<span></span></a></li>
</ul></li>
<li class="chapter" data-level="29.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#separate-values-into-component-parts"><i class="fa fa-check"></i><b>29.4</b> Separate values into component parts<span></span></a></li>
<li class="chapter" data-level="29.5" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#dummy-variables"><i class="fa fa-check"></i><b>29.5</b> Dummy variables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="conditional-operations.html"><a href="conditional-operations.html"><i class="fa fa-check"></i><b>30</b> Conditional operations<span></span></a>
<ul>
<li class="chapter" data-level="30.1" data-path="conditional-operations.html"><a href="conditional-operations.html#operands-and-operators"><i class="fa fa-check"></i><b>30.1</b> Operands and operators<span></span></a></li>
<li class="chapter" data-level="30.2" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-multiple-conditions-simultaneously"><i class="fa fa-check"></i><b>30.2</b> Testing multiple conditions simultaneously<span></span></a></li>
<li class="chapter" data-level="30.3" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-a-sequence-of-conditions"><i class="fa fa-check"></i><b>30.3</b> Testing a sequence of conditions<span></span></a></li>
<li class="chapter" data-level="30.4" data-path="conditional-operations.html"><a href="conditional-operations.html#recoding-variables"><i class="fa fa-check"></i><b>30.4</b> Recoding variables<span></span></a></li>
<li class="chapter" data-level="30.5" data-path="conditional-operations.html"><a href="conditional-operations.html#case_when-is-lazy"><i class="fa fa-check"></i><b>30.5</b> case_when() is lazy<span></span></a></li>
<li class="chapter" data-level="30.6" data-path="conditional-operations.html"><a href="conditional-operations.html#recode-missing"><i class="fa fa-check"></i><b>30.6</b> Recode missing<span></span></a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html"><i class="fa fa-check"></i><b>31</b> Working with multiple data frames<span></span></a>
<ul>
<li class="chapter" data-level="31.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-vertically-adding-rows"><i class="fa fa-check"></i><b>31.1</b> Combining data frames vertically: Adding rows<span></span></a>
<ul>
<li class="chapter" data-level="31.1.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-more-than-2-data-frames"><i class="fa fa-check"></i><b>31.1.1</b> Combining more than 2 data frames<span></span></a></li>
<li class="chapter" data-level="31.1.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#adding-rows-with-differing-columns"><i class="fa fa-check"></i><b>31.1.2</b> Adding rows with differing columns<span></span></a></li>
<li class="chapter" data-level="31.1.3" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-positions"><i class="fa fa-check"></i><b>31.1.3</b> Differing column positions<span></span></a></li>
<li class="chapter" data-level="31.1.4" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-names"><i class="fa fa-check"></i><b>31.1.4</b> Differing column names<span></span></a></li>
</ul></li>
<li class="chapter" data-level="31.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-adding-columns"><i class="fa fa-check"></i><b>31.2</b> Combining data frames horizontally: Adding columns<span></span></a>
<ul>
<li class="chapter" data-level="31.2.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-position"><i class="fa fa-check"></i><b>31.2.1</b> Combining data frames horizontally by position<span></span></a></li>
<li class="chapter" data-level="31.2.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-key-values"><i class="fa fa-check"></i><b>31.2.2</b> Combining data frames horizontally by key values<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="32" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html"><i class="fa fa-check"></i><b>32</b> Restructuring data frames<span></span></a>
<ul>
<li class="chapter" data-level="32.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-tidyr-package"><i class="fa fa-check"></i><b>32.1</b> The tidyr package<span></span></a></li>
<li class="chapter" data-level="32.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-longer"><i class="fa fa-check"></i><b>32.2</b> Pivoting longer<span></span></a>
<ul>
<li class="chapter" data-level="32.2.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_to-argument"><i class="fa fa-check"></i><b>32.2.1</b> The names_to argument<span></span></a></li>
<li class="chapter" data-level="32.2.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_prefix-argument"><i class="fa fa-check"></i><b>32.2.2</b> The names_prefix argument<span></span></a></li>
<li class="chapter" data-level="32.2.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-values_to-argument"><i class="fa fa-check"></i><b>32.2.3</b> The values_to argument<span></span></a></li>
<li class="chapter" data-level="32.2.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_transform-argument"><i class="fa fa-check"></i><b>32.2.4</b> The names_transform argument<span></span></a></li>
<li class="chapter" data-level="32.2.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-multiple-sets-of-columns"><i class="fa fa-check"></i><b>32.2.5</b> Pivoting multiple sets of columns<span></span></a></li>
<li class="chapter" data-level="32.2.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_sep-argument"><i class="fa fa-check"></i><b>32.2.6</b> The names_sep argument<span></span></a></li>
<li class="chapter" data-level="32.2.7" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-.value-special-value"><i class="fa fa-check"></i><b>32.2.7</b> The .value special value<span></span></a></li>
<li class="chapter" data-level="32.2.8" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-period"><i class="fa fa-check"></i><b>32.2.8</b> Why person-period?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-wider"><i class="fa fa-check"></i><b>32.3</b> Pivoting wider<span></span></a>
<ul>
<li class="chapter" data-level="32.3.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-level"><i class="fa fa-check"></i><b>32.3.1</b> Why person-level?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics"><i class="fa fa-check"></i><b>32.4</b> Pivoting summary statistics<span></span></a>
<ul>
<li class="chapter" data-level="32.4.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-wide-to-long"><i class="fa fa-check"></i><b>32.4.1</b> Pivoting summary statistics wide to long<span></span></a></li>
<li class="chapter" data-level="32.4.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-long-to-wide"><i class="fa fa-check"></i><b>32.4.2</b> Pivoting summary statistics long to wide<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#tidy-data"><i class="fa fa-check"></i><b>32.5</b> Tidy data<span></span></a>
<ul>
<li class="chapter" data-level="32.5.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-variable-must-have-its-own-column"><i class="fa fa-check"></i><b>32.5.1</b> Each variable must have its own column<span></span></a></li>
<li class="chapter" data-level="32.5.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-observation-must-have-its-own-row"><i class="fa fa-check"></i><b>32.5.2</b> Each observation must have its own row<span></span></a></li>
<li class="chapter" data-level="32.5.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-value-must-have-its-own-cell"><i class="fa fa-check"></i><b>32.5.3</b> Each value must have its own cell<span></span></a></li>
</ul></li>
<li class="chapter" data-level="32.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-complete-function"><i class="fa fa-check"></i><b>32.6</b> The complete() function<span></span></a></li>
</ul></li>
<li class="part"><span><b>VI Repeated Operations<span></span></b></span></li>
<li class="chapter" data-level="33" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html"><i class="fa fa-check"></i><b>33</b> Introduction to repeated operations<span></span></a>
<ul>
<li class="chapter" data-level="33.1" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#multiple-methods-for-repeated-operations-in-r"><i class="fa fa-check"></i><b>33.1</b> Multiple methods for repeated operations in R<span></span></a></li>
<li class="chapter" data-level="33.2" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#tidy-evaluation"><i class="fa fa-check"></i><b>33.2</b> Tidy evaluation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>34</b> Writing functions<span></span></a>
<ul>
<li class="chapter" data-level="34.1" data-path="writing-functions.html"><a href="writing-functions.html#when-to-write-functions"><i class="fa fa-check"></i><b>34.1</b> When to write functions<span></span></a></li>
<li class="chapter" data-level="34.2" data-path="writing-functions.html"><a href="writing-functions.html#how-to-write-functions"><i class="fa fa-check"></i><b>34.2</b> How to write functions<span></span></a>
<ul>
<li class="chapter" data-level="34.2.1" data-path="writing-functions.html"><a href="writing-functions.html#the-function-function"><i class="fa fa-check"></i><b>34.2.1</b> The function() function<span></span></a></li>
<li class="chapter" data-level="34.2.2" data-path="writing-functions.html"><a href="writing-functions.html#the-function-writing-process"><i class="fa fa-check"></i><b>34.2.2</b> The function writing process<span></span></a></li>
</ul></li>
<li class="chapter" data-level="34.3" data-path="writing-functions.html"><a href="writing-functions.html#giving-your-function-arguments-default-values"><i class="fa fa-check"></i><b>34.3</b> Giving your function arguments default values<span></span></a></li>
<li class="chapter" data-level="34.4" data-path="writing-functions.html"><a href="writing-functions.html#the-values-your-functions-return"><i class="fa fa-check"></i><b>34.4</b> The values your functions return<span></span></a></li>
<li class="chapter" data-level="34.5" data-path="writing-functions.html"><a href="writing-functions.html#lexical-scoping-and-functions"><i class="fa fa-check"></i><b>34.5</b> Lexical scoping and functions<span></span></a></li>
<li class="chapter" data-level="34.6" data-path="writing-functions.html"><a href="writing-functions.html#tidy-evaluation-1"><i class="fa fa-check"></i><b>34.6</b> Tidy evaluation<span></span></a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html"><i class="fa fa-check"></i><b>35</b> Column-wise operations in dplyr<span></span></a>
<ul>
<li class="chapter" data-level="35.1" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#the-across-function"><i class="fa fa-check"></i><b>35.1</b> The across() function<span></span></a></li>
<li class="chapter" data-level="35.2" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-mutate"><i class="fa fa-check"></i><b>35.2</b> Across with mutate<span></span></a></li>
<li class="chapter" data-level="35.3" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-summarise"><i class="fa fa-check"></i><b>35.3</b> Across with summarise<span></span></a></li>
<li class="chapter" data-level="35.4" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-filter"><i class="fa fa-check"></i><b>35.4</b> Across with filter<span></span></a></li>
<li class="chapter" data-level="35.5" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#summary-2"><i class="fa fa-check"></i><b>35.5</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="writing-for-loops.html"><a href="writing-for-loops.html"><i class="fa fa-check"></i><b>36</b> Writing for loops<span></span></a>
<ul>
<li class="chapter" data-level="36.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#how-to-write-for-loops"><i class="fa fa-check"></i><b>36.1</b> How to write for loops<span></span></a>
<ul>
<li class="chapter" data-level="36.1.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-loop-body"><i class="fa fa-check"></i><b>36.1.1</b> The for loop body<span></span></a></li>
<li class="chapter" data-level="36.1.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-function"><i class="fa fa-check"></i><b>36.1.2</b> The for() function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="36.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-transfer"><i class="fa fa-check"></i><b>36.2</b> Using for loops for data transfer<span></span></a></li>
<li class="chapter" data-level="36.3" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-management"><i class="fa fa-check"></i><b>36.3</b> Using for loops for data management<span></span></a></li>
<li class="chapter" data-level="36.4" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-analysis"><i class="fa fa-check"></i><b>36.4</b> Using for loops for analysis<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html"><i class="fa fa-check"></i><b>37</b> Using the purrr package<span></span></a>
<ul>
<li class="chapter" data-level="37.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#comparing-for-loops-and-the-map-functions"><i class="fa fa-check"></i><b>37.1</b> Comparing for loops and the map functions<span></span></a></li>
<li class="chapter" data-level="37.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-transfer"><i class="fa fa-check"></i><b>37.2</b> Using purrr for data transfer<span></span></a>
<ul>
<li class="chapter" data-level="37.2.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-importing-multiple-sheets-from-an-excel-workbook"><i class="fa fa-check"></i><b>37.2.1</b> Example 1: Importing multiple sheets from an Excel workbook<span></span></a></li>
<li class="chapter" data-level="37.2.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-walk-instead-of-map"><i class="fa fa-check"></i><b>37.2.2</b> Why walk instead of map?<span></span></a></li>
<li class="chapter" data-level="37.2.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-we-didnt-assign-the-return-value-of-walk-to-an-object"><i class="fa fa-check"></i><b>37.2.3</b> why we didn’t assign the return value of <code>walk()</code> to an object?<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-management"><i class="fa fa-check"></i><b>37.3</b> Using purrr for data management<span></span></a>
<ul>
<li class="chapter" data-level="37.3.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-adding-na-at-multiple-positions"><i class="fa fa-check"></i><b>37.3.1</b> Example 1: Adding NA at multiple positions<span></span></a></li>
<li class="chapter" data-level="37.3.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2.-detecting-matching-values-by-position"><i class="fa fa-check"></i><b>37.3.2</b> Example 2. Detecting matching values by position<span></span></a></li>
</ul></li>
<li class="chapter" data-level="37.4" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-analysis"><i class="fa fa-check"></i><b>37.4</b> Using purrr for analysis<span></span></a>
<ul>
<li class="chapter" data-level="37.4.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-continuous-statistics"><i class="fa fa-check"></i><b>37.4.1</b> Example 1: Continuous statistics<span></span></a></li>
<li class="chapter" data-level="37.4.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2-categorical-statistics"><i class="fa fa-check"></i><b>37.4.2</b> Example 2: Categorical statistics<span></span></a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Collaboration<span></span></b></span></li>
<li class="chapter" data-level="38" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html"><i class="fa fa-check"></i><b>38</b> Introduction to git and GitHub<span></span></a>
<ul>
<li class="chapter" data-level="38.1" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#versioning"><i class="fa fa-check"></i><b>38.1</b> Versioning<span></span></a></li>
<li class="chapter" data-level="38.2" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#preservation"><i class="fa fa-check"></i><b>38.2</b> Preservation<span></span></a></li>
<li class="chapter" data-level="38.3" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#reproducibility"><i class="fa fa-check"></i><b>38.3</b> Reproducibility<span></span></a></li>
<li class="chapter" data-level="38.4" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#collaboration"><i class="fa fa-check"></i><b>38.4</b> Collaboration<span></span></a></li>
<li class="chapter" data-level="38.5" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#summary-3"><i class="fa fa-check"></i><b>38.5</b> Summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39" data-path="using-git-and-github.html"><a href="using-git-and-github.html"><i class="fa fa-check"></i><b>39</b> Using git and GitHub<span></span></a>
<ul>
<li class="chapter" data-level="39.1" data-path="using-git-and-github.html"><a href="using-git-and-github.html#install-git"><i class="fa fa-check"></i><b>39.1</b> Install git<span></span></a></li>
<li class="chapter" data-level="39.2" data-path="using-git-and-github.html"><a href="using-git-and-github.html#sign-up-for-a-github-account"><i class="fa fa-check"></i><b>39.2</b> Sign up for a GitHub account<span></span></a></li>
<li class="chapter" data-level="39.3" data-path="using-git-and-github.html"><a href="using-git-and-github.html#install-gitkraken"><i class="fa fa-check"></i><b>39.3</b> Install GitKraken<span></span></a></li>
<li class="chapter" data-level="39.4" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-1-contribute-to-r4epi"><i class="fa fa-check"></i><b>39.4</b> Example 1: Contribute to R4Epi<span></span></a></li>
<li class="chapter" data-level="39.5" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-2-create-a-repository-for-a-research-project"><i class="fa fa-check"></i><b>39.5</b> Example 2: Create a repository for a research project<span></span></a>
<ul>
<li><a href="using-git-and-github.html#step-1-create-a-repository-on-github">Step 1: Create a repository on GitHub<span></span></a></li>
<li><a href="using-git-and-github.html#step-2-clone-the-repository-to-your-computer">Step 2: Clone the repository to your computer<span></span></a></li>
<li><a href="using-git-and-github.html#step-3-add-an-r-project-file-to-the-repository">Step 3: Add an R project file to the repository<span></span></a></li>
<li><a href="using-git-and-github.html#step-4-update-and-commit-gitignore">Step 4: Update and commit gitignore<span></span></a></li>
<li><a href="using-git-and-github.html#step-5-keep-adding-and-committing-files">Step 5: Keep adding and committing files<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39.6" data-path="using-git-and-github.html"><a href="using-git-and-github.html#committing-and-pushing"><i class="fa fa-check"></i><b>39.6</b> Committing and pushing<span></span></a></li>
<li class="chapter" data-level="39.7" data-path="using-git-and-github.html"><a href="using-git-and-github.html#example-3-contribute-to-a-research-project"><i class="fa fa-check"></i><b>39.7</b> Example 3: Contribute to a research project<span></span></a>
<ul>
<li class="chapter" data-level="39.7.1" data-path="using-git-and-github.html"><a href="using-git-and-github.html#forking-a-repository"><i class="fa fa-check"></i><b>39.7.1</b> Forking a repository<span></span></a></li>
<li class="chapter" data-level="39.7.2" data-path="using-git-and-github.html"><a href="using-git-and-github.html#creating-a-pull-request"><i class="fa fa-check"></i><b>39.7.2</b> Creating a pull request<span></span></a></li>
</ul></li>
<li class="chapter" data-level="39.8" data-path="using-git-and-github.html"><a href="using-git-and-github.html#summary-4"><i class="fa fa-check"></i><b>39.8</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>VIII Presenting Results<span></span></b></span></li>
<li class="chapter" data-level="40" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html"><i class="fa fa-check"></i><b>40</b> Creating tables with R and Microsoft Word<span></span></a>
<ul>
<li class="chapter" data-level="40.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-1"><i class="fa fa-check"></i><b>40.1</b> Table 1<span></span></a></li>
<li class="chapter" data-level="40.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#opioid-drug-use"><i class="fa fa-check"></i><b>40.2</b> Opioid drug use<span></span></a></li>
<li class="chapter" data-level="40.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-columns"><i class="fa fa-check"></i><b>40.3</b> Table columns<span></span></a></li>
<li class="chapter" data-level="40.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-rows"><i class="fa fa-check"></i><b>40.4</b> Table rows<span></span></a></li>
<li class="chapter" data-level="40.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#make-the-table-skeleton"><i class="fa fa-check"></i><b>40.5</b> Make the table skeleton<span></span></a></li>
<li class="chapter" data-level="40.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-column-headers"><i class="fa fa-check"></i><b>40.6</b> Fill in column headers<span></span></a>
<ul>
<li class="chapter" data-level="40.6.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#group-sample-sizes"><i class="fa fa-check"></i><b>40.6.1</b> Group sample sizes<span></span></a></li>
<li class="chapter" data-level="40.6.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-column-headers"><i class="fa fa-check"></i><b>40.6.2</b> Formatting column headers<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.7" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-row-headers"><i class="fa fa-check"></i><b>40.7</b> Fill in row headers<span></span></a>
<ul>
<li class="chapter" data-level="40.7.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#label-statistics"><i class="fa fa-check"></i><b>40.7.1</b> Label statistics<span></span></a></li>
<li class="chapter" data-level="40.7.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-row-headers"><i class="fa fa-check"></i><b>40.7.2</b> Formatting row headers<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.8" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-data-values"><i class="fa fa-check"></i><b>40.8</b> Fill in data values<span></span></a>
<ul>
<li class="chapter" data-level="40.8.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#manually-type-values"><i class="fa fa-check"></i><b>40.8.1</b> Manually type values<span></span></a></li>
<li class="chapter" data-level="40.8.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#copy-and-paste-values"><i class="fa fa-check"></i><b>40.8.2</b> Copy and paste values<span></span></a></li>
<li class="chapter" data-level="40.8.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#knit-a-word-document"><i class="fa fa-check"></i><b>40.8.3</b> Knit a Word document<span></span></a></li>
<li class="chapter" data-level="40.8.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#flextable-and-officer"><i class="fa fa-check"></i><b>40.8.4</b> flextable and officer<span></span></a></li>
<li class="chapter" data-level="40.8.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#significant-digits"><i class="fa fa-check"></i><b>40.8.5</b> Significant digits<span></span></a></li>
<li class="chapter" data-level="40.8.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-data-values"><i class="fa fa-check"></i><b>40.8.6</b> Formatting data values<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.9" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-title"><i class="fa fa-check"></i><b>40.9</b> Fill in title<span></span></a></li>
<li class="chapter" data-level="40.10" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-footnotes"><i class="fa fa-check"></i><b>40.10</b> Fill in footnotes<span></span></a>
<ul>
<li class="chapter" data-level="40.10.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-footnotes"><i class="fa fa-check"></i><b>40.10.1</b> Formatting footnotes<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.11" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#final-formatting"><i class="fa fa-check"></i><b>40.11</b> Final formatting<span></span></a>
<ul>
<li class="chapter" data-level="40.11.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#adjust-column-widths"><i class="fa fa-check"></i><b>40.11.1</b> Adjust column widths<span></span></a></li>
<li class="chapter" data-level="40.11.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#merge-cells"><i class="fa fa-check"></i><b>40.11.2</b> Merge cells<span></span></a></li>
<li class="chapter" data-level="40.11.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#remove-cell-borders"><i class="fa fa-check"></i><b>40.11.3</b> Remove cell borders<span></span></a></li>
</ul></li>
<li class="chapter" data-level="40.12" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#summary-5"><i class="fa fa-check"></i><b>40.12</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>IX Introduction to Epidemiology<span></span></b></span></li>
<li class="chapter" data-level="41" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html"><i class="fa fa-check"></i><b>41</b> Introduction to Epidemiology<span></span></a>
<ul>
<li class="chapter" data-level="41.1" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#measurement"><i class="fa fa-check"></i><b>41.1</b> Measurement<span></span></a></li>
<li class="chapter" data-level="41.2" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#uncertainty"><i class="fa fa-check"></i><b>41.2</b> Uncertainty<span></span></a></li>
<li class="chapter" data-level="41.3" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#summary-6"><i class="fa fa-check"></i><b>41.3</b> Summary<span></span></a></li>
</ul></li>
<li class="part"><span><b>X Appendix<span></span></b></span></li>
<li><a href="appendix-a-glossary.html#appendix-a-glossary">Appendix A: Glossary<span></span></a></li>
<li><a href="appendix-alternative-table-formats.html#appendix-alternative-table-formats">Appendix: Alternative table formats<span></span></a>
<ul>
<li class="chapter" data-level="41.4" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html"><i class="fa fa-check"></i><b>41.4</b> Smaller data frame<span></span></a>
<ul>
<li class="chapter" data-level="41.4.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen"><i class="fa fa-check"></i><b>41.4.1</b> Default method for printing the data frame to the screen<span></span></a></li>
<li class="chapter" data-level="41.4.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function"><i class="fa fa-check"></i><b>41.4.2</b> Using the kable function<span></span></a></li>
<li class="chapter" data-level="41.4.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function"><i class="fa fa-check"></i><b>41.4.3</b> Using the datatable function<span></span></a></li>
</ul></li>
<li class="chapter" data-level="41.5" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#larger-data-frame"><i class="fa fa-check"></i><b>41.5</b> Larger data frame<span></span></a>
<ul>
<li class="chapter" data-level="41.5.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen-1"><i class="fa fa-check"></i><b>41.5.1</b> Default method for printing the data frame to the screen<span></span></a></li>
<li class="chapter" data-level="41.5.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function-1"><i class="fa fa-check"></i><b>41.5.2</b> Using the kable function<span></span></a></li>
<li class="chapter" data-level="41.5.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function-1"><i class="fa fa-check"></i><b>41.5.3</b> Using the datatable function<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Epidemiology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="conditional-operations" class="section level1 hasAnchor" number="30">
<h1><span class="header-section-number">30</span> Conditional operations<a href="conditional-operations.html#conditional-operations" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!--
- if_else()
- case_when()
- Different than ifelse()
- Different than if {} else {} - not vectorized
- Missing data - see script.
-->
<p>There will often be times that we want to modify the values in one column of our data based on the values in one or more other columns in our data. For example, maybe we want to create a column that contains the region of the country someone is from, based on another column that contains the state they are from.</p>
<p><img src="img/05_part_data_management/06_conditional_processing/values.png" width="900" /></p>
<p>We don’t really have a way to do this with the tools we currently have in our toolbox. We can manually type out all the region values, but that isn’t very scalable. Wouldn’t it be nice if we could just give R some rules, or conditions (e.g., TX is in the South, CA is in the West), and have R fill in the region values for us? Well, that’s exactly what we are going to learn how to do in this chapter.</p>
<p><img src="img/05_part_data_management/06_conditional_processing/conditions.png" width="900" /></p>
<p>These kinds of operations are called conditional operations because we type in a set of conditions, R evaluates those conditions, and then executes a different process or procedure based on whether or not the condition is met.</p>
<p>As a silly example, let’s say that I want my daughter to wear a raincoat if it’s raining outside, but I don’t want her to wear a raincoat if it is not raining outside. So, I give her a conditional request: “If it’s raining outside, then make sure to wear your raincoat, please. Otherwise, please don’t wear your raincoat.”</p>
<p><img src="img/05_part_data_management/06_conditional_processing/rain.png" width="900" /></p>
<p>In this hypothetical scenario, she then says, “yes, dad,” and goes to the window to see if it’s raining. She either puts on, or does not put on, her raincoat depending on whether or not the condition (raining) is met.</p>
<p>Just like I have to ask my daughter to put on a raincoat using conditional logic, I sometimes have to ask R to execute commands using conditional logic, and I have to do so in a way that R understands. One such form is <code>dplyr</code>’s <code>if_else()</code> function. Let’s go ahead and take a look at an example now:</p>
<div class="sourceCode" id="cb742"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb742-1"><a href="conditional-operations.html#cb742-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<div class="sourceCode" id="cb743"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb743-1"><a href="conditional-operations.html#cb743-1" aria-hidden="true" tabindex="-1"></a>rainy_days <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb743-2"><a href="conditional-operations.html#cb743-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">day     =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb743-3"><a href="conditional-operations.html#cb743-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">weather =</span> <span class="fu">c</span>(<span class="st">&quot;rain&quot;</span>, <span class="st">&quot;rain&quot;</span>, <span class="st">&quot;no rain&quot;</span>, <span class="st">&quot;rain&quot;</span>, <span class="st">&quot;no rain&quot;</span>)</span>
<span id="cb743-4"><a href="conditional-operations.html#cb743-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb743-5"><a href="conditional-operations.html#cb743-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##     day weather
##   &lt;int&gt; &lt;chr&gt;  
## 1     1 rain   
## 2     2 rain   
## 3     3 no rain
## 4     4 rain   
## 5     5 no rain</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We simulated some data that contains information about whether or not it rained on each of 5 days.</li>
</ul>
<p>Now, let’s say that we want to create a new column in our data frame called <code>raincoat</code>. We want the value of <code>raincoat</code> to be <code>wear</code> on rainy days and <code>no wear</code> on days when it isn’t raining. Here’s how we can do that with the if_else() function:</p>
<div class="sourceCode" id="cb745"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb745-1"><a href="conditional-operations.html#cb745-1" aria-hidden="true" tabindex="-1"></a>rainy_days <span class="sc">%&gt;%</span> </span>
<span id="cb745-2"><a href="conditional-operations.html#cb745-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb745-3"><a href="conditional-operations.html#cb745-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">raincoat =</span> <span class="fu">if_else</span>(</span>
<span id="cb745-4"><a href="conditional-operations.html#cb745-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">condition =</span> weather <span class="sc">==</span> <span class="st">&quot;rain&quot;</span>, </span>
<span id="cb745-5"><a href="conditional-operations.html#cb745-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">true      =</span> <span class="st">&quot;wear&quot;</span>, </span>
<span id="cb745-6"><a href="conditional-operations.html#cb745-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">false     =</span> <span class="st">&quot;no wear&quot;</span></span>
<span id="cb745-7"><a href="conditional-operations.html#cb745-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb745-8"><a href="conditional-operations.html#cb745-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##     day weather raincoat
##   &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;   
## 1     1 rain    wear    
## 2     2 rain    wear    
## 3     3 no rain no wear 
## 4     4 rain    wear    
## 5     5 no rain no wear</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>if_else()</code> function to assign the values <code>wear</code> and <code>no wear</code> to the column <code>raincoat</code> conditional on the values in each row of the <code>weather</code> column.</p></li>
<li><p>You can type <code>?if_else</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>if_else()</code> function is the <code>condition</code> argument. The condition should typically be composed of a series of operands and operators (we’ll talk more about these soon) that tell R the condition(s) that we want it to test. For example, is the value of <code>weather</code> equal to <code>rain</code>?</p></li>
<li><p>The second argument to the <code>if_else()</code> function is the <code>true</code> argument. The value passed to the <code>true</code> argument tells R what value the <code>if_else()</code> function should return when the condition is <code>TRUE</code>. In this case, we told <code>if_else()</code> to return the character value <code>wear</code>.</p></li>
<li><p>The third argument to the <code>if_else()</code> function is the <code>false</code> argument. The value passed to the <code>false</code> argument tells R what value the <code>if_else()</code> function should return when the condition is <code>FALSE</code>. In this case, we told <code>if_else()</code> to return the character value <code>no wear</code>.</p></li>
<li><p>Finally, we assigned all the values returned by the <code>if_else()</code> function to a new column that we named <code>raincoat</code>.</p></li>
</ul>
<p class="note">
🗒<strong>Side Note:</strong> For the rest of the book, I will pass values to the <code>if_else()</code> function by position instead of name. In other words, I won’t write <code>condition =</code>, <code>true =</code>, or <code>false =</code> anymore. However, the first value passed to the <code>if_else()</code> function will always be passed to the <code>condition</code> argument, the second value will always be passed to the <code>true</code> argument, and the third value will always be passed to the <code>false</code> argument.
</p>
<p>Before moving on, let’s dive into this a little further. R must always be able to reduce whatever value we pass to the <code>condition</code> argument of <code>if_else()</code> to TRUE or FALSE. That’s how R views any expression we pass to the <code>condition</code> argument. We can literally even pass the value <code>TRUE</code> or the value <code>FALSE</code> (not that doing so has much practical application):</p>
<div class="sourceCode" id="cb747"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb747-1"><a href="conditional-operations.html#cb747-1" aria-hidden="true" tabindex="-1"></a><span class="fu">if_else</span>(<span class="cn">TRUE</span>, <span class="st">&quot;wear&quot;</span>, <span class="st">&quot;no wear&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;wear&quot;</code></pre>
<p>Because the value passed to the <code>condition</code> argument is <code>TRUE</code> (in this case, literally), the <code>if_else()</code> function returns the value <code>wear</code>. What happens if we use this code to assign values to the <code>raincoat</code> column?</p>
<div class="sourceCode" id="cb749"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb749-1"><a href="conditional-operations.html#cb749-1" aria-hidden="true" tabindex="-1"></a>rainy_days <span class="sc">%&gt;%</span> </span>
<span id="cb749-2"><a href="conditional-operations.html#cb749-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb749-3"><a href="conditional-operations.html#cb749-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">raincoat =</span> <span class="fu">if_else</span>(<span class="cn">TRUE</span>, <span class="st">&quot;wear&quot;</span>, <span class="st">&quot;no wear&quot;</span>)</span>
<span id="cb749-4"><a href="conditional-operations.html#cb749-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##     day weather raincoat
##   &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;   
## 1     1 rain    wear    
## 2     2 rain    wear    
## 3     3 no rain wear    
## 4     4 rain    wear    
## 5     5 no rain wear</code></pre>
<p>Again, the <code>if_else()</code> function returns the value <code>wear</code> because the value passed to the <code>condition</code> argument is <code>TRUE</code>. Then, R uses its recycling rules to copy the value <code>wear</code> to every row of the <code>raincoat</code> column. What would do you think will happen if we pass the value <code>FALSE</code> to the <code>condition</code> argument instead?</p>
<div class="sourceCode" id="cb751"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb751-1"><a href="conditional-operations.html#cb751-1" aria-hidden="true" tabindex="-1"></a>rainy_days <span class="sc">%&gt;%</span> </span>
<span id="cb751-2"><a href="conditional-operations.html#cb751-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb751-3"><a href="conditional-operations.html#cb751-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">raincoat =</span> <span class="fu">if_else</span>(<span class="cn">FALSE</span>, <span class="st">&quot;wear&quot;</span>, <span class="st">&quot;no wear&quot;</span>)</span>
<span id="cb751-4"><a href="conditional-operations.html#cb751-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##     day weather raincoat
##   &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;   
## 1     1 rain    no wear 
## 2     2 rain    no wear 
## 3     3 no rain no wear 
## 4     4 rain    no wear 
## 5     5 no rain no wear</code></pre>
<p>Hopefully, that was the result you expected. The <code>if_else()</code> function returns the value <code>no wear</code> because the value passed to the <code>condition</code> argument is <code>FALSE</code>. Then, R uses its recycling rules to copy the value <code>no wear</code> to every row of the <code>raincoat</code> column.</p>
<p>We can take this a step further and actually pass a vector of logical (<code>TRUE</code>/<code>FALSE</code>) values to the <code>condition</code> argument. For example:</p>
<div class="sourceCode" id="cb753"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb753-1"><a href="conditional-operations.html#cb753-1" aria-hidden="true" tabindex="-1"></a>rainy_days <span class="sc">%&gt;%</span> </span>
<span id="cb753-2"><a href="conditional-operations.html#cb753-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb753-3"><a href="conditional-operations.html#cb753-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">raincoat =</span> <span class="fu">if_else</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>), <span class="st">&quot;wear&quot;</span>, <span class="st">&quot;no wear&quot;</span>)</span>
<span id="cb753-4"><a href="conditional-operations.html#cb753-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##     day weather raincoat
##   &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;   
## 1     1 rain    wear    
## 2     2 rain    wear    
## 3     3 no rain no wear 
## 4     4 rain    wear    
## 5     5 no rain no wear</code></pre>
<p>In reality, that’s sort of what we did in the very first <code>if_else()</code> example above. But, instead of typing the values manually, we used an expression that returned a vector of logical values. Specifically, we used the equality operator (<code>==</code>) to check whether or not each value in the <code>weather</code> column was equal to the value “rain” or not.</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb755-1"><a href="conditional-operations.html#cb755-1" aria-hidden="true" tabindex="-1"></a>rainy_days<span class="sc">$</span>weather <span class="sc">==</span> <span class="st">&quot;rain&quot;</span></span></code></pre></div>
<pre><code>## [1]  TRUE  TRUE FALSE  TRUE FALSE</code></pre>
<p>That pretty much covers the basics of how the <code>if_else()</code> function works. Next, let’s take a look at some of the different combinations of operands and operators that we can combine and pass to the <code>condition</code> argument of the <code>if_else()</code> function.</p>
<div id="operands-and-operators" class="section level2 hasAnchor" number="30.1">
<h2><span class="header-section-number">30.1</span> Operands and operators<a href="conditional-operations.html#operands-and-operators" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s start by taking a look at some commonly used operands:</p>
<p><img src="img/05_part_data_management/06_conditional_processing/operands.png" width="900" /></p>
<p>As you can see in the table above, operands are the <em>values</em> we want to check, or test. Operands can be variables or they can be individual values (also called constants). The example above (<code>weather == "rain"</code>) contained two operands; the variable <code>weather</code> and the character constant <code>"rain"</code>. The operator we used in this case was the equality operator (<code>==</code>). Next, let’s take a look at some other commonly used operators.</p>
<p><img src="img/05_part_data_management/06_conditional_processing/comparison-numeric.png" width="900" /></p>
<p><img src="img/05_part_data_management/06_conditional_processing/comparison-character.png" width="900" /></p>
<p><img src="img/05_part_data_management/06_conditional_processing/arithmetic.png" width="900" /></p>
<p><img src="img/05_part_data_management/06_conditional_processing/logical.png" width="900" /></p>
<p>I think that most of the operators above will be familiar, or a least intuitive, for most of you. However, I do want to provide a little bit of commentary for a few of them.</p>
<ul>
<li><p>We haven’t seen the <code>%in%</code> operator before, but I will wait to discuss it below.</p></li>
<li><p>Some of you may have been a little surprised by the results we get from using less than (<code>&lt;</code>) and greater than (<code>&gt;</code>) with characters. It’s basically just testing alphabetical order. A comes before B in the alphabet, so A is less than B. Additionally, when two letters are the same, the upper-case letter is considered greater than the lowercase letter. However, alphabetical order takes precedence over case. So, b is still greater than A even though b is lowercase and A is upper case.</p></li>
<li><p>Many of you may not have seen the modulus operator (<code>%%</code>) before. The modulus operator returns the remainder that is left after dividing two numbers. For example, 4 divided by 2 is 2 with a remainder of 0 because 2 goes into 4 <em>exactly</em> two times. Said another way, 2 * 2 = 4 and 4 - 4 = 0. So, <code>4 %% 2 = 0</code>. However, 3 divided by 2 is 1 with a remainder of 1 because 2 goes into 3 one time with 1 left over. Said another way, 2 * 1 = 2 and 3 - 2 = 1. So, <code>3 %% 2 = 1</code>. How is this useful? Well, the only times I can remember using the modulus operator have been when I needed to separate even and odd rows of a data frame. For example, let’s say that we have a data frame where each person has two rows. The first row always corresponds to treatment A and the second row always corresponds to treatment B. However, for some reason (maybe blinding?), there was no <code>treatment</code> column in the data when we received it. We could use the modulus operator to add a <code>treatment</code> column like this:</p></li>
</ul>
<div class="sourceCode" id="cb757"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb757-1"><a href="conditional-operations.html#cb757-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb757-2"><a href="conditional-operations.html#cb757-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id        =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb757-3"><a href="conditional-operations.html#cb757-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">outcome   =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb757-4"><a href="conditional-operations.html#cb757-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb757-5"><a href="conditional-operations.html#cb757-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##      id outcome
##   &lt;dbl&gt;   &lt;dbl&gt;
## 1     1       0
## 2     1       1
## 3     2       1
## 4     2       1</code></pre>
<div class="sourceCode" id="cb759"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb759-1"><a href="conditional-operations.html#cb759-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb759-2"><a href="conditional-operations.html#cb759-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb759-3"><a href="conditional-operations.html#cb759-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Odd rows are treatment A</span></span>
<span id="cb759-4"><a href="conditional-operations.html#cb759-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Even rows are treatment B</span></span>
<span id="cb759-5"><a href="conditional-operations.html#cb759-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">treatment =</span> <span class="fu">if_else</span>(<span class="fu">row_number</span>() <span class="sc">%%</span> <span class="dv">2</span> <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>)</span>
<span id="cb759-6"><a href="conditional-operations.html#cb759-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##      id outcome treatment
##   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    
## 1     1       0 A        
## 2     1       1 B        
## 3     2       1 A        
## 4     2       1 B</code></pre>
<ul>
<li>I also want to remind you that we should always use the <code>is.na()</code> function to check for missing values. Not the equality operator. Using the equality operator when there are missing values can give results that may be unexpected. For example:</li>
</ul>
<div class="sourceCode" id="cb761"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb761-1"><a href="conditional-operations.html#cb761-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb761-2"><a href="conditional-operations.html#cb761-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name1 =</span> <span class="fu">c</span>(<span class="st">&quot;Jon&quot;</span>, <span class="st">&quot;John&quot;</span>, <span class="cn">NA</span>),</span>
<span id="cb761-3"><a href="conditional-operations.html#cb761-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">name2 =</span> <span class="fu">c</span>(<span class="st">&quot;Jon&quot;</span>, <span class="st">&quot;Jon&quot;</span>, <span class="st">&quot;Jon&quot;</span>)</span>
<span id="cb761-4"><a href="conditional-operations.html#cb761-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb762"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb762-1"><a href="conditional-operations.html#cb762-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb762-2"><a href="conditional-operations.html#cb762-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb762-3"><a href="conditional-operations.html#cb762-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name_match =</span> name1 <span class="sc">==</span> name2</span>
<span id="cb762-4"><a href="conditional-operations.html#cb762-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   name1 name2 name_match
##   &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt;     
## 1 Jon   Jon   TRUE      
## 2 John  Jon   FALSE     
## 3 &lt;NA&gt;  Jon   NA</code></pre>
<p>Many of us would expect the third value of the <code>name_match</code> column to be <code>FALSE</code> instead of <code>NA</code>. There are a couple of different ways we can get <code>FALSE</code> in the third row instead of <code>NA</code>. One way, although not necessarily the best way, is to use the <code>if_else()</code> function:</p>
<div class="sourceCode" id="cb764"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb764-1"><a href="conditional-operations.html#cb764-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb764-2"><a href="conditional-operations.html#cb764-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb764-3"><a href="conditional-operations.html#cb764-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name_match =</span> name1 <span class="sc">==</span> name2,</span>
<span id="cb764-4"><a href="conditional-operations.html#cb764-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">name_match =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(name_match), <span class="cn">FALSE</span>, name_match)</span>
<span id="cb764-5"><a href="conditional-operations.html#cb764-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   name1 name2 name_match
##   &lt;chr&gt; &lt;chr&gt; &lt;lgl&gt;     
## 1 Jon   Jon   TRUE      
## 2 John  Jon   FALSE     
## 3 &lt;NA&gt;  Jon   FALSE</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>if_else()</code> function to assign the value <code>FALSE</code> to the column <code>name_match</code> where the original value of <code>name_match</code> was <code>NA</code>.</p></li>
<li><p>The value we passed to the <code>condition</code> argument was <code>is.na(name_match)</code>. In doing so, we asked R to check each value of the <code>name_match</code> column and see if it was <code>NA</code>.</p></li>
<li><p>If it was <code>NA</code>, then we wanted to return the value that we passed to the <code>true</code> argument. Somewhat confusingly, the value we passed to the <code>true</code> argument was <code>FALSE</code>. All that means is that we wanted <code>if_else()</code> to return the literal value <code>FALSE</code> when the value for <code>name_match</code> was <code>NA</code>.</p></li>
<li><p>If the value in <code>name_match</code> was NOT <code>NA</code>, then we wanted to return the value that we passed to the <code>false</code> argument. In this case, we asked R to return the value that already exists in the <code>name_match</code> column.</p></li>
<li><p>In more informal language, we asked R to replace missing values in the <code>name_match</code> column with <code>FALSE</code> and leave the rest of the values unchanged.</p></li>
</ul>
</div>
<div id="testing-multiple-conditions-simultaneously" class="section level2 hasAnchor" number="30.2">
<h2><span class="header-section-number">30.2</span> Testing multiple conditions simultaneously<a href="conditional-operations.html#testing-multiple-conditions-simultaneously" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far, we have only ever passed one condition to the <code>condition</code> argument of the <code>if_else()</code> function. However, we can pass as many conditions as we want. Having said that, more than 2, or maybe 3, gets very convoluted. Let’s go ahead and take a look at a couple of examples now. We’ll start by simulating some blood pressure data:</p>
<div class="sourceCode" id="cb766"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb766-1"><a href="conditional-operations.html#cb766-1" aria-hidden="true" tabindex="-1"></a>blood_pressure <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb766-2"><a href="conditional-operations.html#cb766-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id     =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb766-3"><a href="conditional-operations.html#cb766-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sysbp  =</span> <span class="fu">c</span>(<span class="dv">152</span>, <span class="dv">120</span>, <span class="dv">119</span>, <span class="dv">123</span>, <span class="dv">135</span>, <span class="dv">83</span>, <span class="dv">191</span>, <span class="dv">147</span>, <span class="dv">209</span>, <span class="dv">166</span>),</span>
<span id="cb766-4"><a href="conditional-operations.html#cb766-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">diasbp =</span> <span class="fu">c</span>(<span class="dv">78</span>, <span class="dv">60</span>, <span class="dv">88</span>, <span class="dv">76</span>, <span class="dv">85</span>, <span class="dv">54</span>, <span class="dv">116</span>, <span class="dv">95</span>, <span class="dv">100</span>, <span class="dv">106</span>)</span>
<span id="cb766-5"><a href="conditional-operations.html#cb766-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb766-6"><a href="conditional-operations.html#cb766-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##       id sysbp diasbp
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1     1   152     78
##  2     2   120     60
##  3     3   119     88
##  4     4   123     76
##  5     5   135     85
##  6     6    83     54
##  7     7   191    116
##  8     8   147     95
##  9     9   209    100
## 10    10   166    106</code></pre>
<p>A person may be categorized as having normal blood pressure when their systolic blood pressure is less than 120 mmHG <em>AND</em> their diastolic blood pressure is less than 80 mmHG. We can use this information and the <code>if_else()</code> function to create a new column in our data frame that contains information about whether each person in our simulated data frame has normal blood pressure or not:</p>
<div class="sourceCode" id="cb768"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb768-1"><a href="conditional-operations.html#cb768-1" aria-hidden="true" tabindex="-1"></a>blood_pressure <span class="sc">%&gt;%</span> </span>
<span id="cb768-2"><a href="conditional-operations.html#cb768-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">bp =</span> <span class="fu">if_else</span>(sysbp <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">80</span>, <span class="st">&quot;Normal&quot;</span>, <span class="st">&quot;Not Normal&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##       id sysbp diasbp bp        
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     
##  1     1   152     78 Not Normal
##  2     2   120     60 Not Normal
##  3     3   119     88 Not Normal
##  4     4   123     76 Not Normal
##  5     5   135     85 Not Normal
##  6     6    83     54 Normal    
##  7     7   191    116 Not Normal
##  8     8   147     95 Not Normal
##  9     9   209    100 Not Normal
## 10    10   166    106 Not Normal</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>if_else()</code> function to create a new column in our data frame (<code>bp</code>) that contains information about whether each person has normal blood pressure or not.</p></li>
<li><p>We actually passed two conditions to the <code>condition</code> argument. The first condition was that the value of <code>sysbp</code> had to be less than <code>120</code>. The second condition was that the value of <code>diasbp</code> had to be less than <code>80</code>.</p></li>
<li><p>Because we separated these conditions with the AND operator (<code>&amp;</code>), both conditions had to be true in order for the <code>if_else()</code> function to return the value we passed to the <code>true</code> argument – <code>Normal</code>. Otherwise, the <code>if_else()</code> function returned the value we passed to the <code>false</code> argument – <code>Not Normal</code>.</p></li>
<li><p>Participant 2 had a systolic blood pressure of 120 and a diastolic blood pressure of 60. Although 60 is less than 80 (condition number 2), 120 is not less than 120 (condition number 1). So, the value returned by the <code>if_else()</code> function was <code>Not Normal</code>.</p></li>
<li><p>Participant 3 had a systolic blood pressure of 119 and a diastolic blood pressure of 88 Although 119 is less than 120 (condition number 1), 88 is not less than 80 (condition number 2). So, the value returned by the <code>if_else()</code> function was <code>Not Normal</code>.</p></li>
<li><p>Participant 6 had a systolic blood pressure of 83 and a diastolic blood pressure of 54. In this case, conditions 1 <em>and</em> 2 were met. So, the value returned by the <code>if_else()</code> function was <code>Normal</code>.</p></li>
</ul>
<p>This is useful! However, in some cases, we need to be able to test conditions sequentially, rather than simultaneously, and return a different value for each condition.</p>
</div>
<div id="testing-a-sequence-of-conditions" class="section level2 hasAnchor" number="30.3">
<h2><span class="header-section-number">30.3</span> Testing a sequence of conditions<a href="conditional-operations.html#testing-a-sequence-of-conditions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s say that we wanted to create a new column in our <code>blood_pressure</code> data frame that contains each person’s blood pressure category according to the following scale:</p>
<p><img src="img/05_part_data_management/06_conditional_processing/bp.png" width="900" /></p>
<p>This is the perfect opportunity to use <code>dplyr</code>’s <code>case_when()</code> function. Take a look:</p>
<div class="sourceCode" id="cb770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb770-1"><a href="conditional-operations.html#cb770-1" aria-hidden="true" tabindex="-1"></a>blood_pressure <span class="sc">%&gt;%</span> </span>
<span id="cb770-2"><a href="conditional-operations.html#cb770-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb770-3"><a href="conditional-operations.html#cb770-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">bp =</span> <span class="fu">case_when</span>(</span>
<span id="cb770-4"><a href="conditional-operations.html#cb770-4" aria-hidden="true" tabindex="-1"></a>      sysbp <span class="sc">&lt;</span> <span class="dv">120</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">80</span>                               <span class="sc">~</span> <span class="st">&quot;Normal&quot;</span>,</span>
<span id="cb770-5"><a href="conditional-operations.html#cb770-5" aria-hidden="true" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">120</span> <span class="sc">&amp;</span> sysbp <span class="sc">&lt;</span> <span class="dv">130</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">80</span>                <span class="sc">~</span> <span class="st">&quot;Elevated&quot;</span>,</span>
<span id="cb770-6"><a href="conditional-operations.html#cb770-6" aria-hidden="true" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">130</span> <span class="sc">&amp;</span> sysbp <span class="sc">&lt;</span> <span class="dv">140</span> <span class="sc">|</span> diasbp <span class="sc">&gt;=</span> <span class="dv">80</span> <span class="sc">&amp;</span> diasbp <span class="sc">&lt;</span> <span class="dv">90</span> <span class="sc">~</span> <span class="st">&quot;Hypertension Stage 1&quot;</span>,</span>
<span id="cb770-7"><a href="conditional-operations.html#cb770-7" aria-hidden="true" tabindex="-1"></a>      sysbp <span class="sc">&gt;=</span> <span class="dv">140</span> <span class="sc">|</span> diasbp <span class="sc">&gt;=</span> <span class="dv">90</span>                             <span class="sc">~</span> <span class="st">&quot;Hypertension Stage 2&quot;</span></span>
<span id="cb770-8"><a href="conditional-operations.html#cb770-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb770-9"><a href="conditional-operations.html#cb770-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##       id sysbp diasbp bp                  
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;               
##  1     1   152     78 Hypertension Stage 2
##  2     2   120     60 Elevated            
##  3     3   119     88 Hypertension Stage 1
##  4     4   123     76 Elevated            
##  5     5   135     85 Hypertension Stage 1
##  6     6    83     54 Normal              
##  7     7   191    116 Hypertension Stage 2
##  8     8   147     95 Hypertension Stage 2
##  9     9   209    100 Hypertension Stage 2
## 10    10   166    106 Hypertension Stage 2</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>case_when()</code> function to create a new column in our data frame (<code>bp</code>) that contains information about each person’s blood pressure category.</p></li>
<li><p>You can type <code>?case_when</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The <code>case_when()</code> function only has a single argument – the <code>...</code> argument. You should pass one or more two-sided formulas separated by commas to this argument. What in the heck does that mean?</p>
<ul>
<li><p>When the help documentation refers to a two-sided formula, it means this: <code>LHS ~ RHS</code>. Here, <code>LHS</code> means left-hand side and <code>RHS</code> means right-hand side.</p></li>
<li><p>The <code>LHS</code> should be the condition or conditions that we want to test. You can think of this as being equivalent to the <code>condition</code> argument of the <code>if_else()</code> function.</p></li>
<li><p>The <code>RHS</code> should be the value you want the <code>case_when()</code> function to return when the condition on the left-hand side is met. You can think of this as being equivalent to the <code>true</code> argument of the <code>if_else()</code> function.</p></li>
<li><p>The tilde symbol (<code>~</code>) is used to separate the conditions on the left-hand side and the return values on the right-hand side.</p></li>
</ul></li>
<li><p>The <code>case_when()</code> function doesn’t have a direct equivalent to the <code>if_else()</code> function’s <code>false</code> argument. Instead, it evaluates each two-sided formula sequentially until if finds a condition that is met. If it never finds a condition that is met, then it returns an <code>NA</code>. I will expand on this more below.</p></li>
<li><p>Finally, we assigned all the values returned by the <code>case_when()</code> function to a new column that we named <code>bp</code>.</p></li>
</ul>
<p class="note">
🗒<strong>Side Note:</strong> Traditionally, the tilde symbol is used to represent relationships in a statistical model. Here, it doesn’t have that meaning. I assume this symbol was picked somewhat out of necessity. Remember, any of the comparison operators, arithmetic operators, and logical operators may be used to define a condition in the left-hand side, and commas are used to separated multiple two-sided formulas. Therefore, there aren’t very many symbols left to choose from. Therefore, tilde it is. That’s my guess anyway.
</p>
<p>The <code>case_when()</code> function was really useful for creating the <code>bp</code> column above, but there was also a lot going on there. Next, we’ll take a look at a slightly less complex example and clarify a few things along the way.</p>
</div>
<div id="recoding-variables" class="section level2 hasAnchor" number="30.4">
<h2><span class="header-section-number">30.4</span> Recoding variables<a href="conditional-operations.html#recoding-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In epidemiology, recoding variables is really common. For example, we may collect information about people’s ages as a continuous variable, but decide that it makes more sense to <strong>collapse</strong> age into age categories for our analysis. Let’s say that our analysis plan calls for assigning each of our participants to one of the following age categories:</p>
<p>1 = <code>child</code> when the participant is less than 12 years old<br />
2 = <code>adolescent</code> when the participant is between the ages of 12 and less than 18<br />
3 = <code>adult</code> when the participant is 18 years old or older</p>
<p class="note">
🗒<strong>Side Note:</strong> You may not have ever heard of <strong>collapsing</strong> variables before. It simply means combing two or more values of your variable. We can collapse continuous variables into categories, as we discussed in the example above, or we can collapse categories into broader categories (as you will see with the race category example below). After we collapse a variable, it always contains fewer (and broader) possible values than it contained before we collapsed it.
</p>
<p>I’m going to show you how to do this below using the <code>case_when()</code> function. However, I’m going to do it piecemeal so that I can highlight a few important concepts. First, let’s simulate some data that includes 10 participant’s ages.</p>
<div class="sourceCode" id="cb772"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb772-1"><a href="conditional-operations.html#cb772-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simulate some age data</span></span>
<span id="cb772-2"><a href="conditional-operations.html#cb772-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb772-3"><a href="conditional-operations.html#cb772-3" aria-hidden="true" tabindex="-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb772-4"><a href="conditional-operations.html#cb772-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">id  =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb772-5"><a href="conditional-operations.html#cb772-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">c</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>, <span class="dv">9</span>, <span class="cn">TRUE</span>), <span class="cn">NA</span>)</span>
<span id="cb772-6"><a href="conditional-operations.html#cb772-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb772-7"><a href="conditional-operations.html#cb772-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 2
##       id   age
##    &lt;int&gt; &lt;int&gt;
##  1     1    15
##  2     2    19
##  3     3    14
##  4     4     3
##  5     5    10
##  6     6    18
##  7     7    22
##  8     8    11
##  9     9     5
## 10    10    NA</code></pre>
<p>Then, let’s start the process of collapsing the <code>age</code> column into a new column called <code>age_3cat</code> that contains the 3 age categories we discussed above:</p>
<div class="sourceCode" id="cb774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb774-1"><a href="conditional-operations.html#cb774-1" aria-hidden="true" tabindex="-1"></a>ages <span class="sc">%&gt;%</span> </span>
<span id="cb774-2"><a href="conditional-operations.html#cb774-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb774-3"><a href="conditional-operations.html#cb774-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_3cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb774-4"><a href="conditional-operations.html#cb774-4" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">~</span> <span class="dv">1</span></span>
<span id="cb774-5"><a href="conditional-operations.html#cb774-5" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb774-6"><a href="conditional-operations.html#cb774-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##       id   age age_3cat
##    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;
##  1     1    15       NA
##  2     2    19       NA
##  3     3    14       NA
##  4     4     3        1
##  5     5    10        1
##  6     6    18       NA
##  7     7    22       NA
##  8     8    11        1
##  9     9     5        1
## 10    10    NA       NA</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>case_when()</code> function to create a new column in our data frame (<code>age_3cat</code>) that will eventually categorize each participant into one of 3 categories depending on their continuous age value.</p></li>
<li><p>Notice that we only passed one two-sided formula to the <code>case_when()</code> function – <code>age &lt; 12 ~ 1</code>.</p>
<ul>
<li><p>The <code>RHS</code> of the two-sided formula is <code>age &lt; 12</code>. This tells the <code>case_when()</code> function to check whether or not every value in the <code>age</code> column is less than <code>12</code> or not.</p></li>
<li><p>The <code>LHS</code> of the two-sided formula is <code>1</code>. This tells the <code>case_when()</code> function what value to return each time it finds a value less than <code>12</code> in the <code>age</code> column.</p></li>
<li><p>The tilde symbol is used to separate the <code>RHS</code> and the <code>LHS</code> of the two-sided formula.</p></li>
</ul></li>
<li><p>Here is how the <code>case_when()</code> function basically works. It will test the condition on the left-hand side for each value of the variable, or variables, passed to the left-hand side (i.e., <code>age</code>). If the condition is met (i.e., <code>&lt; 12</code>), then it will return the value on the right-hand side of the tilde (i.e., <code>1</code>). If the condition is not met, it will test the condition in the next two-sided formula. When there are no more two-sided formulas, then it will return an <code>NA</code>.</p>
<ul>
<li><p>Above, the first value in <code>age</code> is <code>15</code>. <code>15</code> is <em>NOT</em> less than <code>12</code>. So, <code>case_when()</code> tries to move on to the next two-sided formula. However, there is no next two-sided formula. So, the first value returned by the <code>case_when()</code> function is <code>NA</code>. The same is true for the next two values of age.</p></li>
<li><p>The fourth value in <code>age</code> is <code>3</code>. <code>3</code> is less than <code>12</code>. So, the fourth value returned by the <code>case_when()</code> function is <code>1</code>. And so on…</p></li>
<li><p>Finally, after the <code>case_when()</code> function has tested all conditions, the returned values are assigned to a new column that we named <code>age_3cat</code>.</p></li>
</ul></li>
<li><p>Notice that I named the new variable <code>age_3cat</code>. I’m not sure where I picked up this naming convention, but I use it a lot when I collapse variables. The basic format is the name of variable I’m collapsing, an underscore, and the number of categories in the collapsed variable. I like using this convention for two reasons. First, the resulting column names are meaningful and informative. Second, I don’t have to spend any time trying to think of a different meaningful or informative name for my new variable. It’s totally fine if you don’t adopt this naming convention, but I would recommend that you try to use names that are more informative than <code>age2</code> or something like that.</p></li>
<li><p>Notice that I used a number (<code>1</code>) on the right-hand side of the two-sided formula above. We could have used a character value instead (i.e., <code>child</code>); however, for reasons I discussed in the section on factor variables, I prefer to recode my variables using numeric categories and then later creating a factor version of the variable using the <code>_f</code> naming convention.</p></li>
</ul>
<p>Now, let’s add a second two-sided formula to our <code>case_when()</code> function.</p>
<div class="sourceCode" id="cb776"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb776-1"><a href="conditional-operations.html#cb776-1" aria-hidden="true" tabindex="-1"></a>ages <span class="sc">%&gt;%</span> </span>
<span id="cb776-2"><a href="conditional-operations.html#cb776-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb776-3"><a href="conditional-operations.html#cb776-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_3cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb776-4"><a href="conditional-operations.html#cb776-4" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">12</span>             <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb776-5"><a href="conditional-operations.html#cb776-5" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">12</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="dv">2</span></span>
<span id="cb776-6"><a href="conditional-operations.html#cb776-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb776-7"><a href="conditional-operations.html#cb776-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##       id   age age_3cat
##    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;
##  1     1    15        2
##  2     2    19       NA
##  3     3    14        2
##  4     4     3        1
##  5     5    10        1
##  6     6    18       NA
##  7     7    22       NA
##  8     8    11        1
##  9     9     5        1
## 10    10    NA       NA</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>case_when()</code> function to create a new column in our data frame (<code>age_3cat</code>) that will eventually categorize each participant into one of 3 categories depending on their continuous age value.</p></li>
<li><p>Notice that this time we passed two two-sided formulas to the <code>case_when()</code> function – <code>age &lt; 12 ~ 1</code> and <code>age &gt;= 12 &amp; age &lt; 18 ~ 2</code>.</p>
<ul>
<li><p>Notice that we separated the two two-sided formulas with a comma (i.e., immediately after the <code>1</code> in <code>age &lt; 12 ~ 1</code>.</p></li>
<li><p>Notice that the second two-sided formula is actually testing two conditions. First, it tests whether or not the value of age is greater than or equal to 12. Then, it tests whether or not the value of age is less than 18.</p></li>
<li><p>Because we separated the two conditions with the and operator (<code>&amp;</code>), both must be TRUE for <code>case_when()</code> to return the value <code>2</code>. Otherwise, it will move on to the next two-sided formula.</p></li>
<li><p>Above, the first value in <code>age</code> is <code>15</code>. <code>15</code> is <em>NOT</em> less than <code>12</code>. So, <code>case_when()</code> moves on to evaluate the next two-sided formula. <code>15</code> is greater than or equal to <code>12</code> <em>AND</em> <code>15</code> is less than <code>18</code>. Because both conditions of the second two-sided formula were met, <code>case-when()</code> returns the value on the right-hand side of the second two-sided formula – <code>2</code>. So, the first value returned by the <code>case_when()</code> function is <code>2</code>.</p></li>
<li><p>The second value in <code>age</code> is <code>19</code>. <code>19</code> is <em>NOT</em> less than <code>12</code>. So, <code>case_when()</code> moves on to evaluate the next two-sided formula. <code>19</code> is greater than or equal to <code>12</code>, but <code>19</code> is <em>NOT</em> less than <code>18</code>. So, <code>case_when()</code> tries to move on to the next two-sided formula. However, there is no next two-sided formula. So, the second value returned by the <code>case_when()</code> function is <code>NA</code>.</p></li>
<li><p>The fourth value in <code>age</code> is <code>3</code>. <code>3</code> is less than <code>12</code>. So, the fourth value returned by the <code>case_when()</code> function is <code>1</code>. <strong>At this point, because a condition was met, <code>case_when()</code> does not continue checking the current value of <code>age</code> against the remaining two-sided formulas. It returns a <code>1</code> and moves on to the next value of <code>age</code>.</strong></p></li>
<li><p>Finally, after the <code>case_when()</code> function has tested all conditions, the returned values are assigned to a new column that we named <code>age_3cat</code>.</p></li>
</ul></li>
<li><p>In everyday speech, we may express the second two-sided condition above as “categorize all people between the ages of 12 and 18 as an adolescent.” I want to make two points about that before moving on.</p>
<ul>
<li><p>First, while that statement may be totally reasonable in everyday speech, it isn’t quite specific enough for what we are trying to do here. “Between 12 and 18” is a little bit ambiguous. What category is a person put in if they are exactly 12? What category are they put in if they are exactly 18? So, clearly we need to be more precise. I’m not aware of any hard and fast rules for making these kinds of decisions about categorization, but I tend to <em>include</em> the lower end of the range in the current category and <em>exclude</em> the value on the upper end of the range in the current category. So, in the example above, I would say, “categorize all people between the ages of 12 and less than 18 as an adolescent.”</p></li>
<li><p>Second, when we are testing for a “between” condition like this one, I often see students write code like this: <code>age &gt;= 12 &amp; &lt; 18</code>. R won’t understand that. You have to use the column name in each condition to be tested (i.e., <code>age &gt;= 12 &amp; age &lt; 18</code>), even though it doesn’t change. Otherwise, you get an error that looks something like this:</p></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb778"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb778-1"><a href="conditional-operations.html#cb778-1" aria-hidden="true" tabindex="-1"></a>ages <span class="sc">%&gt;%</span> </span>
<span id="cb778-2"><a href="conditional-operations.html#cb778-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb778-3"><a href="conditional-operations.html#cb778-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_3cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb778-4"><a href="conditional-operations.html#cb778-4" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">12</span>             <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb778-5"><a href="conditional-operations.html#cb778-5" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">12</span> <span class="sc">&amp;</span> <span class="er">&lt;</span> <span class="dv">18</span>     <span class="sc">~</span> <span class="dv">2</span></span>
<span id="cb778-6"><a href="conditional-operations.html#cb778-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb778-7"><a href="conditional-operations.html#cb778-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:5:19: unexpected &#39;&lt;&#39;
## 4:       age &lt; 12             ~ 1,
## 5:       age &gt;= 12 &amp; &lt;
##                      ^</code></pre>
<p>Ok, let’s go ahead and wrap up this age category variable:</p>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb780-1"><a href="conditional-operations.html#cb780-1" aria-hidden="true" tabindex="-1"></a>ages <span class="sc">%&gt;%</span> </span>
<span id="cb780-2"><a href="conditional-operations.html#cb780-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb780-3"><a href="conditional-operations.html#cb780-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_3cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb780-4"><a href="conditional-operations.html#cb780-4" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">12</span>             <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb780-5"><a href="conditional-operations.html#cb780-5" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">12</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">18</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb780-6"><a href="conditional-operations.html#cb780-6" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">18</span>            <span class="sc">~</span> <span class="dv">3</span></span>
<span id="cb780-7"><a href="conditional-operations.html#cb780-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb780-8"><a href="conditional-operations.html#cb780-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##       id   age age_3cat
##    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;
##  1     1    15        2
##  2     2    19        3
##  3     3    14        2
##  4     4     3        1
##  5     5    10        1
##  6     6    18        3
##  7     7    22        3
##  8     8    11        1
##  9     9     5        1
## 10    10    NA       NA</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We used <code>dplyr</code>’s <code>case_when()</code> function to create a new column in our data frame (<code>age_3cat</code>) that categorized each participant into one of 3 categories depending on their continuous age value.</li>
</ul>
</div>
<div id="case_when-is-lazy" class="section level2 hasAnchor" number="30.5">
<h2><span class="header-section-number">30.5</span> case_when() is lazy<a href="conditional-operations.html#case_when-is-lazy" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What do I mean when I say that <code>case_when()</code> is lazy? Well, it may not have registered when I mentioned it above, but <code>case_when()</code> stops evaluating two-sided functions for a value as soon as it finds one that is <code>TRUE</code>. For example:</p>
<div class="sourceCode" id="cb782"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb782-1"><a href="conditional-operations.html#cb782-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb782-2"><a href="conditional-operations.html#cb782-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">number =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb782-3"><a href="conditional-operations.html#cb782-3" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb782-4"><a href="conditional-operations.html#cb782-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 1
##   number
##    &lt;dbl&gt;
## 1      1
## 2      2
## 3      3</code></pre>
<div class="sourceCode" id="cb784"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb784-1"><a href="conditional-operations.html#cb784-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb784-2"><a href="conditional-operations.html#cb784-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb784-3"><a href="conditional-operations.html#cb784-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fu">case_when</span>(</span>
<span id="cb784-4"><a href="conditional-operations.html#cb784-4" aria-hidden="true" tabindex="-1"></a>      number <span class="sc">&lt;</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">&quot;Small&quot;</span>,</span>
<span id="cb784-5"><a href="conditional-operations.html#cb784-5" aria-hidden="true" tabindex="-1"></a>      number <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">&quot;Medium&quot;</span>,</span>
<span id="cb784-6"><a href="conditional-operations.html#cb784-6" aria-hidden="true" tabindex="-1"></a>      number <span class="sc">&lt;</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">&quot;Large&quot;</span></span>
<span id="cb784-7"><a href="conditional-operations.html#cb784-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb784-8"><a href="conditional-operations.html#cb784-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   number size  
##    &lt;dbl&gt; &lt;chr&gt; 
## 1      1 Small 
## 2      2 Medium
## 3      3 Large</code></pre>
<p>Why wasn’t the value for the <code>size</code> column <code>Large</code> in every row of the data frame? After all, <code>1</code>, <code>2</code>, and <code>3</code> are all less than <code>4</code>, and <code>number &lt; 4</code> was the final possible two-sided formula that could have been evaluated for each value of <code>number</code>. The answer is that <code>case_when()</code> is lazy. The first value in <code>number</code> is <code>1</code>. <code>1</code> is less than <code>2</code>. So, the condition in the first two-sided formula evaluates to <code>TRUE</code>. So, <code>case_when()</code> immediately returns the value on the right-hand side (<code>Small</code>) and <strong>does not continue checking two-sided formulas. It moves on to the next value of <code>number</code>.</strong></p>
<p>The fact that <code>case_when()</code> is lazy isn’t a bad thing. It’s just something to be aware of. In fact, we can often use it to our advantage. For example, we can use <code>case_when()</code>’s laziness to rewrite the <code>age_3cat</code> code from above a little more succinctly:</p>
<div class="sourceCode" id="cb786"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb786-1"><a href="conditional-operations.html#cb786-1" aria-hidden="true" tabindex="-1"></a>ages <span class="sc">%&gt;%</span> </span>
<span id="cb786-2"><a href="conditional-operations.html#cb786-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb786-3"><a href="conditional-operations.html#cb786-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_3cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb786-4"><a href="conditional-operations.html#cb786-4" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">12</span>  <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb786-5"><a href="conditional-operations.html#cb786-5" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">18</span>  <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb786-6"><a href="conditional-operations.html#cb786-6" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">~</span> <span class="dv">3</span></span>
<span id="cb786-7"><a href="conditional-operations.html#cb786-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb786-8"><a href="conditional-operations.html#cb786-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##       id   age age_3cat
##    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;
##  1     1    15        2
##  2     2    19        3
##  3     3    14        2
##  4     4     3        1
##  5     5    10        1
##  6     6    18        3
##  7     7    22        3
##  8     8    11        1
##  9     9     5        1
## 10    10    NA       NA</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>Because <code>case_when()</code> is lazy, we were able to omit the <code>age &gt;= 12</code> condition from the second two-sided formula. It’s unnecessary because the value <code>1</code> is immediately returned for every person with an <code>age</code> value less than <code>12</code>. By definition, any value being evaluated in the second two-sided function (<code>age &lt; 18</code>) has an age value greater than or equal to 12.</li>
</ul>
</div>
<div id="recode-missing" class="section level2 hasAnchor" number="30.6">
<h2><span class="header-section-number">30.6</span> Recode missing<a href="conditional-operations.html#recode-missing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We’ve already talked about how R uses the special <code>NA</code> value to represent missing data. We’ve also learned how to convert other representations of missing data (e.g., “.”) to <code>NA</code> when we are importing data. However, It is extremely common for data sets that we use in epidemiology to include “don’t know” and “refused” answer options in addition to true “missing”. By convention, those options are often coded as <code>7</code> and <code>9</code>. For questions that include 7 or more response options (e.g., month), then <code>77</code> and <code>99</code> are commonly used to represent “don’t know” and “refused”. For questions that include 77 or more response options (e.g., age), then <code>777</code> and <code>999</code> are commonly used to represent “don’t know” and “refused”.</p>
<p>Differentiating between true missing (i.e., the respondent was never asked the question or just left the response blank on a written questionnaire), don’t know (i.e., the respondent doesn’t know the answer), and refused (i.e., the respondent knows the answer, but doesn’t want to reveille it – possibly out of shame, fear, or embarrassment) can be of some interest for survey design purposes. However, all three of the values described above typically just amount to missing data by the time you get around to the substantive analyses. In other words, knowing that a person refused to give their age doesn’t help me figure out how old they are any more than if they had never been asked at all. Therefore, we commonly use conditional operations in epidemiology to recode these kinds of values to explicitly missing values (<code>NA</code>).</p>
<p>We’ll walk through an example below, but first we will simulate some additional data. Specifically, we’ll add a <code>race</code> column and a <code>hispanic</code> column to our <code>ages</code> data frame, and name the new data frame <code>demographics</code>.</p>
<p>Let’s assume that we have a survey that asks people what race they most identify with. For the moment, let’s assume that they can only select one race. Further, let’s say that the options they are given to select from are:</p>
<p>1 = White<br />
2 = Black or African American<br />
3 = American Indian or Alaskan Native<br />
4 = Asian<br />
5 = Pacific Islander<br />
7 = Don’t know<br />
9 = Refused</p>
<p>Let’s say that we also ask if they self-identify their ethnicity as Hispanic or not. The options they are given to select from are:</p>
<p>0 = No, not Hispanic<br />
1 = Yes, Hispanic<br />
7 = Don’t know<br />
9 = Refused</p>
<div class="sourceCode" id="cb788"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb788-1"><a href="conditional-operations.html#cb788-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="ot">&lt;-</span> ages <span class="sc">%&gt;%</span> </span>
<span id="cb788-2"><a href="conditional-operations.html#cb788-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb788-3"><a href="conditional-operations.html#cb788-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">race     =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb788-4"><a href="conditional-operations.html#cb788-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">hispanic =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb788-5"><a href="conditional-operations.html#cb788-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb788-6"><a href="conditional-operations.html#cb788-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##       id   age  race hispanic
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;
##  1     1    15     1        7
##  2     2    19     2        0
##  3     3    14     1        1
##  4     4     3     4        0
##  5     5    10     7        1
##  6     6    18     1        0
##  7     7    22     2        1
##  8     8    11     9        9
##  9     9     5     1        0
## 10    10    NA     3        1</code></pre>
<p>A very common way that we may want to transform data like this is to collapse race and ethnicity into as single combined race and ethnicity column. Further, notice that American Indian or Alaskan Native race and Asian race are only observed once each, and Pacific Islander race is not observed at all. When values are observed very few times in the data like this, it is common to collapse them into an “other” category. Therefore, our new combined race and ethnicity column will have the following possible values:</p>
<p>1 = White, non-Hispanic<br />
2 = Black, non-Hispanic<br />
3 = Hispanic, any race<br />
4 = Other race, non-Hispanic</p>
<p>There are multiple ways that we can create this new column. We could start by using <code>if_else()</code> to recode <code>7</code> and <code>9</code> to missing:</p>
<div class="sourceCode" id="cb790"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb790-1"><a href="conditional-operations.html#cb790-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb790-2"><a href="conditional-operations.html#cb790-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb790-3"><a href="conditional-operations.html#cb790-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Recode 7 and 9 to missing</span></span>
<span id="cb790-4"><a href="conditional-operations.html#cb790-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_recode =</span> <span class="fu">if_else</span>(race <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> race <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA</span>, race),</span>
<span id="cb790-5"><a href="conditional-operations.html#cb790-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">hispanic_recode =</span> <span class="fu">if_else</span>(hispanic <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> hispanic <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA</span>, hispanic)</span>
<span id="cb790-6"><a href="conditional-operations.html#cb790-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Error in `mutate()`:
## ! Problem while computing `race_recode = if_else(race == 7 | race == 9, NA, race)`.
## Caused by error in `if_else()`:
## ! `false` must be a logical vector, not a double vector.</code></pre>
<p>I intentionally made this error because it’s a really easy one to make, and you will probably make it too. If you look back to the <a href="lets-get-programming.html#missing-data">Let’s get programming chapter</a>, you will see that I briefly discussed the <code>NA</code> value being type logical by default. I also talked about “type coercion” and how most of the time you don’t have to worry about it. I said that R generally coerces <code>NA</code> to <code>NA_character</code> or <code>NA_double</code> or whatever for you under the hood, automatically. I also said that sometimes it doesn’t, especially when using the if_else() and case_when() functions, and it will cause R to give you an error. Finally, I said I would discuss it later. It’s later now. Long story short, the developers of the <code>if_else()</code> function do this on purpose to make the function’s returned result more predictable and slightly faster.</p>
<p>For you, it just means that you have to remember to use <code>NA_character</code>, <code>NA_integer</code>, or <code>NA_real</code> as appropriate. For example, the error message above says, “<code>false</code> must be a logical vector, not a double vector.” This means that the value we passed to the <code>false</code> argument was type double, but <code>if_else()</code> was expecting it to be type logical. Why? Well, <code>if_else()</code> was expecting it to be type logical because the value we passed to the <code>true</code> argument (<code>NA</code>) is type logical, and vectors can only ever have one type. To fix this error, we simply need to change the value we are passing to the <code>true</code> argument from logical (<code>NA</code>) to double (<code>NA_real</code>) so that it matches the values we are passing to the <code>false</code> argument.</p>
<p>Let’s try again using <code>NA_real</code> instead of <code>NA</code>.</p>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb792-1"><a href="conditional-operations.html#cb792-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb792-2"><a href="conditional-operations.html#cb792-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb792-3"><a href="conditional-operations.html#cb792-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Recode 7 and 9 to missing</span></span>
<span id="cb792-4"><a href="conditional-operations.html#cb792-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_recode =</span> <span class="fu">if_else</span>(race <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> race <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, race),</span>
<span id="cb792-5"><a href="conditional-operations.html#cb792-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">hispanic_recode =</span> <span class="fu">if_else</span>(hispanic <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> hispanic <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, hispanic)</span>
<span id="cb792-6"><a href="conditional-operations.html#cb792-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 6
##       id   age  race hispanic race_recode hispanic_recode
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;
##  1     1    15     1        7           1              NA
##  2     2    19     2        0           2               0
##  3     3    14     1        1           1               1
##  4     4     3     4        0           4               0
##  5     5    10     7        1          NA               1
##  6     6    18     1        0           1               0
##  7     7    22     2        1           2               1
##  8     8    11     9        9          NA              NA
##  9     9     5     1        0           1               0
## 10    10    NA     3        1           3               1</code></pre>
<p>Great! We can move on with creating our new race and ethnicity column now that we’ve explicitly transformed <code>7</code>’s and <code>9</code>’s to <code>NA</code>. There’s nothing “new” in the code below, so I’m not going to explain it line-by-line. However, it’s a little bit dense, so I recommend that you take a few minutes to review it thoroughly and make sure you understand what each line is doing.</p>
<div class="sourceCode" id="cb794"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb794-1"><a href="conditional-operations.html#cb794-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb794-2"><a href="conditional-operations.html#cb794-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb794-3"><a href="conditional-operations.html#cb794-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Recode 7 and 9 to missing</span></span>
<span id="cb794-4"><a href="conditional-operations.html#cb794-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_recode     =</span> <span class="fu">if_else</span>(race <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> race <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, race),</span>
<span id="cb794-5"><a href="conditional-operations.html#cb794-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">hispanic_recode =</span> <span class="fu">if_else</span>(hispanic <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> hispanic <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, hispanic),</span>
<span id="cb794-6"><a href="conditional-operations.html#cb794-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_eth_4cat   =</span> <span class="fu">case_when</span>(</span>
<span id="cb794-7"><a href="conditional-operations.html#cb794-7" aria-hidden="true" tabindex="-1"></a>      <span class="co"># White, non-Hispanic</span></span>
<span id="cb794-8"><a href="conditional-operations.html#cb794-8" aria-hidden="true" tabindex="-1"></a>      race_recode <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> hispanic_recode <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb794-9"><a href="conditional-operations.html#cb794-9" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Black, non-Hispanic</span></span>
<span id="cb794-10"><a href="conditional-operations.html#cb794-10" aria-hidden="true" tabindex="-1"></a>      race_recode <span class="sc">==</span> <span class="dv">2</span> <span class="sc">&amp;</span> hispanic_recode <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb794-11"><a href="conditional-operations.html#cb794-11" aria-hidden="true" tabindex="-1"></a>      <span class="co"># American Indian or Alaskan Native to Other race, non-Hispanic</span></span>
<span id="cb794-12"><a href="conditional-operations.html#cb794-12" aria-hidden="true" tabindex="-1"></a>      race_recode <span class="sc">==</span> <span class="dv">3</span> <span class="sc">&amp;</span> hispanic_recode <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb794-13"><a href="conditional-operations.html#cb794-13" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Asian to Other race, non-Hispanic</span></span>
<span id="cb794-14"><a href="conditional-operations.html#cb794-14" aria-hidden="true" tabindex="-1"></a>      race_recode <span class="sc">==</span> <span class="dv">4</span> <span class="sc">&amp;</span> hispanic_recode <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb794-15"><a href="conditional-operations.html#cb794-15" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Pacific Islander to Other race, non-Hispanic</span></span>
<span id="cb794-16"><a href="conditional-operations.html#cb794-16" aria-hidden="true" tabindex="-1"></a>      race_recode <span class="sc">==</span> <span class="dv">4</span> <span class="sc">&amp;</span> hispanic_recode <span class="sc">==</span> <span class="dv">0</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb794-17"><a href="conditional-operations.html#cb794-17" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Hispanic, any race</span></span>
<span id="cb794-18"><a href="conditional-operations.html#cb794-18" aria-hidden="true" tabindex="-1"></a>      hispanic_recode <span class="sc">==</span> <span class="dv">1</span>                    <span class="sc">~</span> <span class="dv">3</span></span>
<span id="cb794-19"><a href="conditional-operations.html#cb794-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb794-20"><a href="conditional-operations.html#cb794-20" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 7
##       id   age  race hispanic race_recode hispanic_recode race_eth_4cat
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;           &lt;dbl&gt;         &lt;dbl&gt;
##  1     1    15     1        7           1              NA            NA
##  2     2    19     2        0           2               0             2
##  3     3    14     1        1           1               1             3
##  4     4     3     4        0           4               0             4
##  5     5    10     7        1          NA               1             3
##  6     6    18     1        0           1               0             1
##  7     7    22     2        1           2               1             3
##  8     8    11     9        9          NA              NA            NA
##  9     9     5     1        0           1               0             1
## 10    10    NA     3        1           3               1             3</code></pre>
<p>The code above works, and it is very explicit. However, we can definitely make it more succinct and easier to read. For example:</p>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb796-1"><a href="conditional-operations.html#cb796-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb796-2"><a href="conditional-operations.html#cb796-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb796-3"><a href="conditional-operations.html#cb796-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_eth_4cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb796-4"><a href="conditional-operations.html#cb796-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(hispanic) <span class="sc">|</span> hispanic <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">9</span>) <span class="sc">~</span> <span class="cn">NA_real_</span>, <span class="co"># Unknown ethnicity</span></span>
<span id="cb796-5"><a href="conditional-operations.html#cb796-5" aria-hidden="true" tabindex="-1"></a>      hispanic <span class="sc">==</span> <span class="dv">1</span>                           <span class="sc">~</span> <span class="dv">3</span>,        <span class="co"># Hispanic, any race</span></span>
<span id="cb796-6"><a href="conditional-operations.html#cb796-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(race) <span class="sc">|</span> race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">9</span>)         <span class="sc">~</span> <span class="cn">NA_real_</span>, <span class="co"># non-Hispanic, unknown race</span></span>
<span id="cb796-7"><a href="conditional-operations.html#cb796-7" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">==</span> <span class="dv">1</span>                               <span class="sc">~</span> <span class="dv">1</span>,        <span class="co"># White, non-Hispanic</span></span>
<span id="cb796-8"><a href="conditional-operations.html#cb796-8" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">==</span> <span class="dv">2</span>                               <span class="sc">~</span> <span class="dv">2</span>,        <span class="co"># Black, non-Hispanic</span></span>
<span id="cb796-9"><a href="conditional-operations.html#cb796-9" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span>                                    <span class="sc">~</span> <span class="dv">4</span>         <span class="co"># Other race, non-Hispanic</span></span>
<span id="cb796-10"><a href="conditional-operations.html#cb796-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb796-11"><a href="conditional-operations.html#cb796-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 5
##       id   age  race hispanic race_eth_4cat
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;         &lt;dbl&gt;
##  1     1    15     1        7            NA
##  2     2    19     2        0             2
##  3     3    14     1        1             3
##  4     4     3     4        0             4
##  5     5    10     7        1             3
##  6     6    18     1        0             1
##  7     7    22     2        1             3
##  8     8    11     9        9            NA
##  9     9     5     1        0             1
## 10    10    NA     3        1             3</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used <code>dplyr</code>’s <code>case_when()</code> function to create a new column in our data frame (<code>race_eth_4cat</code>) that categorized each participant into one of 4 race and ethnicity categories depending on their values in the <code>race</code> column and the <code>hispanic</code> column.</p></li>
<li><p>Compared to the first method we used, the second method doesn’t explicitly create new <code>race</code> and <code>hispanic</code> columns with the <code>7</code>’s and <code>9</code>’s recoded to <code>NA</code>. In the second method, those columns aren’t needed.</p></li>
<li><p>The very first two-sided formula tells <code>case_when()</code> to set the value of <code>race_eth_4cat</code> to <code>NA_real_</code> when the value of <code>hispanic</code> is missing.</p>
<ul>
<li><p>We put this two-sided formula first because if we don’t know a person’s Hispanic ethnicity, then we can’t put them into any category of <code>race_eth_4cat</code>. All categories of <code>race_eth_4cat</code> are dependent on a known value for <code>hispanic</code>. For example, look at participant number 1. They reported being white, but they don’t give their ethnicity. Which category do we put them in? We can’t put them in <code>White, non-Hispanic</code> because they very well could be Hispanic. We can’t put them in <code>Hispanic, any race</code> because they very well could be non-Hispanic. We don’t know. We never will. We code them as missing and don’t evaluate any further. And because <code>case_when()</code> is lazy, any other participants with a missing value for <code>hispanic</code> would also only have this first two-sided formula evaluated.</p></li>
<li><p>There were no actual <code>NA</code> values in the <code>hispanic</code> column, but I put it in the code for completeness. There will be some true missing (<code>NA</code>) values in most real-world data sets.</p></li>
<li><p>Notice that we finally used the <code>%in%</code> operator above (<code>hispanic %in% c(7, 9)</code>). This is equivalent to typing <code>hispanic == 7 | hispanic == 9</code>. Notice that’s an <em>OR</em>. In this case, it doesn’t save us a ton of typing and visual clutter, but in many cases it can.</p></li>
</ul></li>
<li><p>The second two-sided formula tells <code>case_when()</code> to set the value of <code>race_eth_4cat</code> to <code>3</code> (i.e., Hispanic any-race) when the value of <code>hispanic</code> is <code>1</code>. Why did we put this second? If we know that someone is Hispanic, does it matter what race they reported? Nope! No matter what race they reported (even missing race) they get coded as <code>Hispanic, any race</code>. And because <code>case_when()</code> is lazy, putting this two-sided formula second has two advantages:</p>
<ul>
<li><p>Any other participants with a value of <code>1</code> for <code>hispanic</code> would only have the first two two-sided formulas evaluated. In other words, for each Hispanic participant, R would only evaluate 2 two-sided formulas instead of the 6 we used in the first method. With only 10 participants in the data, we won’t notice any performance improvement. But, this performance improvement can add up when we have thousands or millions of rows.</p></li>
<li><p>It allows us to remove the <code>hispanic == 0</code> from the remaining two-sided formulas. Think about it. All participants with a missing value for <code>hispanic</code> were accounted for in the first two-sided formula. All participants with a <code>1</code> for <code>hispanic</code> were accounted for in the second two-sided formula. By definition, any participant left in the data must have a value of <code>0</code> for <code>hispanic</code>. There’s no need to write that code and there’s no need for R to evaluate that condition. Less typing for us and further performance improvements to boot.</p></li>
</ul></li>
<li><p>The third two-sided formula tells <code>case_when()</code> to set the value of <code>race_eth_4cat</code> to <code>NA_real_</code> when the value of <code>race</code> is missing. At this point in the code, there are no participants left with a value of <code>1</code> for <code>hispanic</code>. Therefore, if they are missing a value for <code>race</code> we won’t be able to assign them a value for <code>race_eth_4cat</code>. We code them as missing and don’t evaluate any further.</p></li>
<li><p>The fourth and fifth two-sided formulas tell <code>case_when()</code> to set the value of <code>race_eth_4cat</code> to <code>1</code> and <code>2</code> respectively when the value of <code>race</code> is <code>1</code> and <code>2</code>.</p></li>
<li><p>The final two-sided formula is simply <code>TRUE ~ 4</code>. This tells <code>case_when()</code> to set the value of <code>race_eth_4cat</code> to <code>4</code> when none of the other two-sided formulas above evaluated to <code>TRUE</code>. Why did we do this? Well, every participant with missing data has been accounted for, every <code>Hispanic</code> participant has been accounted for, every <code>White, non-Hispanic</code> participant has been accounted for, and every <code>Black, non-Hispanic</code> participant has been accounted for. Because case_when() is lazy, we know that any participant that makes it to this part of the code must fall into the <code>Other race, non-Hispanic</code> category.</p>
<ul>
<li>Notice that there is nothing at all about <code>race</code> or <code>hispanic</code> in this two-sided formula. It just says <code>TRUE</code>. What does <code>case_when()</code> do when a condition on the left-hand side evaluates to <code>TRUE</code>? It returns the value on the right-hand side. In this case <code>4</code>.</li>
</ul></li>
</ul>
<p class="warning">
⚠️<strong>Warning:</strong> Sometimes, adding an a final <code>TRUE</code> condition like the one above can be really useful. However, you have to be really careful. You can easily get unintended results if you aren’t absolutely sure that you’ve already accounted for every possible combination of relevant conditions in the two-sided formulas that come before.
</p>
<p>Let’s go ahead and wrap up this chapter with one consolidated code chunk that cleans our demographics data:</p>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="conditional-operations.html#cb798-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb798-2"><a href="conditional-operations.html#cb798-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Recode variables</span></span>
<span id="cb798-3"><a href="conditional-operations.html#cb798-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb798-4"><a href="conditional-operations.html#cb798-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Collapse continuous age into 3 categories</span></span>
<span id="cb798-5"><a href="conditional-operations.html#cb798-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_3cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb798-6"><a href="conditional-operations.html#cb798-6" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">12</span>  <span class="sc">~</span> <span class="dv">1</span>, <span class="co"># child</span></span>
<span id="cb798-7"><a href="conditional-operations.html#cb798-7" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&lt;</span> <span class="dv">18</span>  <span class="sc">~</span> <span class="dv">2</span>, <span class="co"># adolescent</span></span>
<span id="cb798-8"><a href="conditional-operations.html#cb798-8" aria-hidden="true" tabindex="-1"></a>      age <span class="sc">&gt;=</span> <span class="dv">18</span> <span class="sc">~</span> <span class="dv">3</span>  <span class="co"># adult</span></span>
<span id="cb798-9"><a href="conditional-operations.html#cb798-9" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb798-10"><a href="conditional-operations.html#cb798-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_3cat_f =</span> <span class="fu">factor</span>(</span>
<span id="cb798-11"><a href="conditional-operations.html#cb798-11" aria-hidden="true" tabindex="-1"></a>      age_3cat, </span>
<span id="cb798-12"><a href="conditional-operations.html#cb798-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;child&quot;</span>, <span class="st">&quot;adolescent&quot;</span>, <span class="st">&quot;adult&quot;</span>)</span>
<span id="cb798-13"><a href="conditional-operations.html#cb798-13" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb798-14"><a href="conditional-operations.html#cb798-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Combine race and ethnicity</span></span>
<span id="cb798-15"><a href="conditional-operations.html#cb798-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_eth_4cat =</span> <span class="fu">case_when</span>(</span>
<span id="cb798-16"><a href="conditional-operations.html#cb798-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(hispanic) <span class="sc">|</span> hispanic <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">9</span>) <span class="sc">~</span> <span class="cn">NA_real_</span>, <span class="co"># Unknown ethnicity</span></span>
<span id="cb798-17"><a href="conditional-operations.html#cb798-17" aria-hidden="true" tabindex="-1"></a>      hispanic <span class="sc">==</span> <span class="dv">1</span>                           <span class="sc">~</span> <span class="dv">3</span>,        <span class="co"># Hispanic, any race</span></span>
<span id="cb798-18"><a href="conditional-operations.html#cb798-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">is.na</span>(race) <span class="sc">|</span> race <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">9</span>)         <span class="sc">~</span> <span class="cn">NA_real_</span>, <span class="co"># non-Hispanic, unknown race</span></span>
<span id="cb798-19"><a href="conditional-operations.html#cb798-19" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">==</span> <span class="dv">1</span>                               <span class="sc">~</span> <span class="dv">1</span>,        <span class="co"># White, non-Hispanic</span></span>
<span id="cb798-20"><a href="conditional-operations.html#cb798-20" aria-hidden="true" tabindex="-1"></a>      race <span class="sc">==</span> <span class="dv">2</span>                               <span class="sc">~</span> <span class="dv">2</span>,        <span class="co"># Black, non-Hispanic</span></span>
<span id="cb798-21"><a href="conditional-operations.html#cb798-21" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span>                                    <span class="sc">~</span> <span class="dv">4</span>         <span class="co"># Other race, non-Hispanic</span></span>
<span id="cb798-22"><a href="conditional-operations.html#cb798-22" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb798-23"><a href="conditional-operations.html#cb798-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">race_eth_4cat_f =</span> <span class="fu">factor</span>(</span>
<span id="cb798-24"><a href="conditional-operations.html#cb798-24" aria-hidden="true" tabindex="-1"></a>      race_eth_4cat,</span>
<span id="cb798-25"><a href="conditional-operations.html#cb798-25" aria-hidden="true" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb798-26"><a href="conditional-operations.html#cb798-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;White, non-Hispanic&quot;</span>, <span class="st">&quot;Black, non-Hispanic&quot;</span>, <span class="st">&quot;Hispanic, any race&quot;</span>,</span>
<span id="cb798-27"><a href="conditional-operations.html#cb798-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Other race, non-Hispanic&quot;</span></span>
<span id="cb798-28"><a href="conditional-operations.html#cb798-28" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb798-29"><a href="conditional-operations.html#cb798-29" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb798-30"><a href="conditional-operations.html#cb798-30" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##       id   age  race hispanic age_3cat age_3cat_f race_eth_4cat race_eth_4cat_f         
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;fct&gt;              &lt;dbl&gt; &lt;fct&gt;                   
##  1     1    15     1        7        2 adolescent            NA &lt;NA&gt;                    
##  2     2    19     2        0        3 adult                  2 Black, non-Hispanic     
##  3     3    14     1        1        2 adolescent             3 Hispanic, any race      
##  4     4     3     4        0        1 child                  4 Other race, non-Hispanic
##  5     5    10     7        1        1 child                  3 Hispanic, any race      
##  6     6    18     1        0        3 adult                  1 White, non-Hispanic     
##  7     7    22     2        1        3 adult                  3 Hispanic, any race      
##  8     8    11     9        9        1 child                 NA &lt;NA&gt;                    
##  9     9     5     1        0        1 child                  1 White, non-Hispanic     
## 10    10    NA     3        1       NA &lt;NA&gt;                   3 Hispanic, any race</code></pre>
<p>Now that we’ve mastered conditional operations, we can use them to help us navigate another common data collection technique in epidemiology – skip patterns.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-character-strings.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="working-with-multiple-data-frames.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/brad-cannell/r4epi/edit/master/chapters/05_part_data_management/06_conditional_operations.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
